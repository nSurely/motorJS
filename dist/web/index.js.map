{"version":3,"file":"web/index.js","mappings":"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","sources":["webpack://motorJS/./node_modules/node-fetch/browser.js","webpack://motorJS/./node_modules/react-native-storage/lib/storage.esm.js","webpack://motorJS/./node_modules/regenerator-runtime/runtime.js","webpack://motorJS/./src/classes/drivers/core.ts","webpack://motorJS/./src/classes/drivers/index.ts","webpack://motorJS/./src/classes/fleets/core.ts","webpack://motorJS/./src/classes/fleets/index.ts","webpack://motorJS/./src/classes/vehicles/core.ts","webpack://motorJS/./src/classes/vehicles/index.ts","webpack://motorJS/./src/index.ts","webpack://motorJS/./src/models/billing/accounts/index.ts","webpack://motorJS/./src/models/billing/events/index.ts","webpack://motorJS/./src/models/custom.ts","webpack://motorJS/./src/models/drivers/index.ts","webpack://motorJS/./src/models/fleets/assigned/index.ts","webpack://motorJS/./src/models/fleets/drivers/index.ts","webpack://motorJS/./src/models/fleets/index.ts","webpack://motorJS/./src/models/fleets/vehicles/index.ts","webpack://motorJS/./src/models/index.ts","webpack://motorJS/./src/models/policy/approval/index.ts","webpack://motorJS/./src/models/policy/cancellation/index.ts","webpack://motorJS/./src/models/policy/driver/index.ts","webpack://motorJS/./src/models/policy/duration/index.ts","webpack://motorJS/./src/models/policy/enums/group.ts","webpack://motorJS/./src/models/policy/index.ts","webpack://motorJS/./src/models/types/index.ts","webpack://motorJS/./src/models/vehicles/drv/index.ts","webpack://motorJS/./src/models/vehicles/rv/index.ts","webpack://motorJS/./src/models/vehicles/v/index.ts","webpack://motorJS/./src/utils/api/core.ts","webpack://motorJS/./src/utils/api/exceptions.ts","webpack://motorJS/./src/utils/api/index.ts","webpack://motorJS/./src/utils/auth/apiKey.ts","webpack://motorJS/./src/utils/auth/core.ts","webpack://motorJS/./src/utils/auth/driver.ts","webpack://motorJS/./src/utils/auth/exceptions.ts","webpack://motorJS/./src/utils/auth/index.ts","webpack://motorJS/./src/utils/auth/jwt.ts","webpack://motorJS/./src/utils/auth/user.ts","webpack://motorJS/./src/utils/helpers/index.ts","webpack://motorJS/./src/utils/helpers/request.ts","webpack://motorJS/./src/utils/search/index.ts","webpack://motorJS/./src/utils/storage/index.ts","webpack://motorJS/webpack/bootstrap","webpack://motorJS/webpack/runtime/define property getters","webpack://motorJS/webpack/runtime/hasOwnProperty shorthand","webpack://motorJS/webpack/runtime/make namespace object","webpack://motorJS/webpack/startup"],"sourcesContent":["\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar global = getGlobal();\n\nmodule.exports = exports = global.fetch;\n\n// Needed for TypeScript and Webpack.\nif (global.fetch) {\n\texports.default = global.fetch.bind(global);\n}\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;","function e(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function t(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return(c=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function u(e){var t=\"function\"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf(\"[native code]\")))return e;var n;if(\"function\"!=typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return c(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,e)})(e)}function h(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}var l=function(e){function n(e){var r;return t(this,n),(r=h(this,s(n).call(this,\"Not Found! Params: \".concat(e)))).name=\"NotFoundError\",r.stack=(new Error).stack,r}return a(n,u(Error)),n}(),f=function(e){function n(e){var r;return t(this,n),(r=h(this,s(n).call(this,\"Expired! Params: \".concat(e)))).name=\"ExpiredError\",r.stack=(new Error).stack,r}return a(n,u(Error)),n}();export default(function(){function r(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t(this,r),this._SIZE=n.size||1e3,this.sync=n.sync||{},this.defaultExpires=void 0!==n.defaultExpires?n.defaultExpires:864e5,this.enableCache=!1!==n.enableCache,this._s=n.storageBackend||null,this._innerVersion=11,this.cache={},this._s&&this._s.setItem)try{var i=this._s.setItem(\"__react_native_storage_test\",\"test\");this.isPromise=!(!i||!i.then)}catch(e){throw console.warn(e),delete this._s,e}else console.warn(\"Data would be lost after reload cause there is no storageBackend specified!\\n      \\nEither use localStorage(for web) or AsyncStorage(for React Native) as a storageBackend.\");this._mapPromise=this.getItem(\"map\").then(function(t){e._m=e._checkMap(t&&JSON.parse(t)||{})})}var a,s,o,c,u;return a=r,(s=[{key:\"getItem\",value:function(e){return this._s?this.isPromise?this._s.getItem(e):Promise.resolve(this._s.getItem(e)):Promise.resolve()}},{key:\"setItem\",value:function(e,t){return this._s?this.isPromise?this._s.setItem(e,t):Promise.resolve(this._s.setItem(e,t)):Promise.resolve()}},{key:\"removeItem\",value:function(e){return this._s?this.isPromise?this._s.removeItem(e):Promise.resolve(this._s.removeItem(e)):Promise.resolve()}},{key:\"_initMap\",value:function(){return{innerVersion:this._innerVersion,index:0,__keys__:{}}}},{key:\"_checkMap\",value:function(e){return e&&e.innerVersion&&e.innerVersion===this._innerVersion?e:this._initMap()}},{key:\"_getId\",value:function(e,t){return e+\"_\"+t}},{key:\"_saveToMap\",value:function(e){var t=e.key,n=e.id,r=e.data,i=this._getId(t,n),a=this._m;if(void 0!==a[i])return this.enableCache&&(this.cache[i]=JSON.parse(r)),this.setItem(\"map_\"+a[i],r);if(void 0!==a[a.index]){var s=a[a.index],o=s.split(\"_\");delete a[s],this._removeIdInKey(o[0],o[1]),this.enableCache&&delete this.cache[s]}if(a[i]=a.index,a[a.index]=i,a.__keys__[t]=a.__keys__[t]||[],a.__keys__[t].push(n),this.enableCache){var c=JSON.parse(r);this.cache[i]=c}var u=a.index;++a.index===this._SIZE&&(a.index=0),this.setItem(\"map_\"+u,r),this.setItem(\"map\",JSON.stringify(a))}},{key:\"save\",value:function(e){var t=this,n=e.key,r=e.id,i=e.data,a=e.rawData,s=e.expires,o=void 0===s?this.defaultExpires:s;-1!==n.toString().indexOf(\"_\")&&console.error('Please do not use \"_\" in key!');var c={rawData:i};if(void 0===i){if(void 0===a)return void console.error('\"data\" is required in save()!');console.warn('\"rawData\" is deprecated, please use \"data\" instead!'),c.rawData=a}var u=Date.now();if(null!==o&&(c.expires=u+o),c=JSON.stringify(c),void 0===r){if(this.enableCache){var h=JSON.parse(c);this.cache[n]=h}return this.setItem(n,c)}return-1!==r.toString().indexOf(\"_\")&&console.error('Please do not use \"_\" in id!'),this._mapPromise.then(function(){return t._saveToMap({key:n,id:r,data:c})})}},{key:\"getBatchData\",value:function(e){var t=this;return Promise.all(e.map(function(e){return t.load(e)}))}},{key:\"getBatchDataWithIds\",value:(c=regeneratorRuntime.mark(function e(t){var n,r,i,a,s,o,c,u,h=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,r=t.ids,i=t.syncInBackground,a=t.syncParams,s=r.map(function(e){return h.load({key:n,id:e,syncInBackground:i,autoSync:!1,batched:!0})}),e.next=4,Promise.all(s);case 4:if(o=e.sent,c=[],o.forEach(function(e){void 0!==e.syncId&&c.push(e.syncId)}),!c.length){e.next=14;break}return e.next=10,this.sync[n]({id:c,syncParams:a});case 10:return u=e.sent,e.abrupt(\"return\",o.map(function(e){return e.syncId?u.shift():e}));case 14:return e.abrupt(\"return\",o);case 15:case\"end\":return e.stop()}},e,this)}),u=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=c.apply(t,n);function s(t){e(a,r,i,s,o,\"next\",t)}function o(t){e(a,r,i,s,o,\"throw\",t)}s(void 0)})},function(e){return u.apply(this,arguments)})},{key:\"_lookupGlobalItem\",value:function(e){var t=this,n=e.key;return this.enableCache&&void 0!==this.cache[n]?this._loadGlobalItem(i({ret:this.cache[n]},e)):this.getItem(n).then(function(n){return t._loadGlobalItem(i({ret:n},e))})}},{key:\"_loadGlobalItem\",value:function(e){var t=e.key,n=e.ret,r=e.autoSync,i=e.syncInBackground,a=e.syncParams;if(null==n){if(r&&this.sync[t])return this.sync[t]({syncParams:a});throw new l(JSON.stringify(e))}\"string\"==typeof n&&(n=JSON.parse(n),this.enableCache&&(this.cache[t]=n));var s=Date.now();if(n.expires<s){if(r&&this.sync[t]){if(i){try{this.sync[t]({syncParams:a,syncInBackground:i})}catch(e){}return n.rawData}return this.sync[t]({syncParams:a,syncInBackground:i})}throw new f(JSON.stringify(e))}return n.rawData}},{key:\"_noItemFound\",value:function(e){var t=e.key,n=e.id,r=e.autoSync,i=e.syncParams;if(this.sync[t])return r?this.sync[t]({id:n,syncParams:i}):{syncId:n};throw new l(JSON.stringify(e))}},{key:\"_loadMapItem\",value:function(e){var t=e.ret,n=e.key,r=e.id,i=e.autoSync,a=e.batched,s=e.syncInBackground,o=e.syncParams;if(null==t)return this._noItemFound(e);if(\"string\"==typeof t){t=JSON.parse(t);var c=e.key,u=e.id,h=this._getId(c,u);this.enableCache&&(this.cache[h]=t)}var l=Date.now();if(t.expires<l){if(i&&this.sync[n]){if(s){try{this.sync[n]({id:r,syncParams:o,syncInBackground:s})}catch(e){}return t.rawData}return this.sync[n]({id:r,syncParams:o,syncInBackground:s})}if(a)return{syncId:r};throw new f(JSON.stringify(e))}return t.rawData}},{key:\"_lookUpInMap\",value:function(e){var t,n=this,r=this._m,a=e.key,s=e.id,o=this._getId(a,s);return this.enableCache&&this.cache[o]?(t=this.cache[o],this._loadMapItem(i({ret:t},e))):void 0!==r[o]?this.getItem(\"map_\"+r[o]).then(function(t){return n._loadMapItem(i({ret:t},e))}):this._noItemFound(i({ret:t},e))}},{key:\"remove\",value:function(e){var t=this;return this._mapPromise.then(function(){var n=t._m,r=e.key,i=e.id;if(void 0===i)return t.enableCache&&t.cache[r]&&delete t.cache[r],t.removeItem(r);var a=t._getId(r,i);if(void 0!==n[a]){t.enableCache&&t.cache[a]&&delete t.cache[a],t._removeIdInKey(r,i);var s=n[a];return delete n[a],t.setItem(\"map\",JSON.stringify(n)),t.removeItem(\"map_\"+s)}})}},{key:\"_removeIdInKey\",value:function(e,t){var n=(this._m.__keys__[e]||[]).indexOf(t);-1!==n&&this._m.__keys__[e].splice(n,1)}},{key:\"load\",value:function(e){var t=this,n=e.key,r=e.id,i=e.autoSync,a=void 0===i||i,s=e.syncInBackground,o=void 0===s||s,c=e.syncParams,u=e.batched;return this._mapPromise.then(function(){return void 0===r?t._lookupGlobalItem({key:n,autoSync:a,syncInBackground:o,syncParams:c}):t._lookUpInMap({key:n,id:r,autoSync:a,syncInBackground:o,batched:u,syncParams:c})})}},{key:\"clearAll\",value:function(){this._s.clear&&this._s.clear(),this._m=this._initMap()}},{key:\"clearMap\",value:function(){var e=this;return this.removeItem(\"map\").then(function(){e.cache={},e._m=e._initMap()})}},{key:\"clearMapForKey\",value:function(e){var t=this;return this._mapPromise.then(function(){var n=(t._m.__keys__[e]||[]).map(function(n){return t.remove({key:e,id:n})});return Promise.all(n)})}},{key:\"getIdsForKey\",value:function(e){var t=this;return this._mapPromise.then(function(){return t._m.__keys__[e]||[]})}},{key:\"getAllDataForKey\",value:function(e,t){var n=this;return t=Object.assign({syncInBackground:!0},t),this.getIdsForKey(e).then(function(r){var i=r.map(function(n){return{key:e,id:n,syncInBackground:t.syncInBackground}});return n.getBatchData(i)})}}])&&n(a.prototype,s),o&&n(a,o),r}());\n//# sourceMappingURL=storage.esm.js.map\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; };\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) });\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: true });\n  defineProperty(\n    GeneratorFunctionPrototype,\n    \"constructor\",\n    { value: GeneratorFunction, configurable: true }\n  );\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    defineProperty(this, \"_invoke\", { value: enqueue });\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(val) {\n    var object = Object(val);\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import StorageManager from \"../../utils/storage\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\nimport { Driver } from \"../../models/drivers\";\nimport { DriverBase } from \"../../models/drivers/interface\";\nimport { Search } from \"../../utils/search\";\n\nexport class Drivers {\n\tstorageManager!: StorageManager;\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\t/**\n\t * Returns a drivers record.\n\t * @returns {Promise<Driver>}\n\t *\n\t * @param {string} driverId - The ID of the driver to retrieve.\n\t * @param {boolean} risk - Whether to include the driver's risk data. Defaults to true\n\t * @param {boolean} address - Whether to include the driver's address data. Defaults to true\n\t * @param {boolean} fleets - Whether to include the driver's fleet data. Defaults to true\n\t * @param {boolean} vehicleCount - Whether to include the driver's vehicle count. Defaults to true\n\t * @param {boolean} distance - Whether to include the driver's distance data. Defaults to true\n\t * @param {boolean} points - Whether to include the driver's points data. Defaults to true\n\t * @param {boolean} files - Whether to include the driver's files data. Defaults to true\n\t * @param {boolean} contact - Whether to include the driver's contact data. Defaults to true\n\t * @param {boolean} occupation - Whether to include the driver's occupation data. Defaults to true\n\t */\n\tasync getDriver({\n\t\tdriverId,\n\t\trisk = true,\n\t\taddress = true,\n\t\tfleets = true,\n\t\tvehicleCount = false,\n\t\tdistance = false,\n\t\tpoints = true,\n\t\tfiles = true,\n\t\tcontact = true,\n\t\toccupation = true,\n\t}: {\n\t\tdriverId: string;\n\t\trisk?: boolean;\n\t\taddress?: boolean;\n\t\tfleets?: boolean;\n\t\tvehicleCount?: boolean;\n\t\tdistance?: boolean;\n\t\tpoints?: boolean;\n\t\tfiles?: boolean;\n\t\tcontact?: boolean;\n\t\toccupation?: boolean;\n\t}) {\n\t\tlet params = {\n\t\t\trisk,\n\t\t\taddress,\n\t\t\tfleets,\n\t\t\tvehicleCount,\n\t\t\tdistance,\n\t\t\tpoints,\n\t\t\tfiles,\n\t\t\tcontact,\n\t\t\toccupation,\n\t\t};\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `drivers/${driverId}`,\n\t\t\tparams,\n\t\t});\n\n\t\tlet instance = new Driver(raw);\n\t\tinstance.api = this.api;\n\n\t\treturn instance;\n\t}\n\n\tasync *listDrivers({\n\t\tisActive,\n\t\tdob,\n\t\temail,\n\t\tfirstName,\n\t\tlastName,\n\t\texternalId,\n\t\tmaxRecords,\n\t}: {\n\t\tisActive?: boolean;\n\t\tdob?: string | Search;\n\t\temail?: string | Search;\n\t\tfirstName?: string | Search;\n\t\tlastName?: string | Search;\n\t\texternalId?: string | Search;\n\t\tmaxRecords?: number;\n\t}): AsyncGenerator<Driver> {\n\t\tlet count = 0;\n\n\t\tlet params = {};\n\t\tdob ? (params = { ...params, dob: String(dob) }) : null;\n\t\temail ? (params = { ...params, email: String(email) }) : null;\n\t\tfirstName ? (params = { ...params, firstName: String(firstName) }) : null;\n\t\tlastName ? (params = { ...params, lastName: String(lastName) }) : null;\n\t\texternalId ? (params = { ...params, externalId: String(externalId) }) : null;\n\t\tisActive ? (params = { ...params, isActive }) : null;\n\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `drivers`,\n\t\t\tparams: params,\n\t\t})) {\n\t\t\tif (maxRecords && count >= maxRecords) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet instance = new Driver(raw);\n\t\t\tinstance.api = this.api;\n\n\t\t\tyield instance;\n\t\t\tcount++;\n\t\t}\n\t}\n\n\tasync createDriver({ driver, password, sendInvite, sendWebhook }: { driver: Driver; password?: string; sendInvite?: boolean; sendWebhook?: boolean }) {\n\t\tif (!password && !sendInvite) {\n\t\t\tthrow new Error(\"You must provide a password if sendInvite is false\");\n\t\t}\n\t\tif (password && sendInvite) {\n\t\t\tthrow new Error(\"You cannot provide a password if sendInvite is true\");\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `drivers`,\n\t\t\tdata: {\n\t\t\t\t...driver,\n\t\t\t\tpassword,\n\t\t\t},\n\t\t\tparams: {\n\t\t\t\twebhook: sendWebhook ? \"true\" : \"false\",\n\t\t\t\tinvite: sendInvite ? \"true\" : \"false\",\n\t\t\t},\n\t\t});\n\n\t\tlet instance = new Driver(raw);\n\t\tinstance.api = this.api;\n\n\t\treturn instance;\n\t}\n}\n","import { Drivers } from \"./core\";\n\nexport default Drivers;","import StorageManager from \"../../utils/storage\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\nimport { Fleet } from \"../../models/fleets\";\n\nexport class Fleets {\n\tstorageManager!: StorageManager;\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tasync getFleet({ fleetId, query }: { fleetId: string; query: object }) {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `fleets/${fleetId}`,\n\t\t\tparams: query,\n\t\t});\n\n\t\tlet instance = new Fleet(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n\n\tasync *listFleets({ maxRecords }: { maxRecords: number }): AsyncGenerator<Fleet, void, unknown> {\n\t\tlet count = 0;\n\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `fleets`,\n\t\t})) {\n\t\t\tif (maxRecords && count >= maxRecords) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet instance = new Fleet(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t\tcount++;\n\t\t}\n\t}\n\n\tasync createFleet({ fleet }: { fleet: Fleet }) {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `fleets`,\n\t\t\tparams: fleet,\n\t\t});\n\n\t\tlet instance = new Fleet(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n}\n","import { Fleets } from \"./core\";\n\nexport default Fleets;","import StorageManager from \"../../utils/storage\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\nimport { DriverVehicle } from \"../../models/vehicles/drv\";\nimport { Vehicle } from \"../../models/vehicles/rv\";\nimport { Driver } from \"../../models/drivers\";\nimport { DriverBase } from \"../../models/drivers/interface\";\nimport { DriverRegisteredVehicleBase } from \"../../models/vehicles/drv/interface\";\nimport { Search } from \"../../utils/search\";\nimport { VehicleType } from \"../../models/vehicles/v\";\n\nexport class Vehicles {\n\tstorageManager!: StorageManager;\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tasync getVehicle({\n\t\tvehicleId,\n\t\tincludeTranslations = true,\n\t\tincludeDistance = true,\n\t\tincludeDrvCount = true,\n\t}: {\n\t\tvehicleId: string;\n\t\tincludeTranslations?: boolean;\n\t\tincludeDistance?: boolean;\n\t\tincludeDrvCount?: boolean;\n\t}) {\n\t\tlet params = {\n\t\t\tdrv: true,\n\t\t\ttrns: includeTranslations,\n\t\t\tdistance3m: includeDistance,\n\t\t\ttotalDrvCount: includeDrvCount,\n\t\t};\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `registered-vehicles/${vehicleId}`,\n\t\t\tparams,\n\t\t});\n\n\t\tlet instance = new Vehicle(raw);\n\t\tinstance.api = this.api;\n\n\t\treturn instance;\n\t}\n\n\tasync *listVehicles({\n\t\tisActive,\n\t\tisApproved,\n\t\tregPlate,\n\t\tvin,\n\t\tsourceId,\n\t\texternalId,\n\t\tfullResponse,\n\t\tmaxRecords,\n\t}: {\n\t\tisActive?: boolean;\n\t\tisApproved?: boolean;\n\t\tregPlate?: string | Search;\n\t\tvin?: string | Search;\n\t\tsourceId?: string | Search;\n\t\texternalId?: string | Search;\n\t\tfullResponse?: string;\n\t\tmaxRecords?: number;\n\t}): AsyncGenerator<Vehicle, void, unknown> {\n\t\tlet count = 0;\n\n\t\tlet params = {};\n\n\t\tisActive ? (params = { ...params, isActive: isActive }) : null;\n\t\tisApproved ? (params = { ...params, isApproved: isApproved }) : null;\n\t\tvin ? (params = { ...params, vin: String(vin) }) : null;\n\t\tregPlate ? (params = { ...params, regPlate: String(regPlate) }) : null;\n\t\tsourceId ? (params = { ...params, sourceId: String(sourceId) }) : null;\n\t\texternalId ? (params = { ...params, externalId: String(externalId) }) : null;\n\t\tfullResponse ? (params = { ...params, full: fullResponse ? \"true\" : \"false\" }) : null;\n\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `registered-vehicles`,\n\t\t\tparams: params,\n\t\t})) {\n\t\t\tif (maxRecords && count >= maxRecords) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet instance = new Vehicle(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t\tcount++;\n\t\t}\n\t}\n\n\tasync createVehicle({ vehicle, driverId, drv, sendWebhook = true }: { vehicle: Vehicle; driverId?: string; drv?: DriverVehicle; sendWebhook?: boolean }) {\n\t\tif (!driverId && drv) {\n\t\t\tthrow new Error(\"You must provide a driverId if drv is provided\");\n\t\t}\n\n\t\tif (!vehicle.vehicle) {\n\t\t\tthrow new Error(\"You must provide a vehicleType\");\n\t\t}\n\n\t\tif (!vehicle.vehicle?.id) {\n\t\t\tthrow new Error(\"Vehicle Type ID is required\");\n\t\t}\n\n\t\tlet data = {\n\t\t\t...vehicle,\n\t\t\tvehicleId: vehicle.vehicle.id,\n\t\t};\n\n\t\tdelete data.vehicle;\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `registered-vehicles`,\n\t\t\tdata: data,\n\t\t\tparams: {\n\t\t\t\twebhook: sendWebhook ? \"true\" : \"false\",\n\t\t\t},\n\t\t});\n\n\t\tlet rv = new Vehicle(raw);\n\t\trv.api = this.api;\n\n\t\ttry {\n\t\t\tif (driverId) {\n\t\t\t\tif (!drv) {\n\t\t\t\t\tawait rv.addDriver({\n\t\t\t\t\t\tdriverId,\n\t\t\t\t\t\tdisplayName: vehicle.getDisplay(),\n\t\t\t\t\t\tisOwner: true,\n\t\t\t\t\t\tisPrimaryDriver: true,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tawait rv.addDrv({\n\t\t\t\t\t\tdriverId,\n\t\t\t\t\t\tdrv,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\t// await rv.delete();\n\t\t\tthrow e;\n\t\t}\n\n\t\treturn rv;\n\t}\n\n\tasync *listVehicleTypes({\n\t\tbrand,\n\t\tmodel,\n\t\tvehicleName,\n\t\tyear,\n\t\texternalId,\n\t\tsourceId,\n\t\tisActive = true,\n\t\tinternalFields,\n\t\tmaxRecords,\n\t}: {\n\t\tbrand?: string | Search;\n\t\tmodel?: string | Search;\n\t\tvehicleName?: string | Search;\n\t\tyear?: string | number | Search;\n\t\texternalId?: string | Search;\n\t\tsourceId?: string | Search;\n\t\tisActive?: boolean;\n\t\tinternalFields?: boolean;\n\t\tmaxRecords?: number;\n\t}) {\n\t\tlet count = 0;\n\n\t\tlet params = {};\n\n\t\tbrand ? (params = { ...params, brand: String(brand) }) : null;\n\t\tmodel ? (params = { ...params, model: String(model) }) : null;\n\t\tvehicleName ? (params = { ...params, vehicleName: String(vehicleName) }) : null;\n\t\tyear ? (params = { ...params, year: String(year) }) : null;\n\t\texternalId ? (params = { ...params, externalId: String(externalId) }) : null;\n\t\tsourceId ? (params = { ...params, sourceId: String(sourceId) }) : null;\n\t\tisActive ? (params = { ...params, isActive: isActive }) : null;\n\t\tinternalFields ? (params = { ...params, internalFields: internalFields }) : null;\n\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `vehicles`,\n\t\t\tparams: params,\n\t\t})) {\n\t\t\tif (maxRecords && count >= maxRecords) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet instance = new VehicleType(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t\tcount++;\n\t\t}\n\t}\n\n\tasync createVehicleType({ vehicleType, sendWebhook }: { vehicleType: VehicleType; sendWebhook?: boolean }) {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `vehicles`,\n\t\t\tdata: vehicleType,\n\t\t\tparams: {\n\t\t\t\twebhook: sendWebhook ? \"true\" : \"false\",\n\t\t\t},\n\t\t});\n\n\t\tlet instance = new VehicleType(raw);\n\t\tinstance.api = this.api;\n\n\t\treturn instance;\n\t}\n}\n","import { Vehicles } from \"./core\";\n\nexport default Vehicles;","import \"regenerator-runtime/runtime\";\nimport { APIHandlerNoAuth, APIHandlerAuth } from \"./utils/api\";\nimport StorageManager from \"./utils/storage\";\nimport Auth from \"./utils/auth\";\nimport { applyMixins } from \"./utils/helpers\";\nimport Drivers from \"./classes/drivers\";\nimport Vehicles from \"./classes/vehicles\";\nimport Fleets from \"./classes/fleets\";\nimport { OrgSettings } from \"./utils/api/org\";\nimport { Search } from \"./utils/search\";\nimport models from \"./models\";\n\n/**\n * Entry point for the SDK to interact with the Inaza API.\n * @break\n *\n * ##  Help\n * -  [Documentation](https://motor-sdk-docs.vercel.app/js)\n *\n * ##  Submodules\n * - [Drivers](https://motor-sdk-docs.vercel.app/js/classes/drivers)\n * - [Vehicles](https://motor-sdk-docs.vercel.app/js/classes/vehicles)\n * - [Fleets](https://motor-sdk-docs.vercel.app/js/classes/fleets)\n * @break\n *\n * ##  Installation\n * `npm install @inaza/motorJS`\n *\n * ##  Usage\n * ```js\n * // Import the motorJS object from the package\n * import motorJS from \"motorJS\";\n *\n * // Optional - Import AsyncStorage if you are using the MotorJS sdk in a react native project.\n * import AsyncStorage from \"@react-native-async-storage/async-storage\";\n *\n * // Initialise Auth\n * let auth = new motorJS.Auth({\n * \torgId: \"your-org-id\",\n * \tregion: \"your-region\",\n * \temail: \"some-user@org.com\",\n * \tpassword: \"$tr0ngP@ssw0rd\",\n * \taccountType: \"user/driver\",\n * });\n *\n * // Login\n * auth.login().then((res) => {\n * \tconsole.log(res);\n * });\n *\n * // Initialise the Motor SDK and pass the Auth object\n * let motor = new motorJS.Motor({\n * \torgId: \"your-org-id\",\n * \tregion: \"your-region\",\n * \t// Pass AsyncStorage for react-native.\n * \t// Else for any web-based project that runs in a browser, pass window.localStorage. eg. storage: window.localStorage\n * \t// You can keep this as null, however data such as bearerToken and refershToken will not be persisted when application is closed and re-opened.\n * \tstorage: AsyncStorage,\n * \t// Pass the auth instance\n * \tauth: auth,\n * });\n *\n * motor.orgSettings().then((res) => {\n * \tconsole.log(res);\n * });\n *\n * motor\n * \t.getDriver({\n * \t\tdriverId: env.testing.driverId1,\n * \t})\n * \t.then((driver) => {\n * \t\tconsole.log(driver.fullName());\n * \t});\n * ```\n *\n */\n\nclass Motor {\n\tstatic myInstance: Motor;\n\torgId: string;\n\tregion: string;\n\turl?: string;\n\tauth?: Auth;\n\tstorageManager: StorageManager;\n\tapi: APIHandlerNoAuth | APIHandlerAuth;\n\n\t/**\n\t * Initialise Motor and return an instance of the Motor class.\n\t *\n\t * @param {Object} obj - An object.\n\t * @param {string} obj.orgId - Your organisation ID.\n\t * @param {string} obj.region - Your region. eg. us, eu, au.\n\t * @param {string} obj.url - Optional. The base url of the API.\n\t * @param {string} obj.auth - Optional. An instance of the Auth class.\n\t * @param {string} obj.storage - Optional. Your storage. eg. window.localStorage, AsyncStorage.\n\t * @returns {Motor}\n\t */\n\tconstructor({ orgId, region, url, auth, storage = null }: { orgId: string; region: string; url?: string; auth?: Auth; storage?: any }) {\n\t\tStorageManager.createStorage(storage);\n\t\tthis.orgId = orgId;\n\t\tthis.region = region;\n\t\tthis.url = url;\n\t\tthis.storageManager = StorageManager.getInstance();\n\t\tthis.auth = auth;\n\n\t\tif (this.auth) {\n\t\t\tthis.api = new APIHandlerAuth({\n\t\t\t\torgId: this.orgId,\n\t\t\t\tregion: this.region,\n\t\t\t\turl: this.url,\n\t\t\t\tauth: this.auth,\n\t\t\t});\n\t\t} else {\n\t\t\tthis.api = new APIHandlerNoAuth({\n\t\t\t\torgId: this.orgId,\n\t\t\t\tregion: this.region,\n\t\t\t\turl: this.url,\n\t\t\t});\n\t\t}\n\t}\n\n\tasync orgSettings(): Promise<OrgSettings | undefined> {\n\t\tif (!this.api.orgData) {\n\t\t\tawait this.api.refreshOrgData();\n\t\t}\n\n\t\treturn this.api.orgData;\n\t}\n\n\tasync language(): Promise<string | undefined> {\n\t\tif (this.api.orgData) {\n\t\t\treturn this.api.orgData.defaultLang;\n\t\t}\n\t\tlet orgData = await this.orgSettings();\n\t\treturn orgData?.defaultLang;\n\t}\n\n\tasync orgName(): Promise<string | undefined> {\n\t\tif (this.api.orgData) {\n\t\t\treturn this.api.orgData.displayName;\n\t\t}\n\t\tlet orgData = await this.orgSettings();\n\t\treturn orgData?.displayName;\n\t}\n\n\tasync request({ method, path, params, data }: { method: string; path?: string; params?: object; data?: any }) {\n\t\treturn await this.api.request({\n\t\t\tmethod,\n\t\t\tendpoint: path,\n\t\t\tparams,\n\t\t\tdata,\n\t\t});\n\t}\n}\n\ninterface Motor extends Drivers, Vehicles, Fleets {}\napplyMixins(Motor, [Drivers, Vehicles, Fleets]);\n\nlet motorJS = {\n\tMotor,\n\tAuth,\n\tSearch,\n\tmodels,\n};\n\n// For webpack\nFunction(\"r\", \"motorJS = r\")(motorJS);\n\nexport default motorJS;\n","import { BillingAccountBase, CardBase } from \"./interface\";\nimport { DriverBase } from \"../../drivers/interface\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\n\nexport class BillingAccount {\n\tapi?: APIHandlerAuth | APIHandlerNoAuth;\n\tadrLine1?: string;\n\tadrLine2?: string;\n\tadrLine3?: string;\n\tcounty?: string;\n\tprovince?: string;\n\tpostcode?: string;\n\texternalId?: string;\n\tadrSameAsHome?: boolean;\n\texpiry?: Date;\n\tupdatedAt?: Date;\n\tisActive?: boolean;\n\tisPrimary?: boolean;\n\tthirdPartyId?: string;\n\tcard?: CardBase;\n\tid?: string;\n\tcreatedAt?: Date;\n\tcountryIsoCode?: string;\n\tcurrencyIsoCode?: string;\n\taccountType?: string;\n\tdriver?: DriverBase;\n\n\tconstructor(billingAccount: BillingAccountBase) {\n\t\tObject.assign(this, billingAccount);\n\t}\n\n\tgetDisplay(): string {\n\t\tif (!this.card) {\n\t\t\treturn \"Unknown\";\n\t\t}\n\t\treturn `${this.isPrimary ? \"Primary \" : \"\"}${this.card.name} - ${this.card.lastFour}`;\n\t}\n}\n","import { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\nimport { BillingAccountBase } from \"../accounts/interface\";\nimport { BillingEventBase } from \"./interface\";\n\nconst billingEventStatus = [\"pending\", \"paid\", \"failed\", \"cancelled\", \"refunded\"];\n\nexport class BillingEvent {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\texternalId?: string;\n\tpaymentId?: string;\n\tamount?: number;\n\tmessage?: string;\n\tpaymentOut?: boolean;\n\tpaymentDate?: Date;\n\tstatus?: string;\n\tapprovalAt?: Date;\n\tpolicyId?: string;\n\ttype?: string;\n\tid?: string;\n\tcreatedAt?: Date;\n\tbillingAccount?: BillingAccountBase;\n\tapprovalBy?: string;\n\n\tconstructor(billingEvent: BillingEventBase) {\n\t\tObject.assign(this, billingEvent);\n\t}\n\n\tgetCurrency(): string | undefined {\n\t\tif (!this.billingAccount) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.billingAccount.currencyIsoCode;\n\t}\n\n\tisApproved(): boolean {\n\t\treturn this.approvalAt ? true : false;\n\t}\n\n\tupdate(data: Object) {\n\t\tthis.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `billing-events/${this.id}`,\n\t\t\tdata: data,\n\t\t});\n\t}\n\n\tupdateStatus({ status, paymentId }: { status: string; paymentId?: string }) {\n\t\t// Check if staus is one of billingEventStatus\n\t\tif (!billingEventStatus.includes(status)) {\n\t\t\tthrow new Error(`Invalid status: ${status} - can only be one of ${billingEventStatus.join(\", \")}`);\n\t\t}\n\n\t\tlet data = {};\n\n\t\tdata = {\n\t\t\tstatus: status,\n\t\t};\n\n\t\tif (paymentId) {\n\t\t\tdata = {\n\t\t\t\t...data,\n\t\t\t\tpaymentId: paymentId,\n\t\t\t};\n\t\t}\n\n\t\tthis.update(data);\n\n\t\tthis.status = status;\n\t}\n}\n","import { APIHandlerAuth, APIHandlerNoAuth } from \"../utils/api\";\nimport { deleteFromObject } from \"../utils/helpers\";\n\nexport class PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tasync _update({\n\t\tpersist,\n\t\tendpoint,\n\t\tfields,\n\t\texclude,\n\t\tparams,\n\t}: {\n\t\tpersist?: boolean;\n\t\tendpoint?: string;\n\t\tfields?: Object;\n\t\texclude?: string[];\n\t\tparams?: Object;\n\t}): Promise<void> {\n\t\tif (!fields) {\n\t\t\treturn;\n\t\t}\n\t\t// Update the instance\n\t\tObject.assign(this, {\n\t\t\t...this,\n\t\t\t...fields,\n\t\t});\n\t\tif (persist && endpoint) {\n\t\t\tawait this._save({ endpoint, fields, exclude, params });\n\t\t}\n\t}\n\n\tasync _save({ endpoint, fields, exclude = [], params }: { endpoint: string; fields?: Object; exclude?: string[]; params?: Object }) {\n\t\tif (!this.api) {\n\t\t\tthrow new Error(\"APIHandler not initialised\");\n\t\t}\n\t\tlet body = null;\n\t\tif (!fields) {\n\t\t\tbody = {\n\t\t\t\t...this,\n\t\t\t};\n\t\t\texclude = exclude.concat([\"api\", \"id\", \"createdAt\"]);\n\n\t\t\tfor (let field of exclude) {\n\t\t\t\tdeleteFromObject(field, body);\n\t\t\t}\n\t\t} else {\n\t\t\tbody = {\n\t\t\t\t...fields,\n\t\t\t};\n\t\t}\n\n\t\tif (!fields) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: endpoint,\n\t\t\tparams: params,\n\t\t\tdata: body,\n\t\t});\n\t}\n}\n","import { DriverBase, Occupation } from \"./interface\";\nimport { FleetsBase } from \"../fleets/interface\";\nimport { RiskBase } from \"../risk/interface\";\nimport { PolicyBase } from \"../policy/interface\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\nimport { PrivateApiHandler } from \"../custom\";\nimport { Vehicle } from \"../vehicles/rv\";\nimport { BillingAccount } from \"../billing/accounts\";\nimport { DriverVehicle } from \"../vehicles/drv\";\nimport { Policy } from \"../policy\";\nimport { BillingEvent } from \"../billing/events\";\n\nexport class Driver extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tadrLine1?: string;\n\tadrLine2?: string;\n\tadrLine3?: string;\n\tcounty?: string;\n\tprovince?: string;\n\tpostcode?: string;\n\texternalId?: string;\n\tlang?: string;\n\tfirstName?: string;\n\tmiddleName?: string;\n\tlastName?: string;\n\tapprovedAt?: Date;\n\tdriverActivated?: boolean;\n\tactivatedAt?: Date;\n\tdob?: Date;\n\tisApproved?: boolean;\n\tisActive?: boolean;\n\tgender?: string;\n\ttelE164?: string;\n\tdrivingStartDate?: Date;\n\tcountryIsoCode?: string;\n\toccupation?: Occupation;\n\tid?: string;\n\tsourceId?: string;\n\temail?: string;\n\tcreatedAt?: Date;\n\tcountryName?: string;\n\tdriversLicenseLoc?: string;\n\tproofOfAddressLoc?: string;\n\tidLoc?: string;\n\tprofilePicLoc?: string;\n\tfleets?: FleetsBase[];\n\tvehicleCount?: number;\n\ttotalPoints?: number;\n\tdistanceKm30Days?: number;\n\trisk?: RiskBase;\n\tpolicies?: PolicyBase[];\n\n\tconstructor(driver: DriverBase) {\n\t\tsuper();\n\t\tObject.assign(this, driver);\n\t}\n\n\tprivate _checkId() {\n\t\tif (!this.id) {\n\t\t\tthrow new Error(\"ID must be set\");\n\t\t}\n\t}\n\n\tfullName() {\n\t\treturn `${this.firstName} ${this.lastName}`;\n\t}\n\n\t// Refresh all the properties of this class\n\tasync refresh() {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `drivers/${this.id}`,\n\t\t\tparams: {\n\t\t\t\trisk: true,\n\t\t\t\taddress: true,\n\t\t\t\tfleets: true,\n\t\t\t\tvehicleCount: true,\n\t\t\t\tdistance: true,\n\t\t\t\tpoints: true,\n\t\t\t\tfiles: true,\n\t\t\t\tcontact: true,\n\t\t\t\toccupation: true,\n\t\t\t},\n\t\t});\n\n\t\traw.api = this.api;\n\t\tObject.assign(this, raw);\n\t}\n\n\tasync delete() {\n\t\tthis._checkId();\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `drivers/${this.id}`,\n\t\t});\n\t}\n\n\tasync save(fields: Object = {}) {\n\t\tthis._checkId();\n\n\t\tawait this._save({\n\t\t\tendpoint: `drivers/${this.id}`,\n\t\t\tfields: fields,\n\t\t\texclude: [\"fleets\", \"createdAt\"],\n\t\t});\n\t}\n\n\tasync update({ persist = false, fields = {} }: { persist?: boolean; fields?: Object }) {\n\t\tawait this._update({\n\t\t\tendpoint: `drivers/${this.id}`,\n\t\t\tpersist: persist,\n\t\t\tfields: fields,\n\t\t\texclude: [\"fleets\", \"createdAt\"],\n\t\t});\n\t}\n\n\tasync listVehicles(): Promise<Vehicle[]> {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `drivers/${this.id}/vehicles`,\n\t\t});\n\t\treturn raw.map((vehicle: any) => {\n\t\t\tlet instance = new DriverVehicle(vehicle);\n\t\t\tinstance.api = this.api;\n\t\t\treturn instance;\n\t\t});\n\t}\n\n\tgetDisplay() {\n\t\treturn this.fullName();\n\t}\n\n\ttelematicsId() {\n\t\treturn this.sourceId;\n\t}\n\n\tasync listBillingAccounts(primaryOnly: boolean = false): Promise<BillingAccount[]> {\n\t\tthis._checkId();\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `drivers/${this.id}/billing-accounts`,\n\t\t});\n\n\t\treturn raw.map((billingAccount: any) => {\n\t\t\tlet instance = new BillingAccount(billingAccount);\n\t\t\tinstance.api = this.api;\n\t\t\treturn instance;\n\t\t});\n\t}\n\n\tasync getBillingAccount({ id }: { id: string }) {\n\t\tthis._checkId();\n\n\t\tif (!id) {\n\t\t\tthrow new Error(\"Billing account id is required\");\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `drivers/${this.id}/billing-accounts/${id}`,\n\t\t});\n\n\t\tlet instance = new BillingAccount(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n\n\tasync listVehiclePolicies({ vehicleId }: { vehicleId?: string }): Promise<Policy[]> {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `policy`,\n\t\t\tparams: {\n\t\t\t\tdrvIds: vehicleId,\n\t\t\t},\n\t\t});\n\n\t\treturn raw.map((policy: any) => {\n\t\t\tlet instance = new Policy(policy);\n\t\t\tinstance.api = this.api;\n\t\t\treturn instance;\n\t\t});\n\t}\n\n\tasync getPrimaryBillingAccount() {\n\t\tlet res = await this.listBillingAccounts(true);\n\n\t\tif (res.length > 0 && res[0].id) {\n\t\t\treturn await this.getBillingAccount({ id: res[0].id });\n\t\t}\n\t}\n\n\tasync createBillingAccount({ account }: { account: BillingAccount }) {\n\t\tthis._checkId();\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `drivers/${this.id}/billing-accounts`,\n\t\t\tparams: account,\n\t\t});\n\n\t\tlet instance = new BillingAccount(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n\n\tasync charge({ amount, event }: { amount?: number; event?: BillingEvent }) {\n\t\tif (!amount && !event) {\n\t\t\tthrow new Error(\"Either amount or event is required\");\n\t\t}\n\n\t\tif (!event) {\n\t\t\tevent = new BillingEvent({\n\t\t\t\tamount: amount,\n\t\t\t\tmessage: \"Charge\",\n\t\t\t\ttype: \"other\",\n\t\t\t});\n\t\t}\n\n\t\tthis._checkId();\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `drivers/${this.id}/billing-events`,\n\t\t\tparams: event,\n\t\t});\n\n\t\tlet instance = new BillingEvent(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n\n\tasync *listCharges({ eventType, eventStatus, maxRecords }: { eventType?: string; eventStatus?: string; maxRecords?: number }) {\n\t\tthis._checkId();\n\t\tlet params: any = {};\n\t\tif (eventType) {\n\t\t\tparams.type = eventType;\n\t\t}\n\t\tif (eventStatus) {\n\t\t\tparams.status = eventStatus;\n\t\t}\n\n\t\tlet count = 0;\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `drivers/${this.id}/billing-events`,\n\t\t\tparams: params,\n\t\t})) {\n\t\t\tif (maxRecords && count >= maxRecords) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet instance = new BillingEvent(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t\tcount += 1;\n\t\t}\n\t}\n\n\tasync *listPolicies({ looseMatch = true, isActivePolicy }: { looseMatch?: boolean; isActivePolicy?: boolean }): AsyncGenerator<Policy> {\n\t\tlet params: any = {};\n\n\t\tparams.driverIds = this.id;\n\t\tparams.driverLooseMatch = looseMatch;\n\n\t\tif (isActivePolicy) {\n\t\t\tparams.isActivePolicy = isActivePolicy;\n\t\t}\n\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `policy`,\n\t\t\tparams: params,\n\t\t})) {\n\t\t\tlet instance = new Policy(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t}\n\t}\n\n\tasync createPolicy({ policy }: { policy?: Policy }) {\n\t\tif (!policy) {\n\t\t\tpolicy = new Policy({\n\t\t\t\tpolicyGroup: \"d\",\n\t\t\t});\n\t\t}\n\t\tpolicy.api = this.api;\n\t\treturn await policy.create({\n\t\t\tapi: this.api as APIHandlerAuth,\n\t\t\trecordId: this.id!,\n\t\t});\n\t}\n}\n","import { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\nimport { PrivateApiHandler } from \"../../custom\";\nimport { Driver } from \"../../drivers\";\nimport { DriverBase } from \"../../drivers/interface\";\nimport { Vehicle } from \"../../vehicles/rv\";\nimport { RegisteredVehicleBase } from \"../../vehicles/rv/interface\";\nimport { FleetDriverVehicleAssignementBase } from \"./interface\";\n\nexport class FleetDriverVehicleAssignment extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tisActive?: boolean;\n\texpiresAt?: Date;\n\tcreatedAt?: Date;\n\tsourceId?: string;\n\tassigned?: boolean;\n\tdriver?: Driver;\n\tregisteredVehicle?: Vehicle;\n\tconstructor(assignment: FleetDriverVehicleAssignementBase) {\n\t\tsuper();\n\t\tObject.assign(this, assignment);\n\t}\n\n\tid() {\n\t\treturn [this.driver?.id, this.registeredVehicle?.id];\n\t}\n\n\ttelemaicsId() {\n\t\treturn this.sourceId;\n\t}\n}\n","import { Fleet } from \"..\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\nimport { PrivateApiHandler } from \"../../custom\";\nimport { Driver } from \"../../drivers\";\nimport { FleetsBase } from \"../interface\";\nimport { FleetDriverBase } from \"./interface\";\n\nexport class FleetDriver extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tfleetId?: string;\n\n\tisVehicleManager?: boolean;\n\tisDriverManager?: boolean;\n\tisBillingManager?: boolean;\n\tisActive?: boolean;\n\texpiresAt?: Date;\n\tcreatedAt?: Date;\n\tsourceId?: string;\n\tdriver?: Driver;\n\n\tconstructor(assignment: FleetDriverBase) {\n\t\tsuper();\n\t\tObject.assign(this, assignment);\n\t}\n\n\tid() {\n\t\treturn this.driver?.id;\n\t}\n\n\tfullName() {\n\t\treturn this.driver?.fullName();\n\t}\n\n\ttelemaicsId() {\n\t\treturn this.sourceId;\n\t}\n\n\tasync getFleet(): Promise<Fleet | null> {\n\t\tif (!this.fleetId) {\n\t\t\treturn null;\n\t\t}\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `fleets/${this.fleetId}`,\n\t\t});\n\n\t\tlet instance = new Fleet(raw);\n\n\t\tif (this.api) {\n\t\t\tinstance.api = this.api;\n\t\t}\n\t\treturn instance;\n\t}\n}\n","import { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\nimport { PrivateApiHandler } from \"../custom\";\nimport { Policy } from \"../policy\";\nimport { RiskBase } from \"../risk/interface\";\nimport { LANG } from \"../types\";\nimport { FleetDriverVehicleAssignment } from \"./assigned\";\nimport { FleetDriver } from \"./drivers\";\nimport { FleetsBase } from \"./interface\";\nimport { FleetVehicle } from \"./vehicles\";\n\nexport class Fleet extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tapiPath?: string;\n\texternalId?: string;\n\tdisplay?: string;\n\tdescription?: string;\n\ttags?: string;\n\tisActive?: boolean;\n\trequiresDriverAssignment?: boolean;\n\tbasePremiumBillingProc?: string;\n\tratesBillingProc?: string;\n\tparentId?: string;\n\tid?: string;\n\tcreatedAt?: Date;\n\ttranslations?: Object;\n\trisk?: RiskBase;\n\tvehicleCount?: number;\n\tdriverCount?: number;\n\n\tconstructor(fleet: FleetsBase) {\n\t\tsuper();\n\t\tObject.assign(this, fleet);\n\t}\n\n\tprivate getTranslations({ key, lang }: { key: string; lang: string }) {\n\t\tif (!lang) {\n\t\t\treturn this[key as keyof FleetsBase];\n\t\t}\n\n\t\tif (!LANG.includes(lang)) {\n\t\t\tthrow new Error(`${lang} is not a valid language code`);\n\t\t}\n\n\t\tconst val = (this.translations as any)?.[key]?.[lang];\n\n\t\tif (val) {\n\t\t\treturn val;\n\t\t}\n\n\t\treturn this[key as keyof FleetsBase];\n\t}\n\n\tgetDisplay({ lang }: { lang: string }) {\n\t\treturn this.getTranslations({ key: \"display\", lang });\n\t}\n\n\tgetDescription({ lang }: { lang: string }) {\n\t\treturn this.getTranslations({ key: \"description\", lang });\n\t}\n\n\thasParent() {\n\t\treturn !!this.parentId;\n\t}\n\n\tgetTags() {\n\t\treturn this.tags?.split(\",\") || [];\n\t}\n\n\tprivate checkId() {\n\t\tif (!this.id) {\n\t\t\tthrow new Error(\"Fleet ID is required\");\n\t\t}\n\t}\n\n\tasync refresh() {\n\t\tthis.checkId();\n\t\tconst fleet = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `/fleets/${this.id}`,\n\t\t});\n\t\tObject.assign(this, fleet);\n\t}\n\n\tasync delete() {\n\t\tthis.checkId();\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `/fleets/${this.id}`,\n\t\t});\n\t}\n\n\tasync save(fields: Object = {}) {\n\t\tthis.checkId();\n\t\treturn await this._save({\n\t\t\tendpoint: `/fleets/${this.id}`,\n\t\t\tfields,\n\t\t\texclude: [\"vehicleType\"],\n\t\t});\n\t}\n\n\tasync update({ persist, fields }: { persist?: boolean; fields?: Object }) {\n\t\tif (persist) {\n\t\t\treturn await this.save(fields);\n\t\t}\n\n\t\treturn await this._update({ fields });\n\t}\n\n\tasync getParent() {\n\t\tif (!this.hasParent()) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `/fleets/${this.parentId}`,\n\t\t});\n\n\t\tlet instance = new Fleet(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n\n\t/**\n\t * Driver operations\n\t */\n\n\tasync addDriver({\n\t\tdriverId,\n\t\tisVehicleManager = false,\n\t\tisDriverManager = false,\n\t\tisBillingManager = false,\n\t\texpiresAt,\n\t\tisActive = true,\n\t\tvehicleIds,\n\t\tvehicleExpiresAt,\n\t}: {\n\t\tdriverId: string;\n\t\tisVehicleManager?: boolean;\n\t\tisDriverManager?: boolean;\n\t\tisBillingManager?: boolean;\n\t\texpiresAt?: Date;\n\t\tisActive?: boolean;\n\t\tvehicleIds?: string[];\n\t\tvehicleExpiresAt?: Date[] | Date;\n\t}) {\n\t\tif (!vehicleIds) {\n\t\t\tvehicleIds = [];\n\t\t}\n\n\t\tlet data: any = {\n\t\t\tdriverId,\n\t\t\tisVehicleManager,\n\t\t\tisDriverManager,\n\t\t\tisBillingManager,\n\t\t\tisActive,\n\t\t};\n\t\tif (expiresAt?.toISOString()) {\n\t\t\tdata.expiresAt = expiresAt.toISOString();\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers`,\n\t\t\tdata,\n\t\t});\n\n\t\tlet fleetDriver = new FleetDriver(raw);\n\t\tfleetDriver.api = this.api;\n\n\t\tif (!vehicleIds.length) {\n\t\t\treturn fleetDriver;\n\t\t}\n\n\t\ttry {\n\t\t\t//loop throught vehicleIds\n\t\t\tif (vehicleExpiresAt instanceof Date || !vehicleExpiresAt) {\n\t\t\t\tfor (let vehicleId of vehicleIds) {\n\t\t\t\t\tlet data: any = {};\n\t\t\t\t\tif (vehicleExpiresAt?.toISOString()) {\n\t\t\t\t\t\tdata.expiresAt = vehicleExpiresAt.toISOString();\n\t\t\t\t\t}\n\t\t\t\t\tawait this.api.request({\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}/vehicles/${vehicleId}`,\n\t\t\t\t\t\tdata: data,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn fleetDriver;\n\t\t\t}\n\n\t\t\tvehicleIds.forEach(async (vehicleId, index) => {\n\t\t\t\tlet data: any = {};\n\t\t\t\tif (vehicleExpiresAt[index]?.toISOString()) {\n\t\t\t\t\tdata.expiresAt = vehicleExpiresAt[index].toISOString();\n\t\t\t\t}\n\n\t\t\t\tawait this.api.request({\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}/vehicles/${vehicleId}`,\n\t\t\t\t\tdata: data,\n\t\t\t\t});\n\t\t\t});\n\t\t} catch (e) {\n\t\t\t//if error, remove driver\n\t\t\tawait this.api.request({\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}`,\n\t\t\t});\n\t\t\tthrow e;\n\t\t}\n\t\treturn fleetDriver;\n\t}\n\n\tasync removeDriver({ driverId }: { driverId: string }) {\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}`,\n\t\t});\n\t}\n\n\tasync getDriver() {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers`,\n\t\t});\n\n\t\tlet fleetDriver = new FleetDriver(raw);\n\t\tfleetDriver.api = this.api;\n\t\treturn fleetDriver;\n\t}\n\n\tasync updateDriver({\n\t\tdriverId,\n\t\tisVehicleManager,\n\t\tisDriverManager,\n\t\tisBillingManager,\n\t\texpiresAt,\n\t\tisActive,\n\t}: {\n\t\tdriverId: string;\n\t\tisVehicleManager?: boolean;\n\t\tisDriverManager?: boolean;\n\t\tisBillingManager?: boolean;\n\t\texpiresAt?: Date;\n\t\tisActive?: boolean;\n\t}) {\n\t\tlet data: any = {};\n\t\tif (isVehicleManager !== undefined) {\n\t\t\tdata.isVehicleManager = isVehicleManager;\n\t\t}\n\t\tif (isDriverManager !== undefined) {\n\t\t\tdata.isDriverManager = isDriverManager;\n\t\t}\n\t\tif (isBillingManager !== undefined) {\n\t\t\tdata.isBillingManager = isBillingManager;\n\t\t}\n\t\tif (expiresAt?.toISOString()) {\n\t\t\tdata.expiresAt = expiresAt.toISOString();\n\t\t}\n\t\tif (isActive !== undefined) {\n\t\t\tdata.isActive = isActive;\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}`,\n\t\t\tdata,\n\t\t});\n\n\t\tlet fleetDriver = new FleetDriver(raw);\n\t\tfleetDriver.api = this.api;\n\t\treturn fleetDriver;\n\t}\n\n\tasync *listDrivers(): AsyncIterableIterator<FleetDriver> {\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `/fleets/${this.id}/drivers`,\n\t\t})) {\n\t\t\tlet fleetDriver = new FleetDriver(raw);\n\t\t\tfleetDriver.api = this.api;\n\t\t\tyield fleetDriver;\n\t\t}\n\t}\n\n\t/**\n\t * Vehicle operations\n\t */\n\n\tasync addVehicle({ vehicleId, isActive = true, isOpenToAll = false }: { vehicleId: string; isActive?: boolean; isOpenToAll?: boolean }) {\n\t\tlet data: any = {\n\t\t\tvehicleId,\n\t\t\tisActive,\n\t\t\tisOpenToAll,\n\t\t};\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `/fleets/${this.id}/vehicles`,\n\t\t\tdata,\n\t\t});\n\n\t\tlet fleetVehicle = new FleetVehicle(raw);\n\t\tfleetVehicle.api = this.api;\n\t\treturn fleetVehicle;\n\t}\n\n\tasync removeVehicle({ vehicleId }: { vehicleId: string }) {\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `/fleets/${this.id}/vehicles/${vehicleId}`,\n\t\t});\n\t}\n\n\tasync updateVehicle({ vehicleId, isActive, isOpenToAll }: { vehicleId: string; isActive?: boolean; isOpenToAll?: boolean }) {\n\t\tlet data: any = {};\n\t\tif (isActive !== undefined) {\n\t\t\tdata.isActive = isActive;\n\t\t}\n\t\tif (isOpenToAll !== undefined) {\n\t\t\tdata.isOpenToAll = isOpenToAll;\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `/fleets/${this.id}/vehicles/${vehicleId}`,\n\t\t\tdata,\n\t\t});\n\n\t\tlet fleetVehicle = new FleetVehicle(raw);\n\t\tfleetVehicle.api = this.api;\n\t\treturn fleetVehicle;\n\t}\n\n\tasync *listVehicles(): AsyncIterableIterator<FleetVehicle> {\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `/fleets/${this.id}/vehicles`,\n\t\t})) {\n\t\t\tlet fleetVehicle = new FleetVehicle(raw);\n\t\t\tfleetVehicle.api = this.api;\n\t\t\tyield fleetVehicle;\n\t\t}\n\t}\n\n\t/**\n\t * driver to vehicle assignment operations\n\t */\n\tasync addDriverToVehicle({ driverId, vehicleId, expiresAt, isActive = true }: { driverId: string; vehicleId: string; expiresAt?: Date; isActive?: boolean }) {\n\t\tlet data: any = {\n\t\t\tdriverId,\n\t\t\tvehicleId,\n\t\t\tisActive,\n\t\t};\n\n\t\tif (expiresAt?.toISOString()) {\n\t\t\tdata.expiresAt = expiresAt.toISOString();\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}/vehicles`,\n\t\t\tdata,\n\t\t});\n\n\t\tlet instance = new FleetDriverVehicleAssignment(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n\n\tasync removeDriverFromVehicle({ driverId, vehicleId }: { driverId: string; vehicleId: string }) {\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}/vehicles/${vehicleId}`,\n\t\t});\n\t}\n\n\tasync updateDriverVehicleAssignment({ driverId, vehicleId, expiresAt, isActive }: { driverId: string; vehicleId: string; expiresAt?: Date; isActive?: boolean }) {\n\t\tlet data: any = {};\n\t\tif (expiresAt?.toISOString()) {\n\t\t\tdata.expiresAt = expiresAt.toISOString();\n\t\t}\n\t\tif (isActive !== undefined) {\n\t\t\tdata.isActive = isActive;\n\t\t}\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}/vehicles/${vehicleId}`,\n\t\t\tdata,\n\t\t});\n\t}\n\n\tasync *listDriverVehicleAssignments({\n\t\tdriverId,\n\t\tincludeUnassigned = true,\n\t}: {\n\t\tdriverId: string;\n\t\tincludeUnassigned?: boolean;\n\t}): AsyncIterableIterator<FleetDriverVehicleAssignment> {\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}/vehicles`,\n\t\t\tparams: {\n\t\t\t\tincludeUnassigned,\n\t\t\t},\n\t\t})) {\n\t\t\tlet instance = new FleetDriverVehicleAssignment(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t}\n\t}\n\n\t/**\n\t * policy operations\n\t */\n\n\tasync *listPolicies(): AsyncIterableIterator<Policy> {\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `/policy`,\n\t\t\tparams: {\n\t\t\t\tfleetId: this.id,\n\t\t\t},\n\t\t})) {\n\t\t\tlet instance = new Policy(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t}\n\t}\n}\n","import { Fleet } from \"..\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\nimport { PrivateApiHandler } from \"../../custom\";\nimport { Driver } from \"../../drivers\";\nimport { Vehicle } from \"../../vehicles/rv\";\nimport { FleetsBase } from \"../interface\";\nimport { FleetVehicleBase } from \"./interface\";\n\nexport class FleetVehicle extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tisActive?: boolean;\n\tisOpenToAll?: boolean;\n\tsourceId?: string;\n\tcreatedAt?: Date;\n\tregisteredVehicle?: Vehicle;\n\n\tconstructor(assignment: FleetVehicleBase) {\n\t\tsuper();\n\t\tObject.assign(this, assignment);\n\t}\n\n\tid() {\n\t\treturn this.registeredVehicle?.id;\n\t}\n}\n","import { Driver } from \"./drivers\";\nimport { BillingAccount } from \"./billing/accounts\";\nimport { BillingEvent } from \"./billing/events\";\nimport { Policy } from \"./policy\";\nimport { DriverVehicle } from \"./vehicles/drv\";\nimport { Vehicle } from \"./vehicles/rv\";\nimport { VehicleType } from \"./vehicles/v\";\nimport { Fleet } from \"./fleets\";\n\nlet models = {\n\tDriver,\n\tBillingAccount,\n\tBillingEvent,\n\tPolicy,\n\tDriverVehicle,\n\tVehicle,\n\tVehicleType,\n\tFleet,\n};\n\nexport default models;\n","import { Approval } from \"./interface\";\n\nexport class PolicyApproval {\n\tapprovedAt?: Date;\n\tautoApproved?: boolean;\n\tapprovedBy?: null;\n\n\tconstructor(approval: Approval) {\n\t\tObject.assign(this, approval);\n\t}\n\n    isApproved() {\n        return !!this.approvedAt || this.autoApproved === true;\n    }\n}\n","import { Cancellation } from \"./interface\";\n\nexport class PolicyCancellation {\n\tcancelledAt?: Date;\n\tmessage?: string;\n\n\tconstructor(cancellation: Cancellation) {\n\t\tObject.assign(this, cancellation);\n\t}\n\n\tisCancelled() {\n\t\treturn !!this.cancelledAt;\n\t}\n}\n","import { Driver } from \"./interface\";\n\nexport class PolicyDriver {\n\tesignature?: string;\n\tesignatureFingerprint?: Object;\n\tagreedAt?: Date;\n\n\tconstructor(driver: Driver) {\n\t\tObject.assign(this, driver);\n\t}\n\n\tisAgreed() {\n\t\treturn !!this.agreedAt;\n\t}\n}\n","import { Duration } from \"./interface\";\n\nexport class PolicyDuration {\n\tstart?: Date;\n\tend?: Date;\n\tgracePeriodMins?: number;\n\n\tconstructor(duration: Duration) {\n\t\tObject.assign(this, duration);\n\t}\n\n\tisExpired() {\n\t\t// Check if end is not null and has not passed\n\t\t// Add grace period to end date\n\t\treturn !!this.end && this.end.getTime() + (this.gracePeriodMins || 0) * 60 * 1000 < Date.now();\n\t}\n}\n","export enum policyGroup {\n\tD = \"d\",\n\tDRV = \"drv\",\n\tRV = \"rv\",\n\tFD = \"fd\",\n\tFDRV = \"fdrv\",\n\tFRV = \"frv\",\n}\n","import { Approval } from \"./approval/interface\";\nimport { Cancellation } from \"./cancellation/interface\";\nimport { Config } from \"./config/interface\";\nimport { Fees } from \"./fees/interface\";\nimport { Driver } from \"./driver/interface\";\nimport { Duration } from \"./duration/interface\";\nimport { Excess } from \"./excess/interface\";\nimport { Extras } from \"./extras/interface\";\nimport { Premium } from \"./premium/interface\";\nimport { Contribution } from \"./contribution/interface\";\nimport { Final } from \"./final/interface\";\nimport { Issuer } from \"./issuer/interface\";\nimport { NoClaims } from \"./noclaims/interface\";\nimport { Rates } from \"./rates/interface\";\nimport { Rewards } from \"./rewards/interface\";\nimport { Telematics } from \"./telematics/interface\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\nimport { PolicyBase } from \"./interface\";\nimport { PolicyApproval } from \"./approval\";\nimport { PolicyCancellation } from \"./cancellation\";\nimport { PolicyDriver } from \"./driver\";\nimport { PolicyDuration } from \"./duration\";\nimport { PrivateApiHandler } from \"../custom\";\nimport { policyGroup } from \"./enums/group\";\n\nexport class Policy extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tapiPath?: string;\n\tisActivePolicy?: boolean;\n\tsumInsured?: number;\n\tcanRenew?: boolean;\n\tcover?: string[];\n\tmaxPassengers?: number;\n\tid?: string;\n\tcreatedAt?: Date;\n\tpolicyCertificateLoc?: string;\n\tapproval?: PolicyApproval;\n\tcancellation?: PolicyCancellation;\n\tconfig?: Config;\n\tcontribution?: Contribution;\n\tdriver?: PolicyDriver;\n\tduration?: PolicyDuration;\n\texcess?: Excess;\n\textras?: Extras;\n\tfees?: Fees;\n\tfinal?: Final;\n\tissuer?: Issuer;\n\tnoClaims?: NoClaims;\n\tpremium?: Premium;\n\trates?: Rates;\n\trewards?: Rewards;\n\ttelematics?: Telematics;\n\tpolicyGroup?: string;\n\n\tconstructor(policy: PolicyBase) {\n\t\tsuper();\n\t\tpolicy.approval = policy.approval ? new PolicyApproval(policy.approval) : undefined;\n\t\tpolicy.cancellation = policy.cancellation ? new PolicyCancellation(policy.cancellation) : undefined;\n\t\tpolicy.driver = policy.driver ? new PolicyDriver(policy.driver) : undefined;\n\t\tpolicy.duration = policy.duration ? new PolicyDuration(policy.duration) : undefined;\n\t\tObject.assign(this, policy);\n\t}\n\n\tisCancelled() {\n\t\treturn this.cancellation?.isCancelled();\n\t}\n\n\tisApproved() {\n\t\treturn this.approval?.isApproved();\n\t}\n\n\tisExpired() {\n\t\treturn this.duration?.isExpired();\n\t}\n\n\tisDriverAgreed() {\n\t\treturn this.driver?.isAgreed();\n\t}\n\n\tisLive() {\n\t\treturn this.isActivePolicy && this.isApproved() && !this.isCancelled() && !this.isExpired() && this.isDriverAgreed();\n\t}\n\n\tratePerKm(): number | undefined {\n\t\tif (!this.rates?.enabled) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.final?.rates?.value;\n\t}\n\n\tratePerMile(): number | undefined {\n\t\tif (!this.rates?.enabled) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.final?.rates?.value ? this.final?.rates?.value * 1.60934 : undefined;\n\t}\n\n\tpremiumAmount(): number | undefined {\n\t\treturn this.final?.premium?.value;\n\t}\n\n\tprivate _checkId() {\n\t\tif (!this.id) {\n\t\t\tthrow new Error(\"ID must be set\");\n\t\t}\n\t}\n\n\tasync refesh() {\n\t\tthis._checkId();\n\t\tconst policy = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `policy/${this.id}`,\n\t\t});\n\t\tpolicy.approval = policy.approval ? new PolicyApproval(policy.approval) : undefined;\n\t\tpolicy.cancellation = policy.cancellation ? new PolicyCancellation(policy.cancellation) : undefined;\n\t\tpolicy.driver = policy.driver ? new PolicyDriver(policy.driver) : undefined;\n\t\tpolicy.duration = policy.duration ? new PolicyDuration(policy.duration) : undefined;\n\t\tObject.assign(this, policy);\n\t}\n\n\tasync delete() {\n\t\tthis._checkId();\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `policy/${this.id}`,\n\t\t});\n\t}\n\n\tasync save(fields: Object) {\n\t\tthis._checkId();\n\t\treturn await this._save({\n\t\t\tendpoint: `policy/${this.id}`,\n\t\t\tfields,\n\t\t});\n\t}\n\n\tasync update(persist: boolean = false, fields: Object) {\n\t\tthis._update({\n\t\t\tendpoint: `policy/${this.id}`,\n\t\t\tfields,\n\t\t\tpersist,\n\t\t});\n\t}\n\n\tasync create({ api, recordId, driverId, vehicleId }: { api: APIHandlerAuth; recordId: string; driverId?: string; vehicleId?: string }): Promise<Policy> {\n\t\tlet params = {};\n\n\t\tif (this.policyGroup === policyGroup.D) {\n\t\t\tif (driverId && recordId !== driverId) {\n\t\t\t\trecordId = driverId;\n\t\t\t}\n\t\t} else if (this.policyGroup === policyGroup.DRV) {\n\t\t\t//\n\t\t} else if (this.policyGroup === policyGroup.RV) {\n\t\t\t//\n\t\t} else if (this.policyGroup === policyGroup.FD) {\n\t\t\tif (!driverId) {\n\t\t\t\tthrow new Error(\"Driver ID must be supplied for FD policy\");\n\t\t\t}\n\n\t\t\tif (recordId == driverId) {\n\t\t\t\tthrow new Error(\"RecordId (fleet id) must not be the same as driverId for FD policy\");\n\t\t\t}\n\n\t\t\tparams = {\n\t\t\t\tdriverId,\n\t\t\t};\n\t\t} else if (this.policyGroup === policyGroup.FDRV) {\n\t\t\tif (!driverId) {\n\t\t\t\tthrow new Error(\"Driver ID must be supplied for FDRV policy\");\n\t\t\t}\n\t\t\tif (!vehicleId) {\n\t\t\t\tthrow new Error(\"Vehicle ID must be supplied for FDRV policy\");\n\t\t\t}\n\t\t\tparams = {\n\t\t\t\tdriverId,\n\t\t\t\tvehicleId,\n\t\t\t};\n\n\t\t\tif (recordId == driverId || recordId == vehicleId) {\n\t\t\t\tthrow new Error(\"RecordId (fleet id) must not be the same as driverId or vehicleId for FDRV policy\");\n\t\t\t}\n\t\t} else if (this.policyGroup === policyGroup.FRV) {\n\t\t\tif (!vehicleId) {\n\t\t\t\tthrow new Error(\"Vehicle ID must be supplied for FRV policy\");\n\t\t\t}\n\n\t\t\tif (recordId == vehicleId) {\n\t\t\t\tthrow new Error(\"RecordId (fleet id) must not be the same as vehicleId for FRV policy\");\n\t\t\t}\n\n\t\t\tparams = {\n\t\t\t\tvehicleId,\n\t\t\t};\n\t\t}\n\n\t\tconst raw = await api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `policy/${recordId}`,\n\t\t\tparams,\n\t\t\tdata: this,\n\t\t});\n\n\t\traw.approval = raw.approval ? new PolicyApproval(raw.approval) : undefined;\n\t\traw.cancellation = raw.cancellation ? new PolicyCancellation(raw.cancellation) : undefined;\n\t\traw.driver = raw.driver ? new PolicyDriver(raw.driver) : undefined;\n\t\traw.duration = raw.duration ? new PolicyDuration(raw.duration) : undefined;\n\t\traw.api = api;\n\n\t\tObject.assign(this, raw);\n\t\treturn this;\n\t}\n\n\tasync driverApprove({ refresh = true }: { refresh?: boolean }) {\n\t\tthis._checkId();\n\n\t\tlet body: any = {\n\t\t\tdriver: {\n\t\t\t\tagreedAt: new Date().toISOString(),\n\t\t\t},\n\t\t};\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `policies/${this.id}`,\n\t\t\tdata: body,\n\t\t});\n\t\tif (refresh) {\n\t\t\tawait this.refesh();\n\t\t}\n\t}\n\n\tasync internalApprove({ refresh = true, approvedById }: { refresh?: boolean; approvedById?: string }) {\n\t\tthis._checkId();\n\n\t\tlet body: any = {\n\t\t\tapproval: {\n\t\t\t\tapprovedAt: new Date().toISOString(),\n\t\t\t},\n\t\t};\n\n\t\tif (approvedById) {\n\t\t\tbody.approval.approvedBy = approvedById;\n\t\t}\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `policies/${this.id}`,\n\t\t\tdata: body,\n\t\t});\n\t\tif (refresh) {\n\t\t\tawait this.refesh();\n\t\t}\n\t}\n\n\tasync cancel({ refresh = true, message }: { refresh?: boolean; message?: string }) {\n\t\tthis._checkId();\n\n\t\tlet body: any = {\n\t\t\tcancellation: {\n\t\t\t\tcancelledAt: new Date().toISOString(),\n\t\t\t},\n\t\t};\n\n\t\tif (message) {\n\t\t\tbody.cancellation.message = message;\n\t\t}\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `policies/${this.id}`,\n\t\t\tdata: body,\n\t\t});\n\t\tif (refresh) {\n\t\t\tawait this.refesh();\n\t\t}\n\t}\n}\n","export enum regions {\n\teu1 = \"eu-1\",\n\tdev_eu1 = \"dev-eu-1\",\n\tme1 = \"me-1\",\n\tus1 = \"us-1\",\n}\n\nexport let LANG = [\"en\", \"ar\", \"fr\", \"es\"];\n","import { DriverRegisteredVehicleBase } from \"./interface\";\nimport { RiskBase } from \"../../risk/interface\";\nimport { PolicyBase } from \"../../policy/interface\";\nimport { DriverBase } from \"../../drivers/interface\";\nimport { RegisteredVehicleBase } from \"../rv/interface\";\nimport { Vehicle } from \"../rv\";\nimport { PrivateApiHandler } from \"../../custom\";\n\nexport class DriverVehicle extends PrivateApiHandler {\n\tdriverId?: string;\n\tapiPath?: string;\n\texternalId?: string;\n\tdisplayName?: string;\n\tisApproved?: boolean;\n\tapprovedAt?: Date;\n\tisOwner?: boolean;\n\tisDefault?: boolean;\n\tisActive?: boolean;\n\tisPrimaryDriver?: boolean;\n\texpiresAt?: Date;\n\trisk?: RiskBase;\n\tid?: string;\n\tsourceId?: string;\n\tcreatedAt?: Date;\n\tproofOfOwnershipLoc?: string;\n\tdistance3m?: number;\n\tpolicies?: PolicyBase[];\n\tdriver?: DriverBase;\n\tregisteredVehicle?: Vehicle;\n\n\tconstructor(vehicle: DriverRegisteredVehicleBase) {\n\t\tsuper();\n\t\tvehicle.registeredVehicle = vehicle.registeredVehicle ? new Vehicle(vehicle.registeredVehicle) : undefined;\n\t\tObject.assign(this, vehicle);\n\t}\n\n\tprivate _checkId() {\n\t\tif (!this.id) {\n\t\t\tthrow new Error(\"ID must be set\");\n\t\t}\n\t}\n\n\tgetDisplay() {\n\t\tif (this.registeredVehicle) {\n\t\t\treturn `${this.displayName} ${this.registeredVehicle?.getDisplay()}`;\n\t\t} else {\n\t\t\treturn this.displayName || \"Unknown\";\n\t\t}\n\t}\n\n\ttelematicsId() {\n\t\treturn this.sourceId;\n\t}\n\n\tasync create({ driverId, registeredVehicleId }: { driverId: string; registeredVehicleId?: string }) {\n\t\tif (!registeredVehicleId) {\n\t\t\tif (!this.registeredVehicle?.regPlate || !this.registeredVehicle?.vehicle?.id) {\n\t\t\t\tthrow new Error(\"To created a DRV either registeredVehicleId should be provided or driverVehicle.registeredVehicle must have regPlate and registeredVehicle.vehicle (vehicle type) must have an ID\");\n\t\t\t}\n\t\t}\n\t\tlet data = {\n\t\t\t...this\n\t\t}\n\n\t\tif (registeredVehicleId) {\n\t\t\tdata = {\n\t\t\t\t...data,\n\t\t\t\tregisteredVehicleId: registeredVehicleId\n\t\t\t}\n\t\t\t//remove the registeredVehicle object if it exists\n\t\t\tdelete data.registeredVehicle;\n\t\t}\n\n\t\treturn await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `drivers/${driverId}/vehicles`,\n\t\t\tdata: {\n\t\t\t\t...this,\n\t\t\t\tregisteredVehicleId: registeredVehicleId,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync refresh() {\n\t\tthis._checkId();\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `drivers/${this.driverId}/vehicles/${this.id}`,\n\t\t});\n\n\t\traw.registeredVehicle = raw.registeredVehicle ? new Vehicle(raw.registeredVehicle) : undefined;\n\t\traw.api = this.api;\n\n\t\tObject.assign(this, raw);\n\t}\n\n\tasync delete() {\n\t\tthis._checkId();\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `drivers/${this.driverId}/vehicles/${this.id}`,\n\t\t});\n\t}\n\n\tasync save(fields: Object = {}) {\n\t\tthis._checkId();\n\n\t\tawait this._save({\n\t\t\tendpoint: `drivers/${this.driverId}/vehicles/${this.id}`,\n\t\t\tfields: fields,\n\t\t\texclude: [\"driverId\", \"vehicle\"],\n\t\t});\n\t}\n\n\tasync update({ persist = false, fields = {} }: { persist?: boolean; fields?: Object }) {\n\t\tawait this._update({\n\t\t\tendpoint: `drivers/${this.driverId}/vehicles/${this.id}`,\n\t\t\tpersist: persist,\n\t\t\tfields: fields,\n\t\t\texclude: [\"driverId\", \"vehicle\"],\n\t\t});\n\t}\n}\n","import { RiskBase } from \"../../risk/interface\";\nimport { RegisteredVehicleBase } from \"./interface\";\nimport { DriverRegisteredVehicleBase } from \"../drv/interface\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\nimport { PrivateApiHandler } from \"../../custom\";\nimport { VehicleTypeBase } from \"../v/interface\";\nimport { PolicyBase } from \"../../policy/interface\";\nimport { VehicleType } from \"../v\";\nimport { DriverVehicle } from \"../drv\";\nimport { Policy } from \"../../policy\";\n\nexport class Vehicle extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tapiPath?: string;\n\texternalId?: string;\n\tregPlate?: string;\n\tvin?: string;\n\tyear?: number;\n\tpreowned?: boolean;\n\tisApproved?: boolean;\n\tapprovedAt?: Date;\n\tonRoadParking?: boolean;\n\tmileageKm?: number;\n\tengineLitres?: number;\n\tfuelType?: string;\n\thasTurbo?: boolean;\n\thasSupercharger?: boolean;\n\tbodyModified?: boolean;\n\tengineModified?: boolean;\n\tgearboxType?: string;\n\tisActive?: boolean;\n\trisk?: RiskBase;\n\tbackgroundCheckStatus?: string;\n\tbackgroundCheckProvider?: string;\n\tbackgroundCheckRawOutput?: string;\n\tbackgroundCheckPassed?: boolean;\n\tid?: string;\n\tsourceId?: string;\n\tcreatedAt?: Date;\n\tfrontPicLoc?: string;\n\tsidePicLoc1?: string;\n\tsidePicLoc2?: string;\n\trearPicLoc?: string;\n\ttopPicLoc?: string;\n\tproofOfRegLoc?: string;\n\tdistance3m?: number;\n\ttotalDrvCount?: number;\n\tpolicies?: PolicyBase[];\n\tvehicle?: VehicleType;\n\tdriverVehicles?: DriverRegisteredVehicleBase[];\n\n\tconstructor(vehicle: RegisteredVehicleBase) {\n\t\tsuper();\n\t\tvehicle.vehicle = vehicle.vehicle ? new VehicleType(vehicle.vehicle) : undefined;\n\t\tObject.assign(this, vehicle);\n\t}\n\n\tprivate _checkId() {\n\t\tif (!this.id) {\n\t\t\tthrow new Error(\"ID must be set\");\n\t\t}\n\t}\n\n\tgetDisplay() {\n\t\tif (this.vehicle) {\n\t\t\treturn `${this.vehicle?.getDisplay()} - ${this.regPlate}`;\n\t\t} else {\n\t\t\treturn this.regPlate || \"Unknown\";\n\t\t}\n\t}\n\n\tasync addDrv({ driverId, drv }: { driverId: string; drv: DriverVehicle }) {\n\t\tthis._checkId();\n\n\t\tif (!drv?.api) {\n\t\t\tdrv.api = this.api;\n\t\t}\n\n\t\treturn await drv.create({ driverId: driverId, registeredVehicleId: this.id });\n\t}\n\n\tasync addDriver({ driverId, displayName, isOwner, isPrimaryDriver }: { driverId: string; displayName?: string; isOwner?: boolean; isPrimaryDriver?: boolean }) {\n\t\tlet drv = new DriverVehicle({\n\t\t\tdisplayName: displayName,\n\t\t\tisOwner: isOwner,\n\t\t\tisPrimaryDriver: isPrimaryDriver,\n\t\t});\n\n\t\tdrv.api = this.api;\n\n\t\treturn await this.addDrv({ driverId: driverId, drv: drv });\n\t}\n\n\tasync createPolicy({ policy }: { policy: Policy }) {\n\t\tif (!policy) {\n\t\t\tpolicy = new Policy({\n\t\t\t\tpolicyGroup: \"rv\",\n\t\t\t});\n\t\t}\n\t\tpolicy.api = this.api;\n\t\treturn await policy.create({\n\t\t\tapi: this.api as APIHandlerAuth,\n\t\t\trecordId: this.id!,\n\t\t});\n\t}\n\n\tasync refresh() {\n\t\tthis._checkId();\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `registered-vehicles/${this.id}`,\n\t\t});\n\n\t\traw.api = this.api;\n\n\t\tObject.assign(this, raw);\n\t}\n\n\tasync delete() {\n\t\tthis._checkId();\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `registered-vehicles/${this.id}`,\n\t\t});\n\t}\n\n\tasync save(fields: Object = {}) {\n\t\tthis._checkId();\n\n\t\tawait this._save({\n\t\t\tendpoint: `registered-vehicles/${this.id}`,\n\t\t\tfields: fields,\n\t\t\texclude: [\"vehicleType\"],\n\t\t});\n\t}\n\n\tasync update({ persist = false, fields = {} }: { persist?: boolean; fields?: Object }) {\n\t\tawait this._update({\n\t\t\tendpoint: `vehicles/${this.id}`,\n\t\t\tpersist: persist,\n\t\t\tfields: fields,\n\t\t\texclude: [\"vehicleType\"],\n\t\t});\n\t}\n}\n","import { RiskBase } from \"../../risk/interface\";\nimport { VehicleTypeBase } from \"./interface\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\nimport { PrivateApiHandler } from \"../../custom\";\n\nexport class VehicleType extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tapiPath?: string;\n\texternalId?: string;\n\tdisplay?: string;\n\tdescription?: string;\n\tisActive?: boolean;\n\tvehicleType?: string;\n\tvariant?: string;\n\tcode?: string;\n\tbaseMsrpNew?: number;\n\tbaseMsrpCurrent?: number;\n\tbrand?: string;\n\tmodel?: string;\n\tyearFloor?: number;\n\tyearTop?: number;\n\tdoors?: number;\n\twheels?: number;\n\tautonomy?: number;\n\tseats?: number;\n\tcylinders?: number;\n\tvalves?: number;\n\tvalveTiming?: string;\n\tcamType?: string;\n\tdriveType?: string;\n\ttransmission?: string;\n\tgearCount?: number;\n\tengineSizeML?: number;\n\thorsePower?: number;\n\ttorqueNM?: number;\n\tengineType?: string;\n\tfuelType?: string;\n\tfuelTankCapacityML?: number;\n\tcombinedKMPL?: number;\n\tcityKMPL?: number;\n\tcombinedKMPLE?: number;\n\tcityKMPLE?: number;\n\tkwh100KM?: number;\n\ttimeToCharge240vMins?: number;\n\telectricRangeKM?: number;\n\twarrantyBasicYears?: number;\n\twarrantyBasicKM?: number;\n\twarrantyBasicExpiry?: Date;\n\twarrantyDrivetrainYears?: number;\n\twarrantyDrivetrainKM?: number;\n\twarrantyDrivetrainExpiry?: Date;\n\twarrantyRoadsideYears?: number;\n\twarrantyRoadsideKM?: number;\n\twarrantyRoadsideExpiry?: Date;\n\twarrantyRustYears?: number;\n\twarrantyRustKM?: number;\n\twarrantyRustExpiry?: Date;\n\twarrantyFreeMaintenanceYears?: number;\n\twarrantyFreeMaintenanceKM?: number;\n\twarrantyFreeMaintenanceExpiry?: Date;\n\twarrantyHybridComponentYears?: number;\n\twarrantyHybridComponentKM?: number;\n\twarrantyHybridComponentExpiry?: Date;\n\twarrantyEVBatteryYears?: number;\n\twarrantyEVBatteryKM?: number;\n\twarrantyEVBatteryExpiry?: Date;\n\tlengthMM?: number;\n\twidthMM?: number;\n\theightMM?: number;\n\twheelBaseMM?: number;\n\tfrontTrackMM?: number;\n\trearTrackMM?: number;\n\tgroundClearanceMM?: number;\n\tangleOfApproachDegrees?: number;\n\tangleOfDepartureDegrees?: number;\n\tturningCircleM?: number;\n\tdragCoefficient?: number;\n\tepaInteriorVolumeM3?: number;\n\tcargoCapacityM3?: number;\n\tmaxCargoCapacityM3?: number;\n\tcurbWeightKG?: number;\n\tgrossWeightKG?: number;\n\tmaxPayloadKG?: number;\n\tmaxTowingCapacityKG?: number;\n\tid?: string;\n\tcreatedAt?: Date;\n\tsourceId?: string;\n\timageLoc?: string;\n\tthumbnailLoc?: string;\n\ttranslations?: Object;\n\trisk?: RiskBase;\n\n\tconstructor(vehicleType: VehicleTypeBase) {\n\t\tsuper();\n\t\tObject.assign(this, vehicleType);\n\t}\n\n\tprivate _checkId() {\n\t\tif (!this.id) {\n\t\t\tthrow new Error(\"ID must be set\");\n\t\t}\n\t}\n\n\tgetDisplay() {\n\t\treturn `${this.brand} (${this.model})`;\n\t}\n\n\tasync refresh() {\n\t\tthis._checkId();\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `vehicles/${this.id}`,\n\t\t});\n\n\t\traw.api = this.api;\n\n\t\tObject.assign(this, raw);\n\t}\n\n\tasync delete() {\n\t\tthis._checkId();\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `vehicles/${this.id}`,\n\t\t});\n\t}\n\n\tasync save(fields: Object = {}) {\n\t\tthis._checkId();\n\n\t\tawait this._save({\n\t\t\tendpoint: `vehicles/${this.id}`,\n\t\t\tfields: fields,\n\t\t});\n\t}\n\n\tasync update({ persist = false, fields = {} }: { persist?: boolean; fields?: Object }) {\n\t\tawait this._update({\n\t\t\tendpoint: `vehicles/${this.id}`,\n\t\t\tpersist: persist,\n\t\t\tfields: fields,\n\t\t});\n\t}\n}\n","import { regions } from \"../../models/types\";\nimport { OrgSettings } from \"./org\";\nimport request from \"../helpers/request\";\nimport { APIAuthError, APIError } from \"./exceptions\";\nimport Auth from \"../auth\";\n\nexport class APIHandlerNoAuth {\n\turl?: string;\n\tregion?: string;\n\torgId: string;\n\ttelematicsUrl: string;\n\torgUrl: string;\n\torgData?: OrgSettings;\n\torgDataRefreshing: boolean;\n\n\tconstructor({ url, region, orgId }: { url?: string; region?: string; orgId: string }) {\n\t\tthis.url = url;\n\t\tthis.region = region;\n\t\tthis.orgId = orgId;\n\t\tthis.orgDataRefreshing = false;\n\n\t\tif (!this.url && !this.region) {\n\t\t\tthrow new Error(\"Must provide either a url or a region\");\n\t\t}\n\n\t\tif (this.url) {\n\t\t\t// Remove trailing slash\n\t\t\tif (this.url.endsWith(\"/\")) {\n\t\t\t\tthis.url = this.url.slice(0, -1);\n\t\t\t}\n\t\t}\n\n\t\tif (!this.url) {\n\t\t\t// Check if region is valid\n\t\t\tif (region && !Object.values(regions).includes(region as regions)) {\n\t\t\t\tthrow new Error(`Invalid region. Must be one of: ${Object.values(regions).join(\", \")}`);\n\t\t\t}\n\n\t\t\t// Set url based on region\n\t\t\tthis.url = `https://${this.region}.nsurely-motor.com/v1/api`;\n\t\t}\n\n\t\tthis.telematicsUrl = `https://${this.region}.nsurely-motor.com/v1/telematics`;\n\t\tthis.orgUrl = `${this.url}/org/${this.orgId}`;\n\t}\n\n\tasync request({\n\t\tmethod,\n\t\tendpoint,\n\t\tparams,\n\t\tdata,\n\t\theaders,\n\t\turlOverride,\n\t}: {\n\t\tmethod: string;\n\t\tendpoint?: string;\n\t\tparams?: object;\n\t\tdata?: any;\n\t\theaders?: any;\n\t\turlOverride?: string;\n\t}) {\n\t\tif (!this.orgData && !this.orgDataRefreshing) {\n\t\t\tthis.orgDataRefreshing = true;\n\t\t\tthis.refreshOrgData();\n\t\t}\n\n\t\tif (data) {\n\t\t\tdata = {\n\t\t\t\t...data,\n\t\t\t};\n\t\t\t// check if data has api, remove it\n\t\t\tif (data.api) {\n\t\t\t\tdelete data.api;\n\t\t\t}\n\t\t}\n\n\t\tlet { body, status } = await request({\n\t\t\tmethod,\n\t\t\turl: urlOverride ? urlOverride : `${this.orgUrl}/${endpoint}`,\n\t\t\tparams,\n\t\t\tdata,\n\t\t\theaders,\n\t\t});\n\n\t\tif (status < 300) {\n\t\t\treturn body;\n\t\t} else if (status === 401) {\n\t\t\tthrow new APIAuthError(\"Not authenticated\");\n\t\t} else {\n\t\t\tthrow new APIError(`Api responded with status code ${status}`);\n\t\t}\n\t}\n\n\tasync refreshOrgData() {\n\t\tthis.orgDataRefreshing = true;\n\t\tthis.orgData = await this.request({\n\t\t\turlOverride: `${this.url}/public/${this.orgId}`,\n\t\t\tmethod: \"GET\",\n\t\t});\n\n\t\tthis.orgDataRefreshing = false;\n\t}\n\n\tasync *batchFetch({\n\t\tendpoint,\n\t\tparams,\n\t\theaders,\n\t\tlimit = 50,\n\t\toffset = 0,\n\t}: {\n\t\tendpoint: string;\n\t\tparams?: object;\n\t\theaders?: any;\n\t\tlimit?: number;\n\t\toffset?: number;\n\t}): AsyncGenerator<any, void, unknown> {\n\t\tparams = {\n\t\t\t...params,\n\t\t\tlimit,\n\t\t\toffset,\n\t\t};\n\n\t\t// While true\n\t\twhile (true) {\n\t\t\t// Fetch next page\n\t\t\tlet body = await this.request({\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tendpoint,\n\t\t\t\tparams: {\n\t\t\t\t\t...params,\n\t\t\t\t\toffset,\n\t\t\t\t},\n\t\t\t\theaders,\n\t\t\t});\n\n\t\t\t// If no data, break\n\t\t\tif (!body || body.length === 0) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tfor (let item of body) {\n\t\t\t\tyield item;\n\t\t\t}\n\n\t\t\t// If there are no more results, break\n\t\t\tif (body.length < limit) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Increase offset\n\t\t\toffset += limit;\n\t\t}\n\t}\n}\n\nexport class APIHandlerAuth {\n\turl?: string;\n\tregion?: string;\n\torgId: string;\n\ttelematicsUrl: string;\n\torgUrl: string;\n\torgData?: OrgSettings;\n\torgDataRefreshing: boolean;\n\tauth: Auth;\n\n\tconstructor({ url, region, orgId, auth }: { url?: string; region?: string; orgId: string; auth: Auth }) {\n\t\tthis.url = url;\n\t\tthis.region = region;\n\t\tthis.orgId = orgId;\n\t\tthis.auth = auth;\n\t\tthis.orgDataRefreshing = false;\n\n\t\tif (!this.url && !this.region) {\n\t\t\tthrow new Error(\"Must provide either a url or a region\");\n\t\t}\n\n\t\tif (this.url) {\n\t\t\t// Remove trailing slash\n\t\t\tif (this.url.endsWith(\"/\")) {\n\t\t\t\tthis.url = this.url.slice(0, -1);\n\t\t\t}\n\t\t}\n\n\t\tif (!this.url) {\n\t\t\t// Check if region is valid\n\t\t\tif (region && !Object.values(regions).includes(region as regions)) {\n\t\t\t\tthrow new Error(`Invalid region. Must be one of: ${Object.values(regions).join(\", \")}`);\n\t\t\t}\n\n\t\t\t// Set url based on region\n\t\t\tthis.url = `https://${this.region}.nsurely-motor.com/v1/api`;\n\t\t}\n\n\t\tthis.telematicsUrl = `https://${this.region}.nsurely-motor.com/v1/telematics`;\n\t\tthis.orgUrl = `${this.url}/org/${this.orgId}`;\n\t}\n\n\tasync makeRequest({ method, params, data, headers, url }: { method: string; params?: object; data?: any; headers?: any; url: string }) {\n\t\tif (this.auth.requiresRefresh()) {\n\t\t\tawait this.auth.refresh();\n\t\t}\n\n\t\theaders = {\n\t\t\t...headers,\n\t\t\t...this.auth.getHeaders(),\n\t\t};\n\n\t\treturn await request({\n\t\t\tmethod,\n\t\t\turl: url,\n\t\t\tparams,\n\t\t\tdata,\n\t\t\theaders,\n\t\t});\n\t}\n\n\tasync refreshOrgData() {\n\t\tthis.orgDataRefreshing = true;\n\t\tthis.orgData = await this.request({\n\t\t\turlOverride: `${this.url}/public/${this.orgId}`,\n\t\t\tmethod: \"GET\",\n\t\t});\n\n\t\tthis.orgDataRefreshing = false;\n\t}\n\n\tauthOk(): boolean {\n\t\tif (!this.auth.isLoggedIn()) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.auth.requiresRefresh()) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tasync checkAuth(): Promise<void> {\n\t\tif (!this.authOk()) {\n\t\t\tif (!this.auth.isLoggedIn()) {\n\t\t\t\tawait this.auth.login();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.auth.requiresRefresh()) {\n\t\t\t\tawait this.auth.refresh();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tasync request({\n\t\tmethod,\n\t\tendpoint,\n\t\tparams,\n\t\tdata,\n\t\theaders,\n\t\turlOverride,\n\t}: {\n\t\tmethod: string;\n\t\tendpoint?: string;\n\t\tparams?: object;\n\t\tdata?: any;\n\t\theaders?: any;\n\t\turlOverride?: string;\n\t}) {\n\t\tif (!this.orgData && !this.orgDataRefreshing) {\n\t\t\tthis.orgDataRefreshing = true;\n\t\t\tawait this.refreshOrgData();\n\t\t}\n\n\t\tawait this.checkAuth();\n\n\t\tif (data) {\n\t\t\tdata = {\n\t\t\t\t...data,\n\t\t\t};\n\t\t\t// check if data has api, remove it\n\t\t\tif (data.api) {\n\t\t\t\tdelete data.api;\n\t\t\t}\n\t\t}\n\n\t\tlet response = await this.makeRequest({\n\t\t\tmethod,\n\t\t\turl: urlOverride ? urlOverride : `${this.orgUrl}/${endpoint}`,\n\t\t\tparams,\n\t\t\tdata,\n\t\t\theaders,\n\t\t});\n\n\t\tlet body = response?.body || {};\n\t\tlet status = response?.status || 0;\n\n\t\tif (status === 401) {\n\t\t\tawait this.checkAuth();\n\t\t\theaders = {\n\t\t\t\t...headers,\n\t\t\t\t...this.auth.getHeaders(),\n\t\t\t};\n\t\t\tlet response = await this.makeRequest({\n\t\t\t\tmethod,\n\t\t\t\turl: urlOverride ? urlOverride : `${this.orgUrl}/${endpoint}`,\n\t\t\t\tparams,\n\t\t\t\tdata,\n\t\t\t\theaders,\n\t\t\t});\n\n\t\t\tbody = response?.body || {};\n\t\t\tstatus = response?.status || 0;\n\t\t}\n\n\t\tif (status < 300) {\n\t\t\treturn body;\n\t\t} else if (status === 401) {\n\t\t\tthrow new APIAuthError(\"Not authenticated\");\n\t\t} else {\n\t\t\tthrow new APIError(`Api responded with status code ${status}`);\n\t\t}\n\t}\n\n\tasync *batchFetch({\n\t\tendpoint,\n\t\tparams,\n\t\theaders,\n\t\tlimit = 50,\n\t\toffset = 0,\n\t}: {\n\t\tendpoint: string;\n\t\tparams?: object;\n\t\theaders?: any;\n\t\tlimit?: number;\n\t\toffset?: number;\n\t}): AsyncGenerator<any, void, unknown> {\n\t\tparams = {\n\t\t\t...params,\n\t\t\tlimit,\n\t\t\toffset,\n\t\t};\n\n\t\t// While true\n\t\twhile (true) {\n\t\t\t// Fetch next page\n\t\t\tlet body = await this.request({\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tendpoint,\n\t\t\t\tparams: {\n\t\t\t\t\t...params,\n\t\t\t\t\toffset,\n\t\t\t\t},\n\t\t\t\theaders,\n\t\t\t});\n\n\t\t\t// If no data, break\n\t\t\tif (!body || body.length === 0) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tfor (let item of body) {\n\t\t\t\tyield item;\n\t\t\t}\n\n\t\t\t// If there are no more results, break\n\t\t\tif (body.length < limit) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Increase offset\n\t\t\toffset += limit;\n\t\t}\n\t}\n}\n","export class APIError extends Error {\n    constructor(message: string) {\n        super(message);\n        this.name = \"APIError\";\n    }\n}\n\nexport class APIAuthError extends APIError {\n    constructor(message: string) {\n        super(message);\n        this.name = \"APIAuthError\";\n    }\n}","import { APIHandlerAuth, APIHandlerNoAuth } from \"./core\";\n\nexport { APIHandlerAuth, APIHandlerNoAuth };\n","import { APIKeyAuthError } from \"./exceptions\";\n\nexport class APIKeyAuth {\n\tapiKey: string;\n\tapiSecret: string;\n\theaders: object | undefined;\n\n\tconstructor(key: string, secret: string) {\n\t\tthis.apiKey = key;\n\t\tthis.apiSecret = secret;\n\t\tthis.headers = undefined;\n\n\t\tif (!this.apiKey) {\n\t\t\tthrow new APIKeyAuthError(\"API key is required.\");\n\t\t}\n\n\t\tif (!this.apiSecret) {\n\t\t\tthrow new APIKeyAuthError(\"API secret is required.\");\n\t\t}\n\n\t\t// Strip whitespace from the key and secret\n\t\tthis.apiKey = this.apiKey.trim();\n\t\tthis.apiSecret = this.apiSecret.trim();\n\t}\n\n\trequiresRefresh(): boolean {\n\t\treturn false;\n\t}\n\n\tasync refresh(): Promise<void> {\n\t\treturn;\n\t}\n\n\tgetToken(): string {\n\t\treturn `${this.apiKey}:${this.apiSecret}`;\n\t}\n\n\tgetHeaders(): object {\n\t\tif (!this.headers) {\n\t\t\tthis.headers = {\n\t\t\t\tAuthorization: `apiKey ${this.getToken()}`,\n\t\t\t};\n\t\t}\n\t\treturn this.headers;\n\t}\n\n\tisLoggedIn(): boolean {\n\t\treturn true;\n\t}\n\n    async login(): Promise<boolean> {\n\t\treturn true;\n\t}\n\n    async logout(): Promise<boolean> {\n        return true;\n    }\n}\n","import { AuthError } from \"./exceptions\";\nimport { APIKeyAuth } from \"./apiKey\";\nimport { DriverAuth } from \"./driver\";\nimport { UserAuth } from \"./user\";\nimport { regions } from \"../../models/types\";\n\nenum AuthType {\n\tAPI_KEY = 1,\n\tJWT_DRIVER = 2,\n\tJWT_USER = 3,\n}\n\nexport class Auth {\n\tapiKey?: string;\n\tapiSecret?: string;\n\temail?: string;\n\tpassword?: string;\n\taccountType?: string;\n\tauthMethod: AuthType | undefined;\n\tauthObject: APIKeyAuth | DriverAuth | UserAuth;\n\tregion?: string;\n\turl: string | undefined;\n\torgId: string;\n\tisLoggingIn: boolean;\n\n\tconstructor({\n\t\tapiKey,\n\t\tapiSecret,\n\t\temail,\n\t\tpassword,\n\t\taccountType,\n\t\torgId,\n\t\tregion,\n\t\turl,\n\t}: {\n\t\tapiKey?: string;\n\t\tapiSecret?: string;\n\t\temail?: string;\n\t\tpassword?: string;\n\t\taccountType?: string;\n\t\torgId: string;\n\t\tregion?: string;\n\t\turl?: string;\n\t}) {\n\t\tthis.apiKey = apiKey;\n\t\tthis.apiSecret = apiSecret;\n\t\tthis.email = email;\n\t\tthis.password = password;\n\t\tthis.accountType = accountType;\n\t\tthis.region = region;\n\t\tthis.url = url;\n\t\tthis.orgId = orgId;\n\t\tthis.isLoggingIn = false;\n\n\t\tif (this.url) {\n\t\t\t// Remove trailing slash\n\t\t\tif (this.url.endsWith(\"/\")) {\n\t\t\t\tthis.url = this.url.slice(0, -1);\n\t\t\t}\n\t\t}\n\n\t\tif (!this.url) {\n\t\t\t// Check if region is valid\n\t\t\tif (region && !Object.values(regions).includes(region as regions)) {\n\t\t\t\tthrow new Error(`Invalid region. Must be one of: ${Object.values(regions).join(\", \")}`);\n\t\t\t}\n\n\t\t\t// Set url based on region\n\t\t\tthis.url = `https://${this.region}.nsurely-motor.com/v1/api`;\n\t\t}\n\n\t\tif (this.apiKey) {\n\t\t\tif (!this.apiSecret) {\n\t\t\t\t// Check if apiSecret does not have ':' in it\n\t\t\t\tif (this.apiKey.indexOf(\":\") === -1) {\n\t\t\t\t\tthrow new AuthError('Invalid API key. API key must be in the format \"key:secret\".');\n\t\t\t\t}\n\t\t\t\t// Split the apiSecret into key and secret\n\t\t\t\t[this.apiKey, this.apiSecret] = this.apiKey.split(\":\");\n\t\t\t}\n\t\t\tthis.authMethod = AuthType.API_KEY;\n\t\t\tthis.authObject = new APIKeyAuth(this.apiKey, this.apiSecret);\n\t\t} else if (this.email && this.password) {\n\t\t\tif (!this.accountType) {\n\t\t\t\tthrow new AuthError(\"Account type must be specified.\");\n\t\t\t}\n\t\t\tif (this.accountType === \"driver\") {\n\t\t\t\tthis.authMethod = AuthType.JWT_DRIVER;\n\t\t\t\tthis.authObject = new DriverAuth({\n\t\t\t\t\temail: this.email,\n\t\t\t\t\tpassword: this.password,\n\t\t\t\t\turl: this.url,\n\t\t\t\t\tregion: this.region,\n\t\t\t\t\torgId: this.orgId,\n\t\t\t\t\tauthType: this.accountType,\n\t\t\t\t});\n\t\t\t} else if (this.accountType === \"user\") {\n\t\t\t\tthis.authMethod = AuthType.JWT_USER;\n\t\t\t\tthis.authObject = new UserAuth({\n\t\t\t\t\temail: this.email,\n\t\t\t\t\tpassword: this.password,\n\t\t\t\t\turl: this.url,\n\t\t\t\t\tregion: this.region,\n\t\t\t\t\torgId: this.orgId,\n\t\t\t\t\tauthType: this.accountType,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthrow new AuthError(\"Invalid account type.\");\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new AuthError(\"Auth credentials are missing.\");\n\t\t}\n\t}\n\n\trequiresRefresh() {\n\t\treturn this.authObject.requiresRefresh();\n\t}\n\n\tasync refresh() {\n\t\tawait this.authObject.refresh();\n\t}\n\n\tasync login() {\n\t\tif (this.authMethod === AuthType.API_KEY) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if login is already in progress. If so, wait for it to finish.\n\t\tif (!this.isLoggingIn) {\n\n\t\t\t// Set login flag to true\n\t\t\tthis.isLoggingIn = true;\n\t\t\t\n\t\t\tif (this.email && this.password) {\n\t\t\t\tlet response = await this.authObject.login(this.email, this.password);\n\t\t\t\tthis.isLoggingIn = false;\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tthrow new AuthError(\"Auth credentials are missing.\");\n\t\t\t}\n\t\t} else {\n\t\t\t// Wait for login to finish\n\t\t\treturn await new Promise((resolve) => {\n\n\t\t\t\t// Check if login is finished every 100ms\n\t\t\t\tconst interval = setInterval(() => {\n\n\t\t\t\t\t// If login is finished, resolve the promise\n\t\t\t\t\tif (!this.isLoggingIn) {\n\n\t\t\t\t\t\t// Clear the interval\n\t\t\t\t\t\tclearInterval(interval);\n\n\t\t\t\t\t\t// Resolve the promise\n\t\t\t\t\t\tresolve(this.authObject.getToken());\n\t\t\t\t\t}\n\t\t\t\t}, 100);\n\t\t\t});\n\t\t}\n\t}\n\n\tasync logout() {\n\t\treturn await this.authObject.logout();\n\t}\n\n\tgetToken() {\n\t\treturn this.authObject.getToken();\n\t}\n\n\tgetHeaders() {\n\t\treturn this.authObject.getHeaders();\n\t}\n\n\tisLoggedIn() {\n\t\treturn this.authObject.isLoggedIn();\n\t}\n}\n","import { JWTAuth } from \"./jwt\";\nimport request from \"../helpers/request\";\nimport { regions } from \"../../models/types\";\n\nexport class DriverAuth extends JWTAuth {\n\tconstructor({ url, region, orgId, authType, email, password }: { url?: string; region?: string; orgId: string; authType?: string; email: string; password: string }) {\n\t\tsuper({ url, region, orgId, authType, email, password });\n\t}\n\n\tasync signup({\n\t\temail,\n\t\tpassword,\n\t\tfirstName,\n\t\tlastName,\n\t\tfields,\n\t\tlogin,\n\t}: {\n\t\temail: string;\n\t\tpassword: string;\n\t\tfirstName: string;\n\t\tlastName: string;\n\t\tfields?: object;\n\t\tlogin: boolean;\n\t}): Promise<void> {\n\t\tfields = fields || {};\n\t\tconst body = {\n\t\t\temail,\n\t\t\tpassword,\n\t\t\tfirstName,\n\t\t\tlastName,\n\t\t\t...fields,\n\t\t};\n\t\tconst response = await request({\n\t\t\turl: `${this.url}/org/${this.orgId}/auth/drivers/signup`,\n\t\t\tmethod: \"POST\",\n\t\t\tdata: body,\n\t\t});\n\n\t\tif (login) {\n\t\t\tawait this.login(email, password);\n\t\t}\n\n\t\treturn response.body;\n\t}\n}\n","export class AuthError extends Error {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t\tthis.name = \"AuthError\";\n\t}\n}\n\nexport class APIKeyAuthError extends AuthError {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t\tthis.name = \"APIKeyAuthError\";\n\t}\n}\n\nexport class JWTDriverAuthError extends AuthError {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t\tthis.name = \"JWTDriverAuthError\";\n\t}\n}\n\nexport class JWTUserAuthError extends AuthError {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t\tthis.name = \"JWTUserAuthError\";\n\t}\n}","import { Auth } from \"./core\";\nexport default Auth;\n","import request from \"../helpers/request\";\nimport { regions } from \"../../models/types\";\n\nexport class JWTAuth {\n\turl?: string;\n\tregion?: string;\n\torgId: string;\n\tauthType?: string;\n\temail: string;\n\tpassword: string;\n\ttokenType?: string;\n\taccessToken?: string;\n\texpiresIn?: number;\n\trefreshToken?: string;\n\trefreshExpiresIn?: number;\n\tlastRefreshTime?: EpochTimeStamp;\n\taccountId?: string;\n\taccountType?: string;\n\torgs?: Array<{\n\t\tid: string;\n\t\tdisplay: string;\n\t}>;\n\tloginUrl: string;\n\trefreshUrl: string;\n\tlogoutUrl: string;\n\n\tconstructor({ url, region, orgId, authType, email, password }: { url?: string; region?: string; orgId: string; authType?: string; email: string; password: string }) {\n\t\tthis.url = url;\n\t\tthis.region = region;\n\t\tthis.orgId = orgId;\n\t\tthis.authType = authType;\n\t\tthis.email = email;\n\t\tthis.password = password;\n\t\tthis.tokenType = undefined;\n\t\tthis.accessToken = undefined;\n\t\tthis.expiresIn = undefined;\n\t\tthis.refreshToken = undefined;\n\t\tthis.refreshExpiresIn = undefined;\n\t\tthis.lastRefreshTime = undefined;\n\t\tthis.accountId = undefined;\n\t\tthis.accountType = undefined;\n\t\tthis.orgs = [];\n\n\t\tif (this.authType !== \"driver\" && this.authType !== \"user\") {\n\t\t\tthrow new Error(\"Invalid authType. Must be 'driver' or 'user'\");\n\t\t}\n\n\t\tif (this.url) {\n\t\t\t// Remove trailing slash\n\t\t\tif (this.url.endsWith(\"/\")) {\n\t\t\t\tthis.url = this.url.slice(0, -1);\n\t\t\t}\n\t\t}\n\n\t\tif (!this.url) {\n\t\t\t// Check if region is valid\n\t\t\tif (region && !Object.values(regions).includes(region as regions)) {\n\t\t\t\tthrow new Error(`Invalid region. Must be one of: ${Object.values(regions).join(\", \")}`);\n\t\t\t}\n\n\t\t\t// Set url based on region\n\t\t\tthis.url = `https://${this.region}.nsurely-motor.com/v1/api`;\n\t\t}\n\n\t\tif (this.authType === \"user\") {\n\t\t\tthis.loginUrl = `${this.url}/org/auth/users/login`;\n\t\t\tthis.refreshUrl = `${this.url}/org/auth/users/refresh`;\n\t\t\tthis.logoutUrl = `${this.url}/org/auth/users/logout`;\n\t\t} else if (this.authType === \"driver\") {\n\t\t\tthis.loginUrl = `${this.url}/org/${this.orgId}/auth/drivers/login`;\n\t\t\tthis.refreshUrl = `${this.url}/org/${this.orgId}/auth/drivers/refresh`;\n\t\t\tthis.logoutUrl = `${this.url}/org/${this.orgId}/auth/drivers/logout`;\n\t\t} else {\n\t\t\tthrow new Error(\"Invalid authType. Must be 'driver' or 'user'\");\n\t\t}\n\t}\n\n\trefreshExpired(): boolean {\n\t\tif (!this.lastRefreshTime) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!this.refreshExpiresIn) {\n\t\t\treturn true;\n\t\t}\n\t\t// Check if refresh token is expired\n\t\tif (this.refreshExpiresIn - (Date.now() - this.lastRefreshTime) < 0) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\trequiresRefresh(): boolean {\n\t\tif (!this.accessToken) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!this.expiresIn) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!this.lastRefreshTime) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.expiresIn - (Date.now() - this.lastRefreshTime) < 0) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tasync login(email: string, password: string): Promise<string | undefined> {\n\t\tconst response = await request({\n\t\t\tmethod: \"POST\",\n\t\t\turl: this.loginUrl,\n\t\t\tdata: {\n\t\t\t\temail: email,\n\t\t\t\tpassword: password,\n\t\t\t},\n\t\t});\n\n\t\tthis.tokenType = response.body?.tokenType;\n\t\tthis.accessToken = response.body?.accessToken;\n\t\tthis.expiresIn = response.body?.expiresIn;\n\t\tthis.refreshToken = response.body?.refreshToken;\n\t\tthis.refreshExpiresIn = response.body?.refreshExpiresIn;\n\t\tthis.accountId = response.body?.accountId;\n\t\tthis.accountType = response.body?.accountType;\n\n\t\tif (this.authType === \"user\") {\n\t\t\tthis.orgs = response.body?.orgs;\n\t\t}\n\n\t\tthis.lastRefreshTime = Date.now();\n\n\t\treturn this.accessToken;\n\t}\n\n\tasync logout() {\n\t\tif (this.isLoggedIn()) {\n\t\t\tawait request({\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: this.logoutUrl,\n\t\t\t\tdata: {\n\t\t\t\t\trefreshToken: this.refreshToken,\n\t\t\t\t},\n\t\t\t});\n\t\t\tthis.accessToken = undefined;\n\t\t\tthis.refreshToken = undefined;\n\t\t\tthis.expiresIn = undefined;\n\t\t\tthis.refreshExpiresIn = undefined;\n\t\t\tthis.lastRefreshTime = undefined;\n\t\t}\n\t}\n\n\tisLoggedIn(): boolean {\n\t\tif (!this.accessToken) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this.expiresIn) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this.lastRefreshTime) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this.refreshExpiresIn) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.refreshExpiresIn - (Date.now() - this.lastRefreshTime) < 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tasync refresh(): Promise<string | undefined> {\n\t\tif (this.refreshExpired()) {\n\t\t\tthrow new Error(\"Refresh token expired due to inactivity. Please login again.\");\n\t\t}\n\n\t\tconst response = await request({\n\t\t\tmethod: \"POST\",\n\t\t\turl: this.refreshUrl,\n\t\t\tdata: {\n\t\t\t\trefreshToken: this.refreshToken,\n\t\t\t},\n\t\t});\n\n\t\tthis.tokenType = response.body?.tokenType;\n\t\tthis.accessToken = response.body?.accessToken;\n\t\tthis.expiresIn = response.body?.expiresIn;\n\t\tthis.refreshToken = response.body?.refreshToken;\n\t\tthis.refreshExpiresIn = response.body?.refreshExpiresIn;\n\t\tthis.accountId = response.body?.accountId;\n\t\tthis.accountType = response.body?.accountType;\n\n\t\tthis.lastRefreshTime = Date.now();\n\n\t\treturn this.accessToken;\n\t}\n\n\tgetToken() {\n\t\tif (!this.accessToken) {\n\t\t\tthrow new Error(\"No access token or refresh token found. Please login first.\");\n\t\t}\n\t\treturn `Bearer ${this.accessToken}`;\n\t}\n\n\tgetHeaders() {\n\t\tif (!this.accessToken) {\n\t\t\treturn {};\n\t\t}\n\t\treturn {\n\t\t\tAuthorization: this.getToken(),\n\t\t};\n\t}\n}\n","import { JWTAuth } from \"./jwt\";\nimport request from \"../helpers/request\";\nimport { regions } from \"../../models/types\";\n\nexport class UserAuth extends JWTAuth {\n\tconstructor({ url, region, orgId, authType, email, password }: { url?: string; region?: string; orgId: string; authType?: string; email: string; password: string }) {\n\t\tsuper({ url, region, orgId, authType, email, password });\n\t}\n}\n","\n// Mixin function for multiple inheritance\n// https://www.typescriptlang.org/docs/handbook/mixins.html\nexport function applyMixins(derivedCtor: any, constructors: any) {\n\tconstructors.forEach((baseCtor: any) => {\n\t\tObject.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n\t\t\tObject.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name) || Object.create(null));\n\t\t});\n\t});\n}\n\nexport function isJsonString(str = \"\") {\n    try {\n        JSON.parse(str);\n    } catch (e) {\n        return false;\n    }\n    return true;\n}\n\nexport function deleteFromObject(keyPart: string, obj: any){\n    for (var k in obj){          // Loop through the object\n        if(~k.indexOf(keyPart)){ // If the current key contains the string we're looking for\n            delete obj[k];       // Delete obj[key];\n        }\n    }\n}","import fetch, { Headers, Request, Response, RequestInit } from \"node-fetch\";\n\nfunction isJsonString(str = \"\") {\n\ttry {\n\t\tJSON.parse(str);\n\t} catch (e) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n/**\n * Parses the JSON returned by a network request\n */\nasync function parseJSON({ response, method, url, params }: { response: Response; method: string; url?: string; params?: object }): Promise<any> {\n\tif (response.status >= 200 && response.status < 300) {\n\t\tif (response.status === 204 || response.status === 205) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet responseObject = await response.json();\n\n\t\treturn { status: response.status, body: responseObject };\n\t}\n\n\t// Get the response body as text\n\tlet responseBody = await response.text();\n\n\t// If the response body is JSON, parse it\n\tif (isJsonString(responseBody)) {\n\t\tresponseBody = JSON.parse(responseBody);\n\t}\n\n\t// Log the error\n\tswitch (response.status) {\n\t\tcase 401:\n\t\tcase 403:\n\t\tcase 404:\n\t\t\t// do nothing\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.error(\"API call failed\", {\n\t\t\t\turl: url,\n\t\t\t\tmethod: method,\n\t\t\t\tstatus: response.status,\n\t\t\t\tresponse: responseBody,\n\t\t\t\tparams: params || {},\n\t\t\t});\n\t\t\tbreak;\n\t}\n\n\tconst error = {\n\t\tstatus: response.status,\n\t\tbody: responseBody,\n\t};\n\tthrow error;\n}\n\n/**\n * Checks if a network request came back fine, and throws an error if not\n *\n * @param  {object} response   A response from a network request\n *\n * @return {object|undefined} Returns either the response, or throws an error\n */\nfunction checkStatus({ response, method }: { response: Response; method: string }) {\n\treturn response;\n}\n\nexport default function request({ method, url, data = null, headers, params }: { method: string; url?: string; data?: any; headers?: object; params?: object }): Promise<{\n\tstatus: number;\n\tbody: any;\n}> {\n\treturn new Promise((resolve, reject) => {\n\t\tlet requestOptions: RequestInit = {\n\t\t\tmethod: method,\n\t\t\tredirect: \"follow\",\n\t\t};\n\n\t\tlet requestHeaders = new Headers();\n\n\t\tif (data) {\n\t\t\trequestHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\trequestOptions.body = JSON.stringify(data);\n\t\t}\n\n\t\tif (headers) {\n\t\t\tfor (const [key, value] of Object.entries(headers)) {\n\t\t\t\trequestHeaders.append(key, value);\n\t\t\t}\n\t\t}\n\n\t\trequestOptions.headers = requestHeaders;\n\n\t\tfetch(\n\t\t\t`${url}?${new URLSearchParams({\n\t\t\t\t...params,\n\t\t\t})}`,\n\t\t\trequestOptions\n\t\t)\n\t\t\t.then((response: Response) => {\n\t\t\t\treturn checkStatus({\n\t\t\t\t\tresponse: response,\n\t\t\t\t\tmethod: method,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.then((response: Response) => {\n\t\t\t\tparseJSON({\n\t\t\t\t\tresponse: response,\n\t\t\t\t\tmethod: method,\n\t\t\t\t\turl: url,\n\t\t\t\t\tparams: params,\n\t\t\t\t})\n\t\t\t\t\t.then((response: any) => {\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error: any) => {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((error: Error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n}\n","let ops = [\"eq\", \"ne\", \"gt\", \"gte\", \"lt\", \"lte\", \"like\", \"ilike\"];\n\n/**\n * Advanced search\n */\nexport class Search {\n\tvalue: any;\n\toperator: string;\n\n\tconstructor({ value, operator = \"eq\" }: { value: any; operator?: string }) {\n\t\tthis.value = value;\n\t\tthis.operator = operator;\n\t}\n\n\t// Checks the type and returns the value as a string. Datetime is converted to ISO format\n\tprivate _getValueString() {\n\t\tif (this.value instanceof Date) {\n\t\t\treturn this.value.toISOString();\n\t\t}\n\t\treturn this.value.toString();\n\t}\n\n\tavailableOperators() {\n\t\treturn ops;\n\t}\n\n\ttoString() {\n\t\treturn `${this.operator}.${this._getValueString()}`;\n\t}\n}\n","import Storage from \"react-native-storage\";\n\nexport default class StorageManager {\n\tstatic myInstance: StorageManager;\n\tstorage: Storage;\n\n\tconstructor(storageBackend: any = null) {\n\t\tthis.storage = new Storage({\n\t\t\t// maximum capacity, default 1000 key-ids\n\t\t\tsize: 1000,\n\n\t\t\t// Use AsyncStorage for RN apps, or window.localStorage for web apps.\n\t\t\t// If storageBackend is not set, data will be lost after reload.\n\t\t\tstorageBackend: storageBackend, // for web: window.localStorage\n\n\t\t\t// expire time, default: 1 day (1000 * 3600 * 24 milliseconds).\n\t\t\t// can be null, which means never expire.\n\t\t\tdefaultExpires: null,\n\n\t\t\t// cache data in the memory. default is true.\n\t\t\tenableCache: true,\n\t\t});\n\t}\n\n\t/**\n     * InitialiseSets the storage type to be used by the StorageManager.\n\t * @returns {StorageManager}\n\t */\n    static createStorage(storageBackend: any = null): void {\n\t\tif (this.myInstance == null) {\n\t\t\tthis.myInstance = new StorageManager(storageBackend);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {StorageManager}\n\t */\n    static getInstance(): StorageManager {\n\t\tif (this.myInstance == null) {\n\t\t\tthrow new Error(\"StorageManager has not been initialised. Initialise with StorageManager.createStorage(storageBackend)\");\n\t\t}\n\n\t\treturn this.myInstance;\n\t}\n\n\tasync save({ key, data }: { key: string; data: any }) {\n\t\tawait this.storage.save({\n\t\t\tkey: key,\n\t\t\tdata: data,\n\t\t});\n\t}\n\n\tasync load({ key }: { key: string }) {\n\t\treturn await this.storage.load({\n\t\t\tkey: key,\n\t\t});\n\t}\n\n\tasync remove({ key }: { key: string }) {\n\t\tawait this.storage.remove({\n\t\t\tkey: key,\n\t\t});\n\t}\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(607);\n"],"names":["global","self","window","Error","getGlobal","module","exports","fetch","bind","Headers","Request","Response","e","t","n","r","i","a","s","o","c","value","done","Promise","resolve","then","TypeError","Object","defineProperty","enumerable","configurable","writable","arguments","length","keys","getOwnPropertySymbols","concat","filter","getOwnPropertyDescriptor","forEach","prototype","create","constructor","setPrototypeOf","getPrototypeOf","__proto__","Reflect","construct","sham","Proxy","Date","toString","call","push","apply","Function","u","Map","indexOf","has","get","set","this","h","ReferenceError","l","name","stack","f","_SIZE","size","sync","defaultExpires","enableCache","_s","storageBackend","_innerVersion","cache","setItem","isPromise","console","warn","_mapPromise","getItem","_m","_checkMap","JSON","parse","key","removeItem","innerVersion","index","__keys__","_initMap","id","data","_getId","split","_removeIdInKey","stringify","rawData","expires","error","now","_saveToMap","all","map","load","regeneratorRuntime","mark","wrap","prev","next","ids","syncInBackground","syncParams","autoSync","batched","sent","syncId","abrupt","shift","stop","_loadGlobalItem","ret","_noItemFound","_loadMapItem","splice","_lookupGlobalItem","_lookUpInMap","clear","remove","assign","getIdsForKey","getBatchData","runtime","undefined","Op","hasOwn","hasOwnProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","err","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","invoke","reject","record","result","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","_sent","dispatchException","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","awrap","async","iter","val","object","reverse","pop","skipTempReset","charAt","slice","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","accidentalStrictMode","globalThis","getDriver","driverId","risk","address","fleets","vehicleCount","distance","points","files","contact","occupation","params","raw","api","request","endpoint","instance","Driver","listDrivers","isActive","dob","email","firstName","lastName","externalId","maxRecords","count","String","batchFetch","createDriver","driver","password","sendInvite","sendWebhook","webhook","invite","Drivers","getFleet","fleetId","query","Fleet","listFleets","createFleet","fleet","Fleets","getVehicle","vehicleId","includeTranslations","includeDistance","includeDrvCount","drv","trns","distance3m","totalDrvCount","Vehicle","listVehicles","isApproved","regPlate","vin","sourceId","fullResponse","full","createVehicle","vehicle","rv","addDrv","addDriver","getDisplay","isOwner","isPrimaryDriver","listVehicleTypes","brand","model","vehicleName","year","internalFields","VehicleType","createVehicleType","vehicleType","Vehicles","Motor","orgId","region","url","auth","storage","createStorage","storageManager","getInstance","APIHandlerAuth","APIHandlerNoAuth","orgSettings","orgData","refreshOrgData","language","defaultLang","orgName","path","applyMixins","motorJS","Auth","Search","models","billingAccount","card","isPrimary","lastFour","billingEventStatus","billingEvent","getCurrency","currencyIsoCode","approvalAt","update","updateStatus","status","paymentId","includes","join","_update","persist","fields","exclude","_save","body","field","deleteFromObject","PrivateApiHandler","super","_checkId","fullName","refresh","delete","save","DriverVehicle","telematicsId","listBillingAccounts","primaryOnly","BillingAccount","getBillingAccount","listVehiclePolicies","drvIds","policy","Policy","getPrimaryBillingAccount","res","createBillingAccount","account","charge","amount","event","BillingEvent","message","listCharges","eventType","eventStatus","listPolicies","looseMatch","isActivePolicy","driverIds","driverLooseMatch","createPolicy","policyGroup","recordId","FleetDriverVehicleAssignment","assignment","registeredVehicle","telemaicsId","FleetDriver","getTranslations","lang","LANG","translations","getDescription","hasParent","parentId","getTags","tags","checkId","getParent","isVehicleManager","isDriverManager","isBillingManager","expiresAt","vehicleIds","vehicleExpiresAt","toISOString","fleetDriver","removeDriver","updateDriver","addVehicle","isOpenToAll","fleetVehicle","FleetVehicle","removeVehicle","updateVehicle","addDriverToVehicle","removeDriverFromVehicle","updateDriverVehicleAssignment","listDriverVehicleAssignments","includeUnassigned","approval","approvedAt","autoApproved","cancellation","isCancelled","cancelledAt","isAgreed","agreedAt","duration","isExpired","end","getTime","gracePeriodMins","PolicyApproval","PolicyCancellation","PolicyDriver","PolicyDuration","isDriverAgreed","isLive","ratePerKm","rates","enabled","final","ratePerMile","premiumAmount","premium","refesh","D","DRV","RV","FD","FDRV","FRV","driverApprove","internalApprove","approvedById","approvedBy","cancel","regions","registeredVehicleId","orgDataRefreshing","endsWith","telematicsUrl","orgUrl","headers","urlOverride","APIAuthError","APIError","limit","offset","item","makeRequest","requiresRefresh","getHeaders","authOk","isLoggedIn","checkAuth","login","response","secret","apiKey","apiSecret","APIKeyAuthError","trim","getToken","Authorization","logout","AuthType","accountType","isLoggingIn","AuthError","authMethod","API_KEY","authObject","APIKeyAuth","JWT_DRIVER","DriverAuth","authType","JWT_USER","UserAuth","interval","setInterval","clearInterval","JWTAuth","signup","tokenType","accessToken","expiresIn","refreshToken","refreshExpiresIn","lastRefreshTime","accountId","orgs","loginUrl","refreshUrl","logoutUrl","refreshExpired","derivedCtor","constructors","baseCtor","getOwnPropertyNames","str","keyPart","k","requestOptions","redirect","requestHeaders","append","entries","URLSearchParams","checkStatus","responseObject","json","responseBody","text","isJsonString","parseJSON","catch","ops","operator","_getValueString","availableOperators","StorageManager","static","myInstance","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","prop"],"sourceRoot":""}