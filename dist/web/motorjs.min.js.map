{"version":3,"file":"web/motorjs.min.js","mappings":"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","sources":["webpack://@inaza/motorjs/./node_modules/node-fetch/browser.js","webpack://@inaza/motorjs/./node_modules/react-native-storage/lib/storage.esm.js","webpack://@inaza/motorjs/./node_modules/regenerator-runtime/runtime.js","webpack://@inaza/motorjs/./src/classes/drivers/core.ts","webpack://@inaza/motorjs/./src/classes/drivers/index.ts","webpack://@inaza/motorjs/./src/classes/fleets/core.ts","webpack://@inaza/motorjs/./src/classes/fleets/index.ts","webpack://@inaza/motorjs/./src/classes/trips/index.ts","webpack://@inaza/motorjs/./src/classes/trips/manager.ts","webpack://@inaza/motorjs/./src/classes/vehicles/core.ts","webpack://@inaza/motorjs/./src/classes/vehicles/index.ts","webpack://@inaza/motorjs/./src/index.ts","webpack://@inaza/motorjs/./src/models/billing/accounts/index.ts","webpack://@inaza/motorjs/./src/models/billing/events/index.ts","webpack://@inaza/motorjs/./src/models/custom.ts","webpack://@inaza/motorjs/./src/models/drivers/index.ts","webpack://@inaza/motorjs/./src/models/fleets/assigned/index.ts","webpack://@inaza/motorjs/./src/models/fleets/drivers/index.ts","webpack://@inaza/motorjs/./src/models/fleets/index.ts","webpack://@inaza/motorjs/./src/models/fleets/vehicles/index.ts","webpack://@inaza/motorjs/./src/models/index.ts","webpack://@inaza/motorjs/./src/models/policy/approval/index.ts","webpack://@inaza/motorjs/./src/models/policy/cancellation/index.ts","webpack://@inaza/motorjs/./src/models/policy/driver/index.ts","webpack://@inaza/motorjs/./src/models/policy/duration/index.ts","webpack://@inaza/motorjs/./src/models/policy/enums/group.ts","webpack://@inaza/motorjs/./src/models/policy/index.ts","webpack://@inaza/motorjs/./src/models/types/index.ts","webpack://@inaza/motorjs/./src/models/vehicles/drv/index.ts","webpack://@inaza/motorjs/./src/models/vehicles/rv/index.ts","webpack://@inaza/motorjs/./src/models/vehicles/v/index.ts","webpack://@inaza/motorjs/./src/utils/api/core.ts","webpack://@inaza/motorjs/./src/utils/api/exceptions.ts","webpack://@inaza/motorjs/./src/utils/api/index.ts","webpack://@inaza/motorjs/./src/utils/auth/apiKey.ts","webpack://@inaza/motorjs/./src/utils/auth/core.ts","webpack://@inaza/motorjs/./src/utils/auth/driver.ts","webpack://@inaza/motorjs/./src/utils/auth/exceptions.ts","webpack://@inaza/motorjs/./src/utils/auth/index.ts","webpack://@inaza/motorjs/./src/utils/auth/jwt.ts","webpack://@inaza/motorjs/./src/utils/auth/user.ts","webpack://@inaza/motorjs/./src/utils/helpers/index.ts","webpack://@inaza/motorjs/./src/utils/helpers/request.ts","webpack://@inaza/motorjs/./src/utils/search/index.ts","webpack://@inaza/motorjs/./src/utils/storage/index.ts","webpack://@inaza/motorjs/webpack/bootstrap","webpack://@inaza/motorjs/webpack/runtime/define property getters","webpack://@inaza/motorjs/webpack/runtime/hasOwnProperty shorthand","webpack://@inaza/motorjs/webpack/runtime/make namespace object","webpack://@inaza/motorjs/webpack/startup"],"sourcesContent":["\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar global = getGlobal();\n\nmodule.exports = exports = global.fetch;\n\n// Needed for TypeScript and Webpack.\nif (global.fetch) {\n\texports.default = global.fetch.bind(global);\n}\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;","function e(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function t(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);\"function\"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}function a(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,n){return(c=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function u(e){var t=\"function\"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf(\"[native code]\")))return e;var n;if(\"function\"!=typeof e)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return c(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,e)})(e)}function h(e,t){return!t||\"object\"!=typeof t&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}var l=function(e){function n(e){var r;return t(this,n),(r=h(this,s(n).call(this,\"Not Found! Params: \".concat(e)))).name=\"NotFoundError\",r.stack=(new Error).stack,r}return a(n,u(Error)),n}(),f=function(e){function n(e){var r;return t(this,n),(r=h(this,s(n).call(this,\"Expired! Params: \".concat(e)))).name=\"ExpiredError\",r.stack=(new Error).stack,r}return a(n,u(Error)),n}();export default(function(){function r(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t(this,r),this._SIZE=n.size||1e3,this.sync=n.sync||{},this.defaultExpires=void 0!==n.defaultExpires?n.defaultExpires:864e5,this.enableCache=!1!==n.enableCache,this._s=n.storageBackend||null,this._innerVersion=11,this.cache={},this._s&&this._s.setItem)try{var i=this._s.setItem(\"__react_native_storage_test\",\"test\");this.isPromise=!(!i||!i.then)}catch(e){throw console.warn(e),delete this._s,e}else console.warn(\"Data would be lost after reload cause there is no storageBackend specified!\\n      \\nEither use localStorage(for web) or AsyncStorage(for React Native) as a storageBackend.\");this._mapPromise=this.getItem(\"map\").then(function(t){e._m=e._checkMap(t&&JSON.parse(t)||{})})}var a,s,o,c,u;return a=r,(s=[{key:\"getItem\",value:function(e){return this._s?this.isPromise?this._s.getItem(e):Promise.resolve(this._s.getItem(e)):Promise.resolve()}},{key:\"setItem\",value:function(e,t){return this._s?this.isPromise?this._s.setItem(e,t):Promise.resolve(this._s.setItem(e,t)):Promise.resolve()}},{key:\"removeItem\",value:function(e){return this._s?this.isPromise?this._s.removeItem(e):Promise.resolve(this._s.removeItem(e)):Promise.resolve()}},{key:\"_initMap\",value:function(){return{innerVersion:this._innerVersion,index:0,__keys__:{}}}},{key:\"_checkMap\",value:function(e){return e&&e.innerVersion&&e.innerVersion===this._innerVersion?e:this._initMap()}},{key:\"_getId\",value:function(e,t){return e+\"_\"+t}},{key:\"_saveToMap\",value:function(e){var t=e.key,n=e.id,r=e.data,i=this._getId(t,n),a=this._m;if(void 0!==a[i])return this.enableCache&&(this.cache[i]=JSON.parse(r)),this.setItem(\"map_\"+a[i],r);if(void 0!==a[a.index]){var s=a[a.index],o=s.split(\"_\");delete a[s],this._removeIdInKey(o[0],o[1]),this.enableCache&&delete this.cache[s]}if(a[i]=a.index,a[a.index]=i,a.__keys__[t]=a.__keys__[t]||[],a.__keys__[t].push(n),this.enableCache){var c=JSON.parse(r);this.cache[i]=c}var u=a.index;++a.index===this._SIZE&&(a.index=0),this.setItem(\"map_\"+u,r),this.setItem(\"map\",JSON.stringify(a))}},{key:\"save\",value:function(e){var t=this,n=e.key,r=e.id,i=e.data,a=e.rawData,s=e.expires,o=void 0===s?this.defaultExpires:s;-1!==n.toString().indexOf(\"_\")&&console.error('Please do not use \"_\" in key!');var c={rawData:i};if(void 0===i){if(void 0===a)return void console.error('\"data\" is required in save()!');console.warn('\"rawData\" is deprecated, please use \"data\" instead!'),c.rawData=a}var u=Date.now();if(null!==o&&(c.expires=u+o),c=JSON.stringify(c),void 0===r){if(this.enableCache){var h=JSON.parse(c);this.cache[n]=h}return this.setItem(n,c)}return-1!==r.toString().indexOf(\"_\")&&console.error('Please do not use \"_\" in id!'),this._mapPromise.then(function(){return t._saveToMap({key:n,id:r,data:c})})}},{key:\"getBatchData\",value:function(e){var t=this;return Promise.all(e.map(function(e){return t.load(e)}))}},{key:\"getBatchDataWithIds\",value:(c=regeneratorRuntime.mark(function e(t){var n,r,i,a,s,o,c,u,h=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,r=t.ids,i=t.syncInBackground,a=t.syncParams,s=r.map(function(e){return h.load({key:n,id:e,syncInBackground:i,autoSync:!1,batched:!0})}),e.next=4,Promise.all(s);case 4:if(o=e.sent,c=[],o.forEach(function(e){void 0!==e.syncId&&c.push(e.syncId)}),!c.length){e.next=14;break}return e.next=10,this.sync[n]({id:c,syncParams:a});case 10:return u=e.sent,e.abrupt(\"return\",o.map(function(e){return e.syncId?u.shift():e}));case 14:return e.abrupt(\"return\",o);case 15:case\"end\":return e.stop()}},e,this)}),u=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=c.apply(t,n);function s(t){e(a,r,i,s,o,\"next\",t)}function o(t){e(a,r,i,s,o,\"throw\",t)}s(void 0)})},function(e){return u.apply(this,arguments)})},{key:\"_lookupGlobalItem\",value:function(e){var t=this,n=e.key;return this.enableCache&&void 0!==this.cache[n]?this._loadGlobalItem(i({ret:this.cache[n]},e)):this.getItem(n).then(function(n){return t._loadGlobalItem(i({ret:n},e))})}},{key:\"_loadGlobalItem\",value:function(e){var t=e.key,n=e.ret,r=e.autoSync,i=e.syncInBackground,a=e.syncParams;if(null==n){if(r&&this.sync[t])return this.sync[t]({syncParams:a});throw new l(JSON.stringify(e))}\"string\"==typeof n&&(n=JSON.parse(n),this.enableCache&&(this.cache[t]=n));var s=Date.now();if(n.expires<s){if(r&&this.sync[t]){if(i){try{this.sync[t]({syncParams:a,syncInBackground:i})}catch(e){}return n.rawData}return this.sync[t]({syncParams:a,syncInBackground:i})}throw new f(JSON.stringify(e))}return n.rawData}},{key:\"_noItemFound\",value:function(e){var t=e.key,n=e.id,r=e.autoSync,i=e.syncParams;if(this.sync[t])return r?this.sync[t]({id:n,syncParams:i}):{syncId:n};throw new l(JSON.stringify(e))}},{key:\"_loadMapItem\",value:function(e){var t=e.ret,n=e.key,r=e.id,i=e.autoSync,a=e.batched,s=e.syncInBackground,o=e.syncParams;if(null==t)return this._noItemFound(e);if(\"string\"==typeof t){t=JSON.parse(t);var c=e.key,u=e.id,h=this._getId(c,u);this.enableCache&&(this.cache[h]=t)}var l=Date.now();if(t.expires<l){if(i&&this.sync[n]){if(s){try{this.sync[n]({id:r,syncParams:o,syncInBackground:s})}catch(e){}return t.rawData}return this.sync[n]({id:r,syncParams:o,syncInBackground:s})}if(a)return{syncId:r};throw new f(JSON.stringify(e))}return t.rawData}},{key:\"_lookUpInMap\",value:function(e){var t,n=this,r=this._m,a=e.key,s=e.id,o=this._getId(a,s);return this.enableCache&&this.cache[o]?(t=this.cache[o],this._loadMapItem(i({ret:t},e))):void 0!==r[o]?this.getItem(\"map_\"+r[o]).then(function(t){return n._loadMapItem(i({ret:t},e))}):this._noItemFound(i({ret:t},e))}},{key:\"remove\",value:function(e){var t=this;return this._mapPromise.then(function(){var n=t._m,r=e.key,i=e.id;if(void 0===i)return t.enableCache&&t.cache[r]&&delete t.cache[r],t.removeItem(r);var a=t._getId(r,i);if(void 0!==n[a]){t.enableCache&&t.cache[a]&&delete t.cache[a],t._removeIdInKey(r,i);var s=n[a];return delete n[a],t.setItem(\"map\",JSON.stringify(n)),t.removeItem(\"map_\"+s)}})}},{key:\"_removeIdInKey\",value:function(e,t){var n=(this._m.__keys__[e]||[]).indexOf(t);-1!==n&&this._m.__keys__[e].splice(n,1)}},{key:\"load\",value:function(e){var t=this,n=e.key,r=e.id,i=e.autoSync,a=void 0===i||i,s=e.syncInBackground,o=void 0===s||s,c=e.syncParams,u=e.batched;return this._mapPromise.then(function(){return void 0===r?t._lookupGlobalItem({key:n,autoSync:a,syncInBackground:o,syncParams:c}):t._lookUpInMap({key:n,id:r,autoSync:a,syncInBackground:o,batched:u,syncParams:c})})}},{key:\"clearAll\",value:function(){this._s.clear&&this._s.clear(),this._m=this._initMap()}},{key:\"clearMap\",value:function(){var e=this;return this.removeItem(\"map\").then(function(){e.cache={},e._m=e._initMap()})}},{key:\"clearMapForKey\",value:function(e){var t=this;return this._mapPromise.then(function(){var n=(t._m.__keys__[e]||[]).map(function(n){return t.remove({key:e,id:n})});return Promise.all(n)})}},{key:\"getIdsForKey\",value:function(e){var t=this;return this._mapPromise.then(function(){return t._m.__keys__[e]||[]})}},{key:\"getAllDataForKey\",value:function(e,t){var n=this;return t=Object.assign({syncInBackground:!0},t),this.getIdsForKey(e).then(function(r){var i=r.map(function(n){return{key:e,id:n,syncInBackground:t.syncInBackground}});return n.getBatchData(i)})}}])&&n(a.prototype,s),o&&n(a,o),r}());\n//# sourceMappingURL=storage.esm.js.map\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; };\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) });\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: true });\n  defineProperty(\n    GeneratorFunctionPrototype,\n    \"constructor\",\n    { value: GeneratorFunction, configurable: true }\n  );\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    defineProperty(this, \"_invoke\", { value: enqueue });\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method;\n    var method = delegate.iterator[methodName];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method, or a missing .next mehtod, always terminate the\n      // yield* loop.\n      context.delegate = null;\n\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\n      if (methodName === \"throw\" && delegate.iterator[\"return\"]) {\n        // If the delegate iterator has a return method, give it a\n        // chance to clean up.\n        context.method = \"return\";\n        context.arg = undefined;\n        maybeInvokeDelegate(delegate, context);\n\n        if (context.method === \"throw\") {\n          // If maybeInvokeDelegate(context) changed context.method from\n          // \"return\" to \"throw\", let that override the TypeError below.\n          return ContinueSentinel;\n        }\n      }\n      if (methodName !== \"return\") {\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a '\" + methodName + \"' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(val) {\n    var object = Object(val);\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import StorageManager from \"../../utils/storage\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\nimport { Driver } from \"../../models/drivers\";\nimport { DriverBase } from \"../../models/drivers/interface\";\nimport { Search } from \"../../utils/search\";\n\nexport class Drivers {\n\tstorageManager!: StorageManager;\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\t/**\n\t * Returns a drivers record.\n\t * @returns {Promise<Driver>}\n\t *\n\t * @param {string} driverId - The ID of the driver to retrieve.\n\t * @param {boolean} risk - Whether to include the driver's risk data. Defaults to true\n\t * @param {boolean} address - Whether to include the driver's address data. Defaults to true\n\t * @param {boolean} fleets - Whether to include the driver's fleet data. Defaults to true\n\t * @param {boolean} vehicleCount - Whether to include the driver's vehicle count. Defaults to true\n\t * @param {boolean} distance - Whether to include the driver's distance data. Defaults to true\n\t * @param {boolean} points - Whether to include the driver's points data. Defaults to true\n\t * @param {boolean} files - Whether to include the driver's files data. Defaults to true\n\t * @param {boolean} contact - Whether to include the driver's contact data. Defaults to true\n\t * @param {boolean} occupation - Whether to include the driver's occupation data. Defaults to true\n\t */\n\tasync getDriver({\n\t\tdriverId,\n\t\trisk = true,\n\t\taddress = true,\n\t\tfleets = true,\n\t\tvehicleCount = false,\n\t\tdistance = false,\n\t\tpoints = true,\n\t\tfiles = true,\n\t\tcontact = true,\n\t\toccupation = true,\n\t}: {\n\t\tdriverId: string;\n\t\trisk?: boolean;\n\t\taddress?: boolean;\n\t\tfleets?: boolean;\n\t\tvehicleCount?: boolean;\n\t\tdistance?: boolean;\n\t\tpoints?: boolean;\n\t\tfiles?: boolean;\n\t\tcontact?: boolean;\n\t\toccupation?: boolean;\n\t}) {\n\t\tlet params = {\n\t\t\trisk,\n\t\t\taddress,\n\t\t\tfleets,\n\t\t\tvehicleCount,\n\t\t\tdistance,\n\t\t\tpoints,\n\t\t\tfiles,\n\t\t\tcontact,\n\t\t\toccupation,\n\t\t};\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `drivers/${driverId}`,\n\t\t\tparams,\n\t\t});\n\n\t\tlet instance = new Driver(raw);\n\t\tinstance.api = this.api;\n\n\t\treturn instance;\n\t}\n\n\tasync *listDrivers({\n\t\tisActive,\n\t\tdob,\n\t\temail,\n\t\tfirstName,\n\t\tlastName,\n\t\texternalId,\n\t\tmaxRecords,\n\t}: {\n\t\tisActive?: boolean;\n\t\tdob?: string | Search;\n\t\temail?: string | Search;\n\t\tfirstName?: string | Search;\n\t\tlastName?: string | Search;\n\t\texternalId?: string | Search;\n\t\tmaxRecords?: number;\n\t}): AsyncGenerator<Driver> {\n\t\tlet count = 0;\n\n\t\tlet params = {};\n\t\tdob ? (params = { ...params, dob: String(dob) }) : null;\n\t\temail ? (params = { ...params, email: String(email) }) : null;\n\t\tfirstName ? (params = { ...params, firstName: String(firstName) }) : null;\n\t\tlastName ? (params = { ...params, lastName: String(lastName) }) : null;\n\t\texternalId ? (params = { ...params, externalId: String(externalId) }) : null;\n\t\tisActive ? (params = { ...params, isActive }) : null;\n\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `drivers`,\n\t\t\tparams: params,\n\t\t})) {\n\t\t\tif (maxRecords && count >= maxRecords) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet instance = new Driver(raw);\n\t\t\tinstance.api = this.api;\n\n\t\t\tyield instance;\n\t\t\tcount++;\n\t\t}\n\t}\n\n\tasync createDriver({ driver, password, sendInvite, sendWebhook }: { driver: Driver; password?: string; sendInvite?: boolean; sendWebhook?: boolean }) {\n\t\tif (!password && !sendInvite) {\n\t\t\tthrow new Error(\"You must provide a password if sendInvite is false\");\n\t\t}\n\t\tif (password && sendInvite) {\n\t\t\tthrow new Error(\"You cannot provide a password if sendInvite is true\");\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `drivers`,\n\t\t\tdata: {\n\t\t\t\t...driver,\n\t\t\t\tpassword,\n\t\t\t},\n\t\t\tparams: {\n\t\t\t\twebhook: sendWebhook ? \"true\" : \"false\",\n\t\t\t\tinvite: sendInvite ? \"true\" : \"false\",\n\t\t\t},\n\t\t});\n\n\t\tlet instance = new Driver(raw);\n\t\tinstance.api = this.api;\n\n\t\treturn instance;\n\t}\n}\n","import { Drivers } from \"./core\";\n\nexport default Drivers;","import StorageManager from \"../../utils/storage\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\nimport { Fleet } from \"../../models/fleets\";\n\nexport class Fleets {\n\tstorageManager!: StorageManager;\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tasync getFleet({ fleetId, query }: { fleetId: string; query: object }) {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `fleets/${fleetId}`,\n\t\t\tparams: query,\n\t\t});\n\n\t\tlet instance = new Fleet(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n\n\tasync *listFleets({ maxRecords }: { maxRecords: number }): AsyncGenerator<Fleet, void, unknown> {\n\t\tlet count = 0;\n\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `fleets`,\n\t\t})) {\n\t\t\tif (maxRecords && count >= maxRecords) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet instance = new Fleet(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t\tcount++;\n\t\t}\n\t}\n\n\tasync createFleet({ fleet }: { fleet: Fleet }) {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `fleets`,\n\t\t\tparams: fleet,\n\t\t});\n\n\t\tlet instance = new Fleet(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n}\n","import { Fleets } from \"./core\";\n\nexport default Fleets;","import { TripManager } from \"./manager\";\n\nexport default TripManager;","import StorageManager from \"../../utils/storage\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\n\nexport class TripManager {\n\tapi: APIHandlerAuth;\n\tsourceId: string;\n\torgId: string;\n\tbatchWindow: number;\n\tlastBatchTime: Date;\n\tgps: Object[];\n\taccelerometer: Object[];\n\tgyroscope: Object[];\n\talerts: Object[];\n\n\tconstructor({ api, sourceId, orgId, batchWindow }: { api: APIHandlerAuth; sourceId: string; orgId: string; batchWindow: number }) {\n\t\tthis.batchWindow = batchWindow;\n\t\tif (this.batchWindow < 0) {\n\t\t\tthrow new Error(\"batchWindow must be greater than 0\");\n\t\t}\n\n\t\tif (this.batchWindow > 60) {\n\t\t\tthrow new Error(\"batchWindow must be less than 60\");\n\t\t}\n\t\tthis.api = api;\n\t\tthis.sourceId = sourceId;\n\t\tthis.orgId = orgId;\n\n\t\tthis.lastBatchTime = new Date();\n\n\t\tthis.gps = [];\n\t\tthis.accelerometer = [];\n\t\tthis.gyroscope = [];\n\t\tthis.alerts = [];\n\t}\n\n\tclear() {\n\t\tthis.gps = [];\n\t\tthis.accelerometer = [];\n\t\tthis.gyroscope = [];\n\t\tthis.alerts = [];\n\t}\n\n\tasync sendCheck() {\n\t\tif (!this.gps.length && !this.accelerometer.length && !this.gyroscope.length && !this.alerts.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.batchWindow != 0.0) {\n\t\t\tif (new Date().getTime() - this.lastBatchTime.getTime() < this.batchWindow) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tlet body = {\n\t\t\tsourceId: this.sourceId,\n\t\t\torgId: this.orgId,\n\t\t\tgps: this.gps,\n\t\t\tacc: this.accelerometer,\n\t\t\tgyro: this.gyroscope,\n\t\t\talerts: this.alerts,\n\t\t};\n\n\t\tawait this.api.telematicsRequest({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: \"/track\",\n\t\t\tdata: body,\n\t\t});\n\n\t\tthis.clear();\n\t}\n\n\tasync addGPS({\n\t\tlat,\n\t\tlng,\n\t\tgpsAccuracy,\n\t\taltitude,\n\t\tacceleration,\n\t\tspeed,\n\t\tbearing,\n\t\tbearingAccuracy,\n\t\tverticalAcceleration,\n\t\ttimestamp,\n\t}: {\n\t\tlat: number;\n\t\tlng: number;\n\t\tgpsAccuracy: number;\n\t\taltitude: number;\n\t\tacceleration: number;\n\t\tspeed: number;\n\t\tbearing: number;\n\t\tbearingAccuracy: number;\n\t\tverticalAcceleration: number;\n\t\ttimestamp: number;\n\t}) {\n\t\tif (lat === undefined || lng === undefined) {\n\t\t\tthrow new Error(\"lat and lng must be provided\");\n\t\t}\n\n\t\t// check if lat is valid\n\t\tif (lat < -90 || lat > 90) {\n\t\t\tthrow new Error(\"lat must be between -90 and 90\");\n\t\t}\n\n\t\t// check if lng is valid\n\t\tif (lng < -180 || lng > 180) {\n\t\t\tthrow new Error(\"lng must be between -180 and 180\");\n\t\t}\n\n\t\tif (!timestamp) {\n\t\t\ttimestamp = new Date().getTime();\n\t\t}\n\n\t\tthis.gps.push({\n\t\t\tlat,\n\t\t\tlng,\n\t\t\ta: gpsAccuracy,\n\t\t\talt: altitude,\n\t\t\tacc: acceleration,\n\t\t\ts: speed,\n\t\t\tb: bearing,\n\t\t\tbAcc: bearingAccuracy,\n\t\t\tva: verticalAcceleration,\n\t\t\tts: timestamp,\n\t\t});\n\n\t\tawait this.sendCheck();\n\t}\n\n\tasync addAccelerometer({ x, y, z, timestamp }: { x: number; y: number; z: number; timestamp: number }) {\n\t\tif (x === undefined || y === undefined || z === undefined) {\n\t\t\tthrow new Error(\"x, y and z must be provided\");\n\t\t}\n\n\t\tif (!timestamp) {\n\t\t\ttimestamp = new Date().getTime();\n\t\t}\n\n\t\tthis.accelerometer.push({\n\t\t\tx,\n\t\t\ty,\n\t\t\tz,\n\t\t\tts: timestamp,\n\t\t});\n\n\t\tawait this.sendCheck();\n\t}\n\n\tasync addGyroscope({ x, y, z, timestamp }: { x: number; y: number; z: number; timestamp: number }) {\n\t\tif (x === undefined || y === undefined || z === undefined) {\n\t\t\tthrow new Error(\"x, y and z must be provided\");\n\t\t}\n\n\t\tif (!timestamp) {\n\t\t\ttimestamp = new Date().getTime();\n\t\t}\n\n\t\tthis.gyroscope.push({\n\t\t\tx,\n\t\t\ty,\n\t\t\tz,\n\t\t\tts: timestamp,\n\t\t});\n\n\t\tawait this.sendCheck();\n\t}\n\n\tasync addAlert({\n\t\talertCode,\n\t\tmeasurement1,\n\t\tmeasurement2,\n\t\tmeasurement3,\n\t\tonDevice,\n\t\tshown,\n\t\ttimestamp,\n\t}: {\n\t\talertCode: string;\n\t\tmeasurement1: number;\n\t\tmeasurement2: number;\n\t\tmeasurement3: number;\n\t\tonDevice: boolean;\n\t\tshown: boolean;\n\t\ttimestamp: number;\n\t}) {\n\t\tif (alertCode === undefined) {\n\t\t\tthrow new Error(\"alert_code must be provided\");\n\t\t}\n\n\t\tif (!timestamp) {\n\t\t\ttimestamp = new Date().getTime();\n\t\t}\n\n\t\tthis.alerts.push({\n\t\t\tcode: alertCode,\n\t\t\tm1: measurement1,\n\t\t\tm2: measurement2,\n\t\t\tm3: measurement3,\n\t\t\tonDevice,\n\t\t\tshown,\n\t\t\tts: timestamp,\n\t\t});\n\n\t\tawait this.sendCheck();\n\t}\n}\n","import StorageManager from \"../../utils/storage\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\nimport { DriverVehicle } from \"../../models/vehicles/drv\";\nimport { Vehicle } from \"../../models/vehicles/rv\";\nimport { Driver } from \"../../models/drivers\";\nimport { DriverBase } from \"../../models/drivers/interface\";\nimport { DriverRegisteredVehicleBase } from \"../../models/vehicles/drv/interface\";\nimport { Search } from \"../../utils/search\";\nimport { VehicleType } from \"../../models/vehicles/v\";\n\nexport class Vehicles {\n\tstorageManager!: StorageManager;\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tasync getVehicle({\n\t\tvehicleId,\n\t\tincludeTranslations = true,\n\t\tincludeDistance = true,\n\t\tincludeDrvCount = true,\n\t}: {\n\t\tvehicleId: string;\n\t\tincludeTranslations?: boolean;\n\t\tincludeDistance?: boolean;\n\t\tincludeDrvCount?: boolean;\n\t}) {\n\t\tlet params = {\n\t\t\tdrv: true,\n\t\t\ttrns: includeTranslations,\n\t\t\tdistance3m: includeDistance,\n\t\t\ttotalDrvCount: includeDrvCount,\n\t\t};\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `registered-vehicles/${vehicleId}`,\n\t\t\tparams,\n\t\t});\n\n\t\tlet instance = new Vehicle(raw);\n\t\tinstance.api = this.api;\n\n\t\treturn instance;\n\t}\n\n\tasync *listVehicles({\n\t\tisActive,\n\t\tisApproved,\n\t\tregPlate,\n\t\tvin,\n\t\tsourceId,\n\t\texternalId,\n\t\tfullResponse,\n\t\tmaxRecords,\n\t}: {\n\t\tisActive?: boolean;\n\t\tisApproved?: boolean;\n\t\tregPlate?: string | Search;\n\t\tvin?: string | Search;\n\t\tsourceId?: string | Search;\n\t\texternalId?: string | Search;\n\t\tfullResponse?: string;\n\t\tmaxRecords?: number;\n\t}): AsyncGenerator<Vehicle, void, unknown> {\n\t\tlet count = 0;\n\n\t\tlet params = {};\n\n\t\tisActive ? (params = { ...params, isActive: isActive }) : null;\n\t\tisApproved ? (params = { ...params, isApproved: isApproved }) : null;\n\t\tvin ? (params = { ...params, vin: String(vin) }) : null;\n\t\tregPlate ? (params = { ...params, regPlate: String(regPlate) }) : null;\n\t\tsourceId ? (params = { ...params, sourceId: String(sourceId) }) : null;\n\t\texternalId ? (params = { ...params, externalId: String(externalId) }) : null;\n\t\tfullResponse ? (params = { ...params, full: fullResponse ? \"true\" : \"false\" }) : null;\n\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `registered-vehicles`,\n\t\t\tparams: params,\n\t\t})) {\n\t\t\tif (maxRecords && count >= maxRecords) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet instance = new Vehicle(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t\tcount++;\n\t\t}\n\t}\n\n\tasync createVehicle({ vehicle, driverId, drv, sendWebhook = true }: { vehicle: Vehicle; driverId?: string; drv?: DriverVehicle; sendWebhook?: boolean }) {\n\t\tif (!driverId && drv) {\n\t\t\tthrow new Error(\"You must provide a driverId if drv is provided\");\n\t\t}\n\n\t\tif (!vehicle.vehicle) {\n\t\t\tthrow new Error(\"You must provide a vehicleType\");\n\t\t}\n\n\t\tif (!vehicle.vehicle?.id) {\n\t\t\tthrow new Error(\"Vehicle Type ID is required\");\n\t\t}\n\n\t\tlet data = {\n\t\t\t...vehicle,\n\t\t\tvehicleId: vehicle.vehicle.id,\n\t\t};\n\n\t\tdelete data.vehicle;\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `registered-vehicles`,\n\t\t\tdata: data,\n\t\t\tparams: {\n\t\t\t\twebhook: sendWebhook ? \"true\" : \"false\",\n\t\t\t},\n\t\t});\n\n\t\tlet rv = new Vehicle(raw);\n\t\trv.api = this.api;\n\n\t\ttry {\n\t\t\tif (driverId) {\n\t\t\t\tif (!drv) {\n\t\t\t\t\tawait rv.addDriver({\n\t\t\t\t\t\tdriverId,\n\t\t\t\t\t\tdisplayName: vehicle.getDisplay(),\n\t\t\t\t\t\tisOwner: true,\n\t\t\t\t\t\tisPrimaryDriver: true,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tawait rv.addDrv({\n\t\t\t\t\t\tdriverId,\n\t\t\t\t\t\tdrv,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\t// await rv.delete();\n\t\t\tthrow e;\n\t\t}\n\n\t\treturn rv;\n\t}\n\n\tasync *listVehicleTypes({\n\t\tbrand,\n\t\tmodel,\n\t\tvehicleName,\n\t\tyear,\n\t\texternalId,\n\t\tsourceId,\n\t\tisActive = true,\n\t\tinternalFields,\n\t\tmaxRecords,\n\t}: {\n\t\tbrand?: string | Search;\n\t\tmodel?: string | Search;\n\t\tvehicleName?: string | Search;\n\t\tyear?: string | number | Search;\n\t\texternalId?: string | Search;\n\t\tsourceId?: string | Search;\n\t\tisActive?: boolean;\n\t\tinternalFields?: boolean;\n\t\tmaxRecords?: number;\n\t}) {\n\t\tlet count = 0;\n\n\t\tlet params = {};\n\n\t\tbrand ? (params = { ...params, brand: String(brand) }) : null;\n\t\tmodel ? (params = { ...params, model: String(model) }) : null;\n\t\tvehicleName ? (params = { ...params, vehicleName: String(vehicleName) }) : null;\n\t\tyear ? (params = { ...params, year: String(year) }) : null;\n\t\texternalId ? (params = { ...params, externalId: String(externalId) }) : null;\n\t\tsourceId ? (params = { ...params, sourceId: String(sourceId) }) : null;\n\t\tisActive ? (params = { ...params, isActive: isActive }) : null;\n\t\tinternalFields ? (params = { ...params, internalFields: internalFields }) : null;\n\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `vehicles`,\n\t\t\tparams: params,\n\t\t})) {\n\t\t\tif (maxRecords && count >= maxRecords) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet instance = new VehicleType(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t\tcount++;\n\t\t}\n\t}\n\n\tasync createVehicleType({ vehicleType, sendWebhook }: { vehicleType: VehicleType; sendWebhook?: boolean }) {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `vehicles`,\n\t\t\tdata: vehicleType,\n\t\t\tparams: {\n\t\t\t\twebhook: sendWebhook ? \"true\" : \"false\",\n\t\t\t},\n\t\t});\n\n\t\tlet instance = new VehicleType(raw);\n\t\tinstance.api = this.api;\n\n\t\treturn instance;\n\t}\n\n\tasync getVehicleType({ vehicleTypeId }: { vehicleTypeId: string }): Promise<VehicleType> {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `vehicles/${vehicleTypeId}`,\n\t\t});\n\n\t\tlet instance = new VehicleType(raw);\n\t\tinstance.api = this.api;\n\n\t\treturn instance;\n\t}\n}\n","import { Vehicles } from \"./core\";\n\nexport default Vehicles;","import \"regenerator-runtime/runtime\";\nimport { APIHandlerNoAuth, APIHandlerAuth } from \"./utils/api\";\nimport StorageManager from \"./utils/storage\";\nimport Auth from \"./utils/auth\";\nimport { applyMixins } from \"./utils/helpers\";\nimport Drivers from \"./classes/drivers\";\nimport Vehicles from \"./classes/vehicles\";\nimport Fleets from \"./classes/fleets\";\nimport { OrgSettings } from \"./utils/api/org\";\nimport { Search } from \"./utils/search\";\nimport models from \"./models\";\nimport TripManager from \"./classes/trips\";\n\n/**\n * Entry point for the SDK to interact with the Inaza API.\n * @break\n *\n * ##  Help\n * -  [Documentation](https://motor-sdk-docs.vercel.app/js)\n *\n * ##  Submodules\n * - [Drivers](https://motor-sdk-docs.vercel.app/js/classes/drivers)\n * - [Vehicles](https://motor-sdk-docs.vercel.app/js/classes/vehicles)\n * - [Fleets](https://motor-sdk-docs.vercel.app/js/classes/fleets)\n * @break\n *\n * ##  Installation\n * `npm install @inaza/motorjs`\n *\n * ##  Usage\n * ```js\n * // Import the motorJS object from the package\n * import motorJS from '@inaza/motorjs';\n *\n * // Optional - Import AsyncStorage if you are using the MotorJS sdk in a react native project.\n * import AsyncStorage from \"@react-native-async-storage/async-storage\";\n *\n * // Initialise Auth\n * let auth = new motorJS.Auth({\n * \torgId: \"your-org-id\",\n * \tregion: \"your-region\",\n * \temail: \"some-user@org.com\",\n * \tpassword: \"$tr0ngP@ssw0rd\",\n * \taccountType: \"user/driver\",\n * });\n *\n * // Login\n * auth.login().then((res) => {\n * \tconsole.log(res);\n * });\n *\n * // Initialise the Motor SDK and pass the Auth object\n * let motor = new motorJS.Motor({\n * \torgId: \"your-org-id\",\n * \tregion: \"your-region\",\n * \t// Pass AsyncStorage for react-native.\n * \t// Else for any web-based project that runs in a browser, pass window.localStorage. eg. storage: window.localStorage\n * \t// You can keep this as null, however data such as bearerToken and refershToken will not be persisted when application is closed and re-opened.\n * \tstorage: AsyncStorage,\n * \t// Pass the auth instance\n * \tauth: auth,\n * });\n *\n * motor.orgSettings().then((res) => {\n * \tconsole.log(res);\n * });\n *\n * motor\n * \t.getDriver({\n * \t\tdriverId: env.testing.driverId1,\n * \t})\n * \t.then((driver) => {\n * \t\tconsole.log(driver.fullName());\n * \t});\n * ```\n *\n */\n\nclass Motor {\n\tstatic myInstance: Motor;\n\torgId: string;\n\tregion: string;\n\turl?: string;\n\tauth?: Auth;\n\tstorageManager: StorageManager;\n\tapi: APIHandlerNoAuth | APIHandlerAuth;\n\n\t/**\n\t * Initialise Motor and return an instance of the Motor class.\n\t *\n\t * @param {Object} obj - An object.\n\t * @param {string} obj.orgId - Your organisation ID.\n\t * @param {string} obj.region - Your region. eg. us, eu, au.\n\t * @param {string} obj.url - Optional. The base url of the API.\n\t * @param {string} obj.auth - Optional. An instance of the Auth class.\n\t * @param {string} obj.storage - Optional. Your storage. eg. window.localStorage, AsyncStorage.\n\t * @returns {Motor}\n\t */\n\tconstructor({ orgId, region, url, auth, storage = null }: { orgId: string; region: string; url?: string; auth?: Auth; storage?: any }) {\n\t\tStorageManager.createStorage(storage);\n\t\tthis.orgId = orgId;\n\t\tthis.region = region;\n\t\tthis.url = url;\n\t\tthis.storageManager = StorageManager.getInstance();\n\t\tthis.auth = auth;\n\n\t\tif (this.auth) {\n\t\t\tthis.api = new APIHandlerAuth({\n\t\t\t\torgId: this.orgId,\n\t\t\t\tregion: this.region,\n\t\t\t\turl: this.url,\n\t\t\t\tauth: this.auth,\n\t\t\t});\n\t\t} else {\n\t\t\tthis.api = new APIHandlerNoAuth({\n\t\t\t\torgId: this.orgId,\n\t\t\t\tregion: this.region,\n\t\t\t\turl: this.url,\n\t\t\t});\n\t\t}\n\t}\n\n\tasync orgSettings(): Promise<OrgSettings | undefined> {\n\t\tif (!this.api.orgData) {\n\t\t\tawait this.api.refreshOrgData();\n\t\t}\n\n\t\treturn this.api.orgData;\n\t}\n\n\tasync language(): Promise<string | undefined> {\n\t\tif (this.api.orgData) {\n\t\t\treturn this.api.orgData.defaultLang;\n\t\t}\n\t\tlet orgData = await this.orgSettings();\n\t\treturn orgData?.defaultLang;\n\t}\n\n\tasync orgName(): Promise<string | undefined> {\n\t\tif (this.api.orgData) {\n\t\t\treturn this.api.orgData.displayName;\n\t\t}\n\t\tlet orgData = await this.orgSettings();\n\t\treturn orgData?.displayName;\n\t}\n\n\tasync request({ method, path, params, data }: { method: string; path?: string; params?: object; data?: any }) {\n\t\treturn await this.api.request({\n\t\t\tmethod,\n\t\t\tendpoint: path,\n\t\t\tparams,\n\t\t\tdata,\n\t\t});\n\t}\n}\n\ninterface Motor extends Drivers, Vehicles, Fleets {}\napplyMixins(Motor, [Drivers, Vehicles, Fleets]);\n\nlet motorJS = {\n\tMotor,\n\tAuth,\n\tTripManager,\n\tSearch,\n\tmodels,\n};\n\n// For webpack\nFunction(\"r\", \"motorJS = r\")(motorJS);\n\nexport default motorJS;\n","import { BillingAccountBase, CardBase } from \"./interface\";\nimport { DriverBase } from \"../../drivers/interface\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\n\nexport class BillingAccount {\n\tapi?: APIHandlerAuth | APIHandlerNoAuth;\n\tadrLine1?: string;\n\tadrLine2?: string;\n\tadrLine3?: string;\n\tcounty?: string;\n\tprovince?: string;\n\tpostcode?: string;\n\texternalId?: string;\n\tadrSameAsHome?: boolean;\n\texpiry?: Date;\n\tupdatedAt?: Date;\n\tisActive?: boolean;\n\tisPrimary?: boolean;\n\tthirdPartyId?: string;\n\tcard?: CardBase;\n\tid?: string;\n\tcreatedAt?: Date;\n\tcountryIsoCode?: string;\n\tcurrencyIsoCode?: string;\n\taccountType?: string;\n\tdriver?: DriverBase;\n\n\tconstructor(billingAccount: BillingAccountBase) {\n\t\tObject.assign(this, billingAccount);\n\t}\n\n\tgetDisplay(): string {\n\t\tif (!this.card) {\n\t\t\treturn \"Unknown\";\n\t\t}\n\t\treturn `${this.isPrimary ? \"Primary \" : \"\"}${this.card.name} - ${this.card.lastFour}`;\n\t}\n}\n","import { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\nimport { BillingAccountBase } from \"../accounts/interface\";\nimport { BillingEventBase } from \"./interface\";\n\nconst billingEventStatus = [\"pending\", \"paid\", \"failed\", \"cancelled\", \"refunded\"];\n\nexport class BillingEvent {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\texternalId?: string;\n\tpaymentId?: string;\n\tamount?: number;\n\tmessage?: string;\n\tpaymentOut?: boolean;\n\tpaymentDate?: Date;\n\tstatus?: string;\n\tapprovalAt?: Date;\n\tpolicyId?: string;\n\ttype?: string;\n\tid?: string;\n\tcreatedAt?: Date;\n\tbillingAccount?: BillingAccountBase;\n\tapprovalBy?: string;\n\n\tconstructor(billingEvent: BillingEventBase) {\n\t\tObject.assign(this, billingEvent);\n\t}\n\n\tgetCurrency(): string | undefined {\n\t\tif (!this.billingAccount) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.billingAccount.currencyIsoCode;\n\t}\n\n\tisApproved(): boolean {\n\t\treturn this.approvalAt ? true : false;\n\t}\n\n\tupdate(data: Object) {\n\t\tthis.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `billing-events/${this.id}`,\n\t\t\tdata: data,\n\t\t});\n\t}\n\n\tupdateStatus({ status, paymentId }: { status: string; paymentId?: string }) {\n\t\t// Check if staus is one of billingEventStatus\n\t\tif (!billingEventStatus.includes(status)) {\n\t\t\tthrow new Error(`Invalid status: ${status} - can only be one of ${billingEventStatus.join(\", \")}`);\n\t\t}\n\n\t\tlet data = {};\n\n\t\tdata = {\n\t\t\tstatus: status,\n\t\t};\n\n\t\tif (paymentId) {\n\t\t\tdata = {\n\t\t\t\t...data,\n\t\t\t\tpaymentId: paymentId,\n\t\t\t};\n\t\t}\n\n\t\tthis.update(data);\n\n\t\tthis.status = status;\n\t}\n}\n","import { APIHandlerAuth, APIHandlerNoAuth } from \"../utils/api\";\nimport { deleteFromObject } from \"../utils/helpers\";\n\nexport class PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tasync _update({\n\t\tpersist,\n\t\tendpoint,\n\t\tfields,\n\t\texclude,\n\t\tparams,\n\t}: {\n\t\tpersist?: boolean;\n\t\tendpoint?: string;\n\t\tfields?: Object;\n\t\texclude?: string[];\n\t\tparams?: Object;\n\t}): Promise<void> {\n\t\tif (!fields) {\n\t\t\treturn;\n\t\t}\n\t\t// Update the instance\n\t\tObject.assign(this, {\n\t\t\t...this,\n\t\t\t...fields,\n\t\t});\n\t\tif (persist && endpoint) {\n\t\t\tawait this._save({ endpoint, fields, exclude, params });\n\t\t}\n\t}\n\n\tasync _save({ endpoint, fields, exclude = [], params }: { endpoint: string; fields?: Object; exclude?: string[]; params?: Object }) {\n\t\tif (!this.api) {\n\t\t\tthrow new Error(\"APIHandler not initialised\");\n\t\t}\n\t\tlet body = null;\n\t\tif (!fields) {\n\t\t\tbody = {\n\t\t\t\t...this,\n\t\t\t};\n\t\t\texclude = exclude.concat([\"api\", \"id\", \"createdAt\"]);\n\n\t\t\tfor (let field of exclude) {\n\t\t\t\tdeleteFromObject(field, body);\n\t\t\t}\n\t\t} else {\n\t\t\tbody = {\n\t\t\t\t...fields,\n\t\t\t};\n\t\t}\n\n\t\tif (!fields) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: endpoint,\n\t\t\tparams: params,\n\t\t\tdata: body,\n\t\t});\n\t}\n}\n","import { DriverBase, Occupation } from \"./interface\";\nimport { FleetsBase } from \"../fleets/interface\";\nimport { RiskBase } from \"../risk/interface\";\nimport { PolicyBase } from \"../policy/interface\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\nimport { PrivateApiHandler } from \"../custom\";\nimport { Vehicle } from \"../vehicles/rv\";\nimport { BillingAccount } from \"../billing/accounts\";\nimport { DriverVehicle } from \"../vehicles/drv\";\nimport { Policy } from \"../policy\";\nimport { BillingEvent } from \"../billing/events\";\n\nexport class Driver extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tadrLine1?: string;\n\tadrLine2?: string;\n\tadrLine3?: string;\n\tcounty?: string;\n\tprovince?: string;\n\tpostcode?: string;\n\texternalId?: string;\n\tlang?: string;\n\tfirstName?: string;\n\tmiddleName?: string;\n\tlastName?: string;\n\tapprovedAt?: Date;\n\tdriverActivated?: boolean;\n\tactivatedAt?: Date;\n\tdob?: Date;\n\tisApproved?: boolean;\n\tisActive?: boolean;\n\tgender?: string;\n\ttelE164?: string;\n\tdrivingStartDate?: Date;\n\tcountryIsoCode?: string;\n\toccupation?: Occupation;\n\tid?: string;\n\tsourceId?: string;\n\temail?: string;\n\tcreatedAt?: Date;\n\tcountryName?: string;\n\tdriversLicenseLoc?: string;\n\tproofOfAddressLoc?: string;\n\tidLoc?: string;\n\tprofilePicLoc?: string;\n\tfleets?: FleetsBase[];\n\tvehicleCount?: number;\n\ttotalPoints?: number;\n\tdistanceKm30Days?: number;\n\trisk?: RiskBase;\n\tpolicies?: PolicyBase[];\n\n\tconstructor(driver: DriverBase) {\n\t\tsuper();\n\t\tObject.assign(this, driver);\n\t}\n\n\tprivate _checkId() {\n\t\tif (!this.id) {\n\t\t\tthrow new Error(\"ID must be set\");\n\t\t}\n\t}\n\n\tfullName() {\n\t\treturn `${this.firstName} ${this.lastName}`;\n\t}\n\n\t// Refresh all the properties of this class\n\tasync refresh() {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `drivers/${this.id}`,\n\t\t\tparams: {\n\t\t\t\trisk: true,\n\t\t\t\taddress: true,\n\t\t\t\tfleets: true,\n\t\t\t\tvehicleCount: true,\n\t\t\t\tdistance: true,\n\t\t\t\tpoints: true,\n\t\t\t\tfiles: true,\n\t\t\t\tcontact: true,\n\t\t\t\toccupation: true,\n\t\t\t},\n\t\t});\n\n\t\traw.api = this.api;\n\t\tObject.assign(this, raw);\n\t}\n\n\tasync delete() {\n\t\tthis._checkId();\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `drivers/${this.id}`,\n\t\t});\n\t}\n\n\tasync save(fields: Object = {}) {\n\t\tthis._checkId();\n\n\t\tawait this._save({\n\t\t\tendpoint: `drivers/${this.id}`,\n\t\t\tfields: fields,\n\t\t\texclude: [\"fleets\", \"createdAt\"],\n\t\t});\n\t}\n\n\tasync update({ persist = false, fields = {} }: { persist?: boolean; fields?: Object }) {\n\t\tawait this._update({\n\t\t\tendpoint: `drivers/${this.id}`,\n\t\t\tpersist: persist,\n\t\t\tfields: fields,\n\t\t\texclude: [\"fleets\", \"createdAt\"],\n\t\t});\n\t}\n\n\tasync listVehicles(): Promise<Vehicle[]> {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `drivers/${this.id}/vehicles`,\n\t\t});\n\t\treturn raw.map((vehicle: any) => {\n\t\t\tlet instance = new DriverVehicle(vehicle);\n\t\t\tinstance.api = this.api;\n\t\t\treturn instance;\n\t\t});\n\t}\n\n\tgetDisplay() {\n\t\treturn this.fullName();\n\t}\n\n\ttelematicsId() {\n\t\treturn this.sourceId;\n\t}\n\n\tasync listBillingAccounts(primaryOnly: boolean = false): Promise<BillingAccount[]> {\n\t\tthis._checkId();\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `drivers/${this.id}/billing-accounts`,\n\t\t});\n\n\t\treturn raw.map((billingAccount: any) => {\n\t\t\tlet instance = new BillingAccount(billingAccount);\n\t\t\tinstance.api = this.api;\n\t\t\treturn instance;\n\t\t});\n\t}\n\n\tasync getBillingAccount({ id }: { id: string }) {\n\t\tthis._checkId();\n\n\t\tif (!id) {\n\t\t\tthrow new Error(\"Billing account id is required\");\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `drivers/${this.id}/billing-accounts/${id}`,\n\t\t});\n\n\t\tlet instance = new BillingAccount(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n\n\tasync listVehiclePolicies({ vehicleId }: { vehicleId?: string }): Promise<Policy[]> {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `policy`,\n\t\t\tparams: {\n\t\t\t\tdrvIds: vehicleId,\n\t\t\t},\n\t\t});\n\n\t\treturn raw.map((policy: any) => {\n\t\t\tlet instance = new Policy(policy);\n\t\t\tinstance.api = this.api;\n\t\t\treturn instance;\n\t\t});\n\t}\n\n\tasync getPrimaryBillingAccount() {\n\t\tlet res = await this.listBillingAccounts(true);\n\n\t\tif (res.length > 0 && res[0].id) {\n\t\t\treturn await this.getBillingAccount({ id: res[0].id });\n\t\t}\n\t}\n\n\tasync createBillingAccount({ account }: { account: BillingAccount }) {\n\t\tthis._checkId();\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `drivers/${this.id}/billing-accounts`,\n\t\t\tparams: account,\n\t\t});\n\n\t\tlet instance = new BillingAccount(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n\n\tasync charge({ amount, event }: { amount?: number; event?: BillingEvent }) {\n\t\tif (!amount && !event) {\n\t\t\tthrow new Error(\"Either amount or event is required\");\n\t\t}\n\n\t\tif (!event) {\n\t\t\tevent = new BillingEvent({\n\t\t\t\tamount: amount,\n\t\t\t\tmessage: \"Charge\",\n\t\t\t\ttype: \"other\",\n\t\t\t});\n\t\t}\n\n\t\tthis._checkId();\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `drivers/${this.id}/billing-events`,\n\t\t\tparams: event,\n\t\t});\n\n\t\tlet instance = new BillingEvent(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n\n\tasync *listCharges({ eventType, eventStatus, maxRecords }: { eventType?: string; eventStatus?: string; maxRecords?: number }) {\n\t\tthis._checkId();\n\t\tlet params: any = {};\n\t\tif (eventType) {\n\t\t\tparams.type = eventType;\n\t\t}\n\t\tif (eventStatus) {\n\t\t\tparams.status = eventStatus;\n\t\t}\n\n\t\tlet count = 0;\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `drivers/${this.id}/billing-events`,\n\t\t\tparams: params,\n\t\t})) {\n\t\t\tif (maxRecords && count >= maxRecords) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlet instance = new BillingEvent(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t\tcount += 1;\n\t\t}\n\t}\n\n\tasync *listPolicies({ looseMatch = true, isActivePolicy }: { looseMatch?: boolean; isActivePolicy?: boolean }): AsyncGenerator<Policy> {\n\t\tlet params: any = {};\n\n\t\tparams.driverIds = this.id;\n\t\tparams.driverLooseMatch = looseMatch;\n\n\t\tif (isActivePolicy) {\n\t\t\tparams.isActivePolicy = isActivePolicy;\n\t\t}\n\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `policy`,\n\t\t\tparams: params,\n\t\t})) {\n\t\t\tlet instance = new Policy(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t}\n\t}\n\n\tasync createPolicy({ policy }: { policy?: Policy }) {\n\t\tif (!policy) {\n\t\t\tpolicy = new Policy({\n\t\t\t\tpolicyGroup: \"d\",\n\t\t\t});\n\t\t}\n\t\tpolicy.api = this.api;\n\t\treturn await policy.create({\n\t\t\tapi: this.api as APIHandlerAuth,\n\t\t\trecordId: this.id!,\n\t\t});\n\t}\n}\n","import { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\nimport { PrivateApiHandler } from \"../../custom\";\nimport { Driver } from \"../../drivers\";\nimport { DriverBase } from \"../../drivers/interface\";\nimport { Vehicle } from \"../../vehicles/rv\";\nimport { RegisteredVehicleBase } from \"../../vehicles/rv/interface\";\nimport { FleetDriverVehicleAssignementBase } from \"./interface\";\n\nexport class FleetDriverVehicleAssignment extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tisActive?: boolean;\n\texpiresAt?: Date;\n\tcreatedAt?: Date;\n\tsourceId?: string;\n\tassigned?: boolean;\n\tdriver?: Driver;\n\tregisteredVehicle?: Vehicle;\n\tconstructor(assignment: FleetDriverVehicleAssignementBase) {\n\t\tsuper();\n\t\tObject.assign(this, assignment);\n\t}\n\n\tid() {\n\t\treturn [this.driver?.id, this.registeredVehicle?.id];\n\t}\n\n\ttelemaicsId() {\n\t\treturn this.sourceId;\n\t}\n}\n","import { Fleet } from \"..\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\nimport { PrivateApiHandler } from \"../../custom\";\nimport { Driver } from \"../../drivers\";\nimport { FleetsBase } from \"../interface\";\nimport { FleetDriverBase } from \"./interface\";\n\nexport class FleetDriver extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tfleetId?: string;\n\n\tisVehicleManager?: boolean;\n\tisDriverManager?: boolean;\n\tisBillingManager?: boolean;\n\tisActive?: boolean;\n\texpiresAt?: Date;\n\tcreatedAt?: Date;\n\tsourceId?: string;\n\tdriver?: Driver;\n\n\tconstructor(assignment: FleetDriverBase) {\n\t\tsuper();\n\t\tObject.assign(this, assignment);\n\t}\n\n\tid() {\n\t\treturn this.driver?.id;\n\t}\n\n\tfullName() {\n\t\treturn this.driver?.fullName();\n\t}\n\n\ttelemaicsId() {\n\t\treturn this.sourceId;\n\t}\n\n\tasync getFleet(): Promise<Fleet | null> {\n\t\tif (!this.fleetId) {\n\t\t\treturn null;\n\t\t}\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `fleets/${this.fleetId}`,\n\t\t});\n\n\t\tlet instance = new Fleet(raw);\n\n\t\tif (this.api) {\n\t\t\tinstance.api = this.api;\n\t\t}\n\t\treturn instance;\n\t}\n}\n","import { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\nimport { PrivateApiHandler } from \"../custom\";\nimport { Policy } from \"../policy\";\nimport { RiskBase } from \"../risk/interface\";\nimport { LANG } from \"../types\";\nimport { FleetDriverVehicleAssignment } from \"./assigned\";\nimport { FleetDriver } from \"./drivers\";\nimport { FleetsBase } from \"./interface\";\nimport { FleetVehicle } from \"./vehicles\";\n\nexport class Fleet extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tapiPath?: string;\n\texternalId?: string;\n\tdisplay?: string;\n\tdescription?: string;\n\ttags?: string;\n\tisActive?: boolean;\n\trequiresDriverAssignment?: boolean;\n\tbasePremiumBillingProc?: string;\n\tratesBillingProc?: string;\n\tparentId?: string;\n\tid?: string;\n\tcreatedAt?: Date;\n\ttranslations?: Object;\n\trisk?: RiskBase;\n\tvehicleCount?: number;\n\tdriverCount?: number;\n\n\tconstructor(fleet: FleetsBase) {\n\t\tsuper();\n\t\tObject.assign(this, fleet);\n\t}\n\n\tprivate getTranslations({ key, lang }: { key: string; lang: string }) {\n\t\tif (!lang) {\n\t\t\treturn this[key as keyof FleetsBase];\n\t\t}\n\n\t\tif (!LANG.includes(lang)) {\n\t\t\tthrow new Error(`${lang} is not a valid language code`);\n\t\t}\n\n\t\tconst val = (this.translations as any)?.[key]?.[lang];\n\n\t\tif (val) {\n\t\t\treturn val;\n\t\t}\n\n\t\treturn this[key as keyof FleetsBase];\n\t}\n\n\tgetDisplay({ lang }: { lang: string }) {\n\t\treturn this.getTranslations({ key: \"display\", lang });\n\t}\n\n\tgetDescription({ lang }: { lang: string }) {\n\t\treturn this.getTranslations({ key: \"description\", lang });\n\t}\n\n\thasParent() {\n\t\treturn !!this.parentId;\n\t}\n\n\tgetTags() {\n\t\treturn this.tags?.split(\",\") || [];\n\t}\n\n\tprivate checkId() {\n\t\tif (!this.id) {\n\t\t\tthrow new Error(\"Fleet ID is required\");\n\t\t}\n\t}\n\n\tasync refresh() {\n\t\tthis.checkId();\n\t\tconst fleet = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `/fleets/${this.id}`,\n\t\t});\n\t\tObject.assign(this, fleet);\n\t}\n\n\tasync delete() {\n\t\tthis.checkId();\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `/fleets/${this.id}`,\n\t\t});\n\t}\n\n\tasync save(fields: Object = {}) {\n\t\tthis.checkId();\n\t\treturn await this._save({\n\t\t\tendpoint: `/fleets/${this.id}`,\n\t\t\tfields,\n\t\t\texclude: [\"vehicleType\"],\n\t\t});\n\t}\n\n\tasync update({ persist, fields }: { persist?: boolean; fields?: Object }) {\n\t\tif (persist) {\n\t\t\treturn await this.save(fields);\n\t\t}\n\n\t\treturn await this._update({ fields });\n\t}\n\n\tasync getParent() {\n\t\tif (!this.hasParent()) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `/fleets/${this.parentId}`,\n\t\t});\n\n\t\tlet instance = new Fleet(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n\n\t/**\n\t * Driver operations\n\t */\n\n\tasync addDriver({\n\t\tdriverId,\n\t\tisVehicleManager = false,\n\t\tisDriverManager = false,\n\t\tisBillingManager = false,\n\t\texpiresAt,\n\t\tisActive = true,\n\t\tvehicleIds,\n\t\tvehicleExpiresAt,\n\t}: {\n\t\tdriverId: string;\n\t\tisVehicleManager?: boolean;\n\t\tisDriverManager?: boolean;\n\t\tisBillingManager?: boolean;\n\t\texpiresAt?: Date;\n\t\tisActive?: boolean;\n\t\tvehicleIds?: string[];\n\t\tvehicleExpiresAt?: Date[] | Date;\n\t}) {\n\t\tif (!vehicleIds) {\n\t\t\tvehicleIds = [];\n\t\t}\n\n\t\tlet data: any = {\n\t\t\tdriverId,\n\t\t\tisVehicleManager,\n\t\t\tisDriverManager,\n\t\t\tisBillingManager,\n\t\t\tisActive,\n\t\t};\n\t\tif (expiresAt?.toISOString()) {\n\t\t\tdata.expiresAt = expiresAt.toISOString();\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers`,\n\t\t\tdata,\n\t\t});\n\n\t\tlet fleetDriver = new FleetDriver(raw);\n\t\tfleetDriver.api = this.api;\n\n\t\tif (!vehicleIds.length) {\n\t\t\treturn fleetDriver;\n\t\t}\n\n\t\ttry {\n\t\t\t//loop throught vehicleIds\n\t\t\tif (vehicleExpiresAt instanceof Date || !vehicleExpiresAt) {\n\t\t\t\tfor (let vehicleId of vehicleIds) {\n\t\t\t\t\tlet data: any = {};\n\t\t\t\t\tif (vehicleExpiresAt?.toISOString()) {\n\t\t\t\t\t\tdata.expiresAt = vehicleExpiresAt.toISOString();\n\t\t\t\t\t}\n\t\t\t\t\tawait this.api.request({\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}/vehicles/${vehicleId}`,\n\t\t\t\t\t\tdata: data,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn fleetDriver;\n\t\t\t}\n\n\t\t\tvehicleIds.forEach(async (vehicleId, index) => {\n\t\t\t\tlet data: any = {};\n\t\t\t\tif (vehicleExpiresAt[index]?.toISOString()) {\n\t\t\t\t\tdata.expiresAt = vehicleExpiresAt[index].toISOString();\n\t\t\t\t}\n\n\t\t\t\tawait this.api.request({\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}/vehicles/${vehicleId}`,\n\t\t\t\t\tdata: data,\n\t\t\t\t});\n\t\t\t});\n\t\t} catch (e) {\n\t\t\t//if error, remove driver\n\t\t\tawait this.api.request({\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}`,\n\t\t\t});\n\t\t\tthrow e;\n\t\t}\n\t\treturn fleetDriver;\n\t}\n\n\tasync removeDriver({ driverId }: { driverId: string }) {\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}`,\n\t\t});\n\t}\n\n\tasync getDriver() {\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers`,\n\t\t});\n\n\t\tlet fleetDriver = new FleetDriver(raw);\n\t\tfleetDriver.api = this.api;\n\t\treturn fleetDriver;\n\t}\n\n\tasync updateDriver({\n\t\tdriverId,\n\t\tisVehicleManager,\n\t\tisDriverManager,\n\t\tisBillingManager,\n\t\texpiresAt,\n\t\tisActive,\n\t}: {\n\t\tdriverId: string;\n\t\tisVehicleManager?: boolean;\n\t\tisDriverManager?: boolean;\n\t\tisBillingManager?: boolean;\n\t\texpiresAt?: Date;\n\t\tisActive?: boolean;\n\t}) {\n\t\tlet data: any = {};\n\t\tif (isVehicleManager !== undefined) {\n\t\t\tdata.isVehicleManager = isVehicleManager;\n\t\t}\n\t\tif (isDriverManager !== undefined) {\n\t\t\tdata.isDriverManager = isDriverManager;\n\t\t}\n\t\tif (isBillingManager !== undefined) {\n\t\t\tdata.isBillingManager = isBillingManager;\n\t\t}\n\t\tif (expiresAt?.toISOString()) {\n\t\t\tdata.expiresAt = expiresAt.toISOString();\n\t\t}\n\t\tif (isActive !== undefined) {\n\t\t\tdata.isActive = isActive;\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}`,\n\t\t\tdata,\n\t\t});\n\n\t\tlet fleetDriver = new FleetDriver(raw);\n\t\tfleetDriver.api = this.api;\n\t\treturn fleetDriver;\n\t}\n\n\tasync *listDrivers(): AsyncIterableIterator<FleetDriver> {\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `/fleets/${this.id}/drivers`,\n\t\t})) {\n\t\t\tlet fleetDriver = new FleetDriver(raw);\n\t\t\tfleetDriver.api = this.api;\n\t\t\tyield fleetDriver;\n\t\t}\n\t}\n\n\t/**\n\t * Vehicle operations\n\t */\n\n\tasync addVehicle({ vehicleId, isActive = true, isOpenToAll = false }: { vehicleId: string; isActive?: boolean; isOpenToAll?: boolean }) {\n\t\tlet data: any = {\n\t\t\tvehicleId,\n\t\t\tisActive,\n\t\t\tisOpenToAll,\n\t\t};\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `/fleets/${this.id}/vehicles`,\n\t\t\tdata,\n\t\t});\n\n\t\tlet fleetVehicle = new FleetVehicle(raw);\n\t\tfleetVehicle.api = this.api;\n\t\treturn fleetVehicle;\n\t}\n\n\tasync removeVehicle({ vehicleId }: { vehicleId: string }) {\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `/fleets/${this.id}/vehicles/${vehicleId}`,\n\t\t});\n\t}\n\n\tasync updateVehicle({ vehicleId, isActive, isOpenToAll }: { vehicleId: string; isActive?: boolean; isOpenToAll?: boolean }) {\n\t\tlet data: any = {};\n\t\tif (isActive !== undefined) {\n\t\t\tdata.isActive = isActive;\n\t\t}\n\t\tif (isOpenToAll !== undefined) {\n\t\t\tdata.isOpenToAll = isOpenToAll;\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `/fleets/${this.id}/vehicles/${vehicleId}`,\n\t\t\tdata,\n\t\t});\n\n\t\tlet fleetVehicle = new FleetVehicle(raw);\n\t\tfleetVehicle.api = this.api;\n\t\treturn fleetVehicle;\n\t}\n\n\tasync *listVehicles(): AsyncIterableIterator<FleetVehicle> {\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `/fleets/${this.id}/vehicles`,\n\t\t})) {\n\t\t\tlet fleetVehicle = new FleetVehicle(raw);\n\t\t\tfleetVehicle.api = this.api;\n\t\t\tyield fleetVehicle;\n\t\t}\n\t}\n\n\t/**\n\t * driver to vehicle assignment operations\n\t */\n\tasync addDriverToVehicle({ driverId, vehicleId, expiresAt, isActive = true }: { driverId: string; vehicleId: string; expiresAt?: Date; isActive?: boolean }) {\n\t\tlet data: any = {\n\t\t\tdriverId,\n\t\t\tvehicleId,\n\t\t\tisActive,\n\t\t};\n\n\t\tif (expiresAt?.toISOString()) {\n\t\t\tdata.expiresAt = expiresAt.toISOString();\n\t\t}\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}/vehicles`,\n\t\t\tdata,\n\t\t});\n\n\t\tlet instance = new FleetDriverVehicleAssignment(raw);\n\t\tinstance.api = this.api;\n\t\treturn instance;\n\t}\n\n\tasync removeDriverFromVehicle({ driverId, vehicleId }: { driverId: string; vehicleId: string }) {\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}/vehicles/${vehicleId}`,\n\t\t});\n\t}\n\n\tasync updateDriverVehicleAssignment({ driverId, vehicleId, expiresAt, isActive }: { driverId: string; vehicleId: string; expiresAt?: Date; isActive?: boolean }) {\n\t\tlet data: any = {};\n\t\tif (expiresAt?.toISOString()) {\n\t\t\tdata.expiresAt = expiresAt.toISOString();\n\t\t}\n\t\tif (isActive !== undefined) {\n\t\t\tdata.isActive = isActive;\n\t\t}\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}/vehicles/${vehicleId}`,\n\t\t\tdata,\n\t\t});\n\t}\n\n\tasync *listDriverVehicleAssignments({\n\t\tdriverId,\n\t\tincludeUnassigned = true,\n\t}: {\n\t\tdriverId: string;\n\t\tincludeUnassigned?: boolean;\n\t}): AsyncIterableIterator<FleetDriverVehicleAssignment> {\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `/fleets/${this.id}/drivers/${driverId}/vehicles`,\n\t\t\tparams: {\n\t\t\t\tincludeUnassigned,\n\t\t\t},\n\t\t})) {\n\t\t\tlet instance = new FleetDriverVehicleAssignment(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t}\n\t}\n\n\t/**\n\t * policy operations\n\t */\n\n\tasync *listPolicies(): AsyncIterableIterator<Policy> {\n\t\tfor await (let raw of this.api.batchFetch({\n\t\t\tendpoint: `/policy`,\n\t\t\tparams: {\n\t\t\t\tfleetId: this.id,\n\t\t\t},\n\t\t})) {\n\t\t\tlet instance = new Policy(raw);\n\t\t\tinstance.api = this.api;\n\t\t\tyield instance;\n\t\t}\n\t}\n}\n","import { Fleet } from \"..\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\nimport { PrivateApiHandler } from \"../../custom\";\nimport { Driver } from \"../../drivers\";\nimport { Vehicle } from \"../../vehicles/rv\";\nimport { FleetsBase } from \"../interface\";\nimport { FleetVehicleBase } from \"./interface\";\n\nexport class FleetVehicle extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tisActive?: boolean;\n\tisOpenToAll?: boolean;\n\tsourceId?: string;\n\tcreatedAt?: Date;\n\tregisteredVehicle?: Vehicle;\n\n\tconstructor(assignment: FleetVehicleBase) {\n\t\tsuper();\n\t\tObject.assign(this, assignment);\n\t}\n\n\tid() {\n\t\treturn this.registeredVehicle?.id;\n\t}\n}\n","import { Driver } from \"./drivers\";\nimport { BillingAccount } from \"./billing/accounts\";\nimport { BillingEvent } from \"./billing/events\";\nimport { Policy } from \"./policy\";\nimport { DriverVehicle } from \"./vehicles/drv\";\nimport { Vehicle } from \"./vehicles/rv\";\nimport { VehicleType } from \"./vehicles/v\";\nimport { Fleet } from \"./fleets\";\n\nlet models = {\n\tDriver,\n\tBillingAccount,\n\tBillingEvent,\n\tPolicy,\n\tDriverVehicle,\n\tVehicle,\n\tVehicleType,\n\tFleet,\n};\n\nexport default models;\n","import { Approval } from \"./interface\";\n\nexport class PolicyApproval {\n\tapprovedAt?: Date;\n\tautoApproved?: boolean;\n\tapprovedBy?: null;\n\n\tconstructor(approval: Approval) {\n\t\tObject.assign(this, approval);\n\t}\n\n    isApproved() {\n        return !!this.approvedAt || this.autoApproved === true;\n    }\n}\n","import { Cancellation } from \"./interface\";\n\nexport class PolicyCancellation {\n\tcancelledAt?: Date;\n\tmessage?: string;\n\n\tconstructor(cancellation: Cancellation) {\n\t\tObject.assign(this, cancellation);\n\t}\n\n\tisCancelled() {\n\t\treturn !!this.cancelledAt;\n\t}\n}\n","import { Driver } from \"./interface\";\n\nexport class PolicyDriver {\n\tesignature?: string;\n\tesignatureFingerprint?: Object;\n\tagreedAt?: Date;\n\n\tconstructor(driver: Driver) {\n\t\tObject.assign(this, driver);\n\t}\n\n\tisAgreed() {\n\t\treturn !!this.agreedAt;\n\t}\n}\n","import { Duration } from \"./interface\";\n\nexport class PolicyDuration {\n\tstart?: Date;\n\tend?: Date;\n\tgracePeriodMins?: number;\n\n\tconstructor(duration: Duration) {\n\t\tObject.assign(this, duration);\n\t}\n\n\tisExpired() {\n\t\t// Check if end is not null and has not passed\n\t\t// Add grace period to end date\n\t\treturn !!this.end && this.end.getTime() + (this.gracePeriodMins || 0) * 60 * 1000 < Date.now();\n\t}\n}\n","export enum policyGroup {\n\tD = \"d\",\n\tDRV = \"drv\",\n\tRV = \"rv\",\n\tFD = \"fd\",\n\tFDRV = \"fdrv\",\n\tFRV = \"frv\",\n}\n","import { Approval } from \"./approval/interface\";\nimport { Cancellation } from \"./cancellation/interface\";\nimport { Config } from \"./config/interface\";\nimport { Fees } from \"./fees/interface\";\nimport { Driver } from \"./driver/interface\";\nimport { Duration } from \"./duration/interface\";\nimport { Excess } from \"./excess/interface\";\nimport { Extras } from \"./extras/interface\";\nimport { Premium } from \"./premium/interface\";\nimport { Contribution } from \"./contribution/interface\";\nimport { Final } from \"./final/interface\";\nimport { Issuer } from \"./issuer/interface\";\nimport { NoClaims } from \"./noclaims/interface\";\nimport { Rates } from \"./rates/interface\";\nimport { Rewards } from \"./rewards/interface\";\nimport { Telematics } from \"./telematics/interface\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../utils/api\";\nimport { PolicyBase } from \"./interface\";\nimport { PolicyApproval } from \"./approval\";\nimport { PolicyCancellation } from \"./cancellation\";\nimport { PolicyDriver } from \"./driver\";\nimport { PolicyDuration } from \"./duration\";\nimport { PrivateApiHandler } from \"../custom\";\nimport { policyGroup } from \"./enums/group\";\n\nexport class Policy extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tapiPath?: string;\n\tisActivePolicy?: boolean;\n\tsumInsured?: number;\n\tcanRenew?: boolean;\n\tcover?: string[];\n\tmaxPassengers?: number;\n\tid?: string;\n\tcreatedAt?: Date;\n\tpolicyCertificateLoc?: string;\n\tapproval?: PolicyApproval;\n\tcancellation?: PolicyCancellation;\n\tconfig?: Config;\n\tcontribution?: Contribution;\n\tdriver?: PolicyDriver;\n\tduration?: PolicyDuration;\n\texcess?: Excess;\n\textras?: Extras;\n\tfees?: Fees;\n\tfinal?: Final;\n\tissuer?: Issuer;\n\tnoClaims?: NoClaims;\n\tpremium?: Premium;\n\trates?: Rates;\n\trewards?: Rewards;\n\ttelematics?: Telematics;\n\tpolicyGroup?: string;\n\n\tconstructor(policy: PolicyBase) {\n\t\tsuper();\n\t\tpolicy.approval = policy.approval ? new PolicyApproval(policy.approval) : undefined;\n\t\tpolicy.cancellation = policy.cancellation ? new PolicyCancellation(policy.cancellation) : undefined;\n\t\tpolicy.driver = policy.driver ? new PolicyDriver(policy.driver) : undefined;\n\t\tpolicy.duration = policy.duration ? new PolicyDuration(policy.duration) : undefined;\n\t\tObject.assign(this, policy);\n\t}\n\n\tisCancelled() {\n\t\treturn this.cancellation?.isCancelled();\n\t}\n\n\tisApproved() {\n\t\treturn this.approval?.isApproved();\n\t}\n\n\tisExpired() {\n\t\treturn this.duration?.isExpired();\n\t}\n\n\tisDriverAgreed() {\n\t\treturn this.driver?.isAgreed();\n\t}\n\n\tisLive() {\n\t\treturn this.isActivePolicy && this.isApproved() && !this.isCancelled() && !this.isExpired() && this.isDriverAgreed();\n\t}\n\n\tratePerKm(): number | undefined {\n\t\tif (!this.rates?.enabled) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.final?.rates?.value;\n\t}\n\n\tratePerMile(): number | undefined {\n\t\tif (!this.rates?.enabled) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.final?.rates?.value ? this.final?.rates?.value * 1.60934 : undefined;\n\t}\n\n\tpremiumAmount(): number | undefined {\n\t\treturn this.final?.premium?.value;\n\t}\n\n\tprivate _checkId() {\n\t\tif (!this.id) {\n\t\t\tthrow new Error(\"ID must be set\");\n\t\t}\n\t}\n\n\tasync refesh() {\n\t\tthis._checkId();\n\t\tconst policy = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `policy/${this.id}`,\n\t\t});\n\t\tpolicy.approval = policy.approval ? new PolicyApproval(policy.approval) : undefined;\n\t\tpolicy.cancellation = policy.cancellation ? new PolicyCancellation(policy.cancellation) : undefined;\n\t\tpolicy.driver = policy.driver ? new PolicyDriver(policy.driver) : undefined;\n\t\tpolicy.duration = policy.duration ? new PolicyDuration(policy.duration) : undefined;\n\t\tObject.assign(this, policy);\n\t}\n\n\tasync delete() {\n\t\tthis._checkId();\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `policy/${this.id}`,\n\t\t});\n\t}\n\n\tasync save(fields: Object) {\n\t\tthis._checkId();\n\t\treturn await this._save({\n\t\t\tendpoint: `policy/${this.id}`,\n\t\t\tfields,\n\t\t});\n\t}\n\n\tasync update(persist: boolean = false, fields: Object) {\n\t\tthis._update({\n\t\t\tendpoint: `policy/${this.id}`,\n\t\t\tfields,\n\t\t\tpersist,\n\t\t});\n\t}\n\n\tasync create({ api, recordId, driverId, vehicleId }: { api: APIHandlerAuth; recordId: string; driverId?: string; vehicleId?: string }): Promise<Policy> {\n\t\tlet params = {};\n\n\t\tif (this.policyGroup === policyGroup.D) {\n\t\t\tif (driverId && recordId !== driverId) {\n\t\t\t\trecordId = driverId;\n\t\t\t}\n\t\t} else if (this.policyGroup === policyGroup.DRV) {\n\t\t\t//\n\t\t} else if (this.policyGroup === policyGroup.RV) {\n\t\t\t//\n\t\t} else if (this.policyGroup === policyGroup.FD) {\n\t\t\tif (!driverId) {\n\t\t\t\tthrow new Error(\"Driver ID must be supplied for FD policy\");\n\t\t\t}\n\n\t\t\tif (recordId == driverId) {\n\t\t\t\tthrow new Error(\"RecordId (fleet id) must not be the same as driverId for FD policy\");\n\t\t\t}\n\n\t\t\tparams = {\n\t\t\t\tdriverId,\n\t\t\t};\n\t\t} else if (this.policyGroup === policyGroup.FDRV) {\n\t\t\tif (!driverId) {\n\t\t\t\tthrow new Error(\"Driver ID must be supplied for FDRV policy\");\n\t\t\t}\n\t\t\tif (!vehicleId) {\n\t\t\t\tthrow new Error(\"Vehicle ID must be supplied for FDRV policy\");\n\t\t\t}\n\t\t\tparams = {\n\t\t\t\tdriverId,\n\t\t\t\tvehicleId,\n\t\t\t};\n\n\t\t\tif (recordId == driverId || recordId == vehicleId) {\n\t\t\t\tthrow new Error(\"RecordId (fleet id) must not be the same as driverId or vehicleId for FDRV policy\");\n\t\t\t}\n\t\t} else if (this.policyGroup === policyGroup.FRV) {\n\t\t\tif (!vehicleId) {\n\t\t\t\tthrow new Error(\"Vehicle ID must be supplied for FRV policy\");\n\t\t\t}\n\n\t\t\tif (recordId == vehicleId) {\n\t\t\t\tthrow new Error(\"RecordId (fleet id) must not be the same as vehicleId for FRV policy\");\n\t\t\t}\n\n\t\t\tparams = {\n\t\t\t\tvehicleId,\n\t\t\t};\n\t\t}\n\n\t\tconst raw = await api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `policy/${recordId}`,\n\t\t\tparams,\n\t\t\tdata: this,\n\t\t});\n\n\t\traw.approval = raw.approval ? new PolicyApproval(raw.approval) : undefined;\n\t\traw.cancellation = raw.cancellation ? new PolicyCancellation(raw.cancellation) : undefined;\n\t\traw.driver = raw.driver ? new PolicyDriver(raw.driver) : undefined;\n\t\traw.duration = raw.duration ? new PolicyDuration(raw.duration) : undefined;\n\t\traw.api = api;\n\n\t\tObject.assign(this, raw);\n\t\treturn this;\n\t}\n\n\tasync driverApprove({ refresh = true }: { refresh?: boolean }) {\n\t\tthis._checkId();\n\n\t\tlet body: any = {\n\t\t\tdriver: {\n\t\t\t\tagreedAt: new Date().toISOString(),\n\t\t\t},\n\t\t};\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `policies/${this.id}`,\n\t\t\tdata: body,\n\t\t});\n\t\tif (refresh) {\n\t\t\tawait this.refesh();\n\t\t}\n\t}\n\n\tasync internalApprove({ refresh = true, approvedById }: { refresh?: boolean; approvedById?: string }) {\n\t\tthis._checkId();\n\n\t\tlet body: any = {\n\t\t\tapproval: {\n\t\t\t\tapprovedAt: new Date().toISOString(),\n\t\t\t},\n\t\t};\n\n\t\tif (approvedById) {\n\t\t\tbody.approval.approvedBy = approvedById;\n\t\t}\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `policies/${this.id}`,\n\t\t\tdata: body,\n\t\t});\n\t\tif (refresh) {\n\t\t\tawait this.refesh();\n\t\t}\n\t}\n\n\tasync cancel({ refresh = true, message }: { refresh?: boolean; message?: string }) {\n\t\tthis._checkId();\n\n\t\tlet body: any = {\n\t\t\tcancellation: {\n\t\t\t\tcancelledAt: new Date().toISOString(),\n\t\t\t},\n\t\t};\n\n\t\tif (message) {\n\t\t\tbody.cancellation.message = message;\n\t\t}\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"PATCH\",\n\t\t\tendpoint: `policies/${this.id}`,\n\t\t\tdata: body,\n\t\t});\n\t\tif (refresh) {\n\t\t\tawait this.refesh();\n\t\t}\n\t}\n}\n","export enum regions {\n\teu1 = \"eu-1\",\n\tdev_eu1 = \"dev-eu-1\",\n\tme1 = \"me-1\",\n\tus1 = \"us-1\",\n}\n\nexport let LANG = [\"en\", \"ar\", \"fr\", \"es\"];\n","import { DriverRegisteredVehicleBase } from \"./interface\";\nimport { RiskBase } from \"../../risk/interface\";\nimport { PolicyBase } from \"../../policy/interface\";\nimport { DriverBase } from \"../../drivers/interface\";\nimport { RegisteredVehicleBase } from \"../rv/interface\";\nimport { Vehicle } from \"../rv\";\nimport { PrivateApiHandler } from \"../../custom\";\n\nexport class DriverVehicle extends PrivateApiHandler {\n\tdriverId?: string;\n\tapiPath?: string;\n\texternalId?: string;\n\tdisplayName?: string;\n\tisApproved?: boolean;\n\tapprovedAt?: Date;\n\tisOwner?: boolean;\n\tisDefault?: boolean;\n\tisActive?: boolean;\n\tisPrimaryDriver?: boolean;\n\texpiresAt?: Date;\n\trisk?: RiskBase;\n\tid?: string;\n\tsourceId?: string;\n\tcreatedAt?: Date;\n\tproofOfOwnershipLoc?: string;\n\tdistance3m?: number;\n\tpolicies?: PolicyBase[];\n\tdriver?: DriverBase;\n\tregisteredVehicle?: Vehicle;\n\n\tconstructor(vehicle: DriverRegisteredVehicleBase) {\n\t\tsuper();\n\t\tvehicle.registeredVehicle = vehicle.registeredVehicle ? new Vehicle(vehicle.registeredVehicle) : undefined;\n\t\tObject.assign(this, vehicle);\n\t}\n\n\tprivate _checkId() {\n\t\tif (!this.id) {\n\t\t\tthrow new Error(\"ID must be set\");\n\t\t}\n\t}\n\n\tgetDisplay() {\n\t\tif (this.registeredVehicle) {\n\t\t\treturn `${this.displayName} ${this.registeredVehicle?.getDisplay()}`;\n\t\t} else {\n\t\t\treturn this.displayName || \"Unknown\";\n\t\t}\n\t}\n\n\ttelematicsId() {\n\t\treturn this.sourceId;\n\t}\n\n\tasync create({ driverId, registeredVehicleId }: { driverId: string; registeredVehicleId?: string }) {\n\t\tif (!registeredVehicleId) {\n\t\t\tif (!this.registeredVehicle?.regPlate || !this.registeredVehicle?.vehicle?.id) {\n\t\t\t\tthrow new Error(\"To created a DRV either registeredVehicleId should be provided or driverVehicle.registeredVehicle must have regPlate and registeredVehicle.vehicle (vehicle type) must have an ID\");\n\t\t\t}\n\t\t}\n\t\tlet data = {\n\t\t\t...this\n\t\t}\n\n\t\tif (registeredVehicleId) {\n\t\t\tdata = {\n\t\t\t\t...data,\n\t\t\t\tregisteredVehicleId: registeredVehicleId\n\t\t\t}\n\t\t\t//remove the registeredVehicle object if it exists\n\t\t\tdelete data.registeredVehicle;\n\t\t}\n\n\t\treturn await this.api.request({\n\t\t\tmethod: \"POST\",\n\t\t\tendpoint: `drivers/${driverId}/vehicles`,\n\t\t\tdata: {\n\t\t\t\t...this,\n\t\t\t\tregisteredVehicleId: registeredVehicleId,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync refresh() {\n\t\tthis._checkId();\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `drivers/${this.driverId}/vehicles/${this.id}`,\n\t\t});\n\n\t\traw.registeredVehicle = raw.registeredVehicle ? new Vehicle(raw.registeredVehicle) : undefined;\n\t\traw.api = this.api;\n\n\t\tObject.assign(this, raw);\n\t}\n\n\tasync delete() {\n\t\tthis._checkId();\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `drivers/${this.driverId}/vehicles/${this.id}`,\n\t\t});\n\t}\n\n\tasync save(fields: Object = {}) {\n\t\tthis._checkId();\n\n\t\tawait this._save({\n\t\t\tendpoint: `drivers/${this.driverId}/vehicles/${this.id}`,\n\t\t\tfields: fields,\n\t\t\texclude: [\"driverId\", \"vehicle\"],\n\t\t});\n\t}\n\n\tasync update({ persist = false, fields = {} }: { persist?: boolean; fields?: Object }) {\n\t\tawait this._update({\n\t\t\tendpoint: `drivers/${this.driverId}/vehicles/${this.id}`,\n\t\t\tpersist: persist,\n\t\t\tfields: fields,\n\t\t\texclude: [\"driverId\", \"vehicle\"],\n\t\t});\n\t}\n}\n","import { RiskBase } from \"../../risk/interface\";\nimport { RegisteredVehicleBase } from \"./interface\";\nimport { DriverRegisteredVehicleBase } from \"../drv/interface\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\nimport { PrivateApiHandler } from \"../../custom\";\nimport { VehicleTypeBase } from \"../v/interface\";\nimport { PolicyBase } from \"../../policy/interface\";\nimport { VehicleType } from \"../v\";\nimport { DriverVehicle } from \"../drv\";\nimport { Policy } from \"../../policy\";\n\nexport class Vehicle extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tapiPath?: string;\n\texternalId?: string;\n\tregPlate?: string;\n\tvin?: string;\n\tyear?: number;\n\tpreowned?: boolean;\n\tisApproved?: boolean;\n\tapprovedAt?: Date;\n\tonRoadParking?: boolean;\n\tmileageKm?: number;\n\tengineLitres?: number;\n\tfuelType?: string;\n\thasTurbo?: boolean;\n\thasSupercharger?: boolean;\n\tbodyModified?: boolean;\n\tengineModified?: boolean;\n\tgearboxType?: string;\n\tisActive?: boolean;\n\trisk?: RiskBase;\n\tbackgroundCheckStatus?: string;\n\tbackgroundCheckProvider?: string;\n\tbackgroundCheckRawOutput?: string;\n\tbackgroundCheckPassed?: boolean;\n\tid?: string;\n\tsourceId?: string;\n\tcreatedAt?: Date;\n\tfrontPicLoc?: string;\n\tsidePicLoc1?: string;\n\tsidePicLoc2?: string;\n\trearPicLoc?: string;\n\ttopPicLoc?: string;\n\tproofOfRegLoc?: string;\n\tdistance3m?: number;\n\ttotalDrvCount?: number;\n\tpolicies?: PolicyBase[];\n\tvehicle?: VehicleType;\n\tdriverVehicles?: DriverRegisteredVehicleBase[];\n\n\tconstructor(vehicle: RegisteredVehicleBase) {\n\t\tsuper();\n\t\tvehicle.vehicle = vehicle.vehicle ? new VehicleType(vehicle.vehicle) : undefined;\n\t\tObject.assign(this, vehicle);\n\t}\n\n\tprivate _checkId() {\n\t\tif (!this.id) {\n\t\t\tthrow new Error(\"ID must be set\");\n\t\t}\n\t}\n\n\tgetDisplay() {\n\t\tif (this.vehicle) {\n\t\t\treturn `${this.vehicle?.getDisplay()} - ${this.regPlate}`;\n\t\t} else {\n\t\t\treturn this.regPlate || \"Unknown\";\n\t\t}\n\t}\n\n\tasync addDrv({ driverId, drv }: { driverId: string; drv: DriverVehicle }) {\n\t\tthis._checkId();\n\n\t\tif (!drv?.api) {\n\t\t\tdrv.api = this.api;\n\t\t}\n\n\t\treturn await drv.create({ driverId: driverId, registeredVehicleId: this.id });\n\t}\n\n\tasync addDriver({ driverId, displayName, isOwner, isPrimaryDriver }: { driverId: string; displayName?: string; isOwner?: boolean; isPrimaryDriver?: boolean }) {\n\t\tlet drv = new DriverVehicle({\n\t\t\tdisplayName: displayName,\n\t\t\tisOwner: isOwner,\n\t\t\tisPrimaryDriver: isPrimaryDriver,\n\t\t});\n\n\t\tdrv.api = this.api;\n\n\t\treturn await this.addDrv({ driverId: driverId, drv: drv });\n\t}\n\n\tasync createPolicy({ policy }: { policy: Policy }) {\n\t\tif (!policy) {\n\t\t\tpolicy = new Policy({\n\t\t\t\tpolicyGroup: \"rv\",\n\t\t\t});\n\t\t}\n\t\tpolicy.api = this.api;\n\t\treturn await policy.create({\n\t\t\tapi: this.api as APIHandlerAuth,\n\t\t\trecordId: this.id!,\n\t\t});\n\t}\n\n\tasync refresh() {\n\t\tthis._checkId();\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `registered-vehicles/${this.id}`,\n\t\t});\n\n\t\traw.api = this.api;\n\n\t\tObject.assign(this, raw);\n\t}\n\n\tasync delete() {\n\t\tthis._checkId();\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `registered-vehicles/${this.id}`,\n\t\t});\n\t}\n\n\tasync save(fields: Object = {}) {\n\t\tthis._checkId();\n\n\t\tawait this._save({\n\t\t\tendpoint: `registered-vehicles/${this.id}`,\n\t\t\tfields: fields,\n\t\t\texclude: [\"vehicleType\"],\n\t\t});\n\t}\n\n\tasync update({ persist = false, fields = {} }: { persist?: boolean; fields?: Object }) {\n\t\tawait this._update({\n\t\t\tendpoint: `vehicles/${this.id}`,\n\t\t\tpersist: persist,\n\t\t\tfields: fields,\n\t\t\texclude: [\"vehicleType\"],\n\t\t});\n\t}\n}\n","import { RiskBase } from \"../../risk/interface\";\nimport { VehicleTypeBase } from \"./interface\";\nimport { APIHandlerAuth, APIHandlerNoAuth } from \"../../../utils/api\";\nimport { PrivateApiHandler } from \"../../custom\";\n\nexport class VehicleType extends PrivateApiHandler {\n\tapi!: APIHandlerAuth | APIHandlerNoAuth;\n\n\tapiPath?: string;\n\texternalId?: string;\n\tdisplay?: string;\n\tdescription?: string;\n\tisActive?: boolean;\n\tvehicleType?: string;\n\tvariant?: string;\n\tcode?: string;\n\tbaseMsrpNew?: number;\n\tbaseMsrpCurrent?: number;\n\tbrand?: string;\n\tmodel?: string;\n\tyearFloor?: number;\n\tyearTop?: number;\n\tdoors?: number;\n\twheels?: number;\n\tautonomy?: number;\n\tseats?: number;\n\tcylinders?: number;\n\tvalves?: number;\n\tvalveTiming?: string;\n\tcamType?: string;\n\tdriveType?: string;\n\ttransmission?: string;\n\tgearCount?: number;\n\tengineSizeML?: number;\n\thorsePower?: number;\n\ttorqueNM?: number;\n\tengineType?: string;\n\tfuelType?: string;\n\tfuelTankCapacityML?: number;\n\tcombinedKMPL?: number;\n\tcityKMPL?: number;\n\tcombinedKMPLE?: number;\n\tcityKMPLE?: number;\n\tkwh100KM?: number;\n\ttimeToCharge240vMins?: number;\n\telectricRangeKM?: number;\n\twarrantyBasicYears?: number;\n\twarrantyBasicKM?: number;\n\twarrantyBasicExpiry?: Date;\n\twarrantyDrivetrainYears?: number;\n\twarrantyDrivetrainKM?: number;\n\twarrantyDrivetrainExpiry?: Date;\n\twarrantyRoadsideYears?: number;\n\twarrantyRoadsideKM?: number;\n\twarrantyRoadsideExpiry?: Date;\n\twarrantyRustYears?: number;\n\twarrantyRustKM?: number;\n\twarrantyRustExpiry?: Date;\n\twarrantyFreeMaintenanceYears?: number;\n\twarrantyFreeMaintenanceKM?: number;\n\twarrantyFreeMaintenanceExpiry?: Date;\n\twarrantyHybridComponentYears?: number;\n\twarrantyHybridComponentKM?: number;\n\twarrantyHybridComponentExpiry?: Date;\n\twarrantyEVBatteryYears?: number;\n\twarrantyEVBatteryKM?: number;\n\twarrantyEVBatteryExpiry?: Date;\n\tlengthMM?: number;\n\twidthMM?: number;\n\theightMM?: number;\n\twheelBaseMM?: number;\n\tfrontTrackMM?: number;\n\trearTrackMM?: number;\n\tgroundClearanceMM?: number;\n\tangleOfApproachDegrees?: number;\n\tangleOfDepartureDegrees?: number;\n\tturningCircleM?: number;\n\tdragCoefficient?: number;\n\tepaInteriorVolumeM3?: number;\n\tcargoCapacityM3?: number;\n\tmaxCargoCapacityM3?: number;\n\tcurbWeightKG?: number;\n\tgrossWeightKG?: number;\n\tmaxPayloadKG?: number;\n\tmaxTowingCapacityKG?: number;\n\tid?: string;\n\tcreatedAt?: Date;\n\tsourceId?: string;\n\timageLoc?: string;\n\tthumbnailLoc?: string;\n\ttranslations?: Object;\n\trisk?: RiskBase;\n\n\tconstructor(vehicleType: VehicleTypeBase) {\n\t\tsuper();\n\t\tObject.assign(this, vehicleType);\n\t}\n\n\tprivate _checkId() {\n\t\tif (!this.id) {\n\t\t\tthrow new Error(\"ID must be set\");\n\t\t}\n\t}\n\n\tgetDisplay() {\n\t\treturn `${this.brand} (${this.model})`;\n\t}\n\n\tasync refresh() {\n\t\tthis._checkId();\n\n\t\tlet raw = await this.api.request({\n\t\t\tmethod: \"GET\",\n\t\t\tendpoint: `vehicles/${this.id}`,\n\t\t});\n\n\t\traw.api = this.api;\n\n\t\tObject.assign(this, raw);\n\t}\n\n\tasync delete() {\n\t\tthis._checkId();\n\n\t\tawait this.api.request({\n\t\t\tmethod: \"DELETE\",\n\t\t\tendpoint: `vehicles/${this.id}`,\n\t\t});\n\t}\n\n\tasync save(fields: Object = {}) {\n\t\tthis._checkId();\n\n\t\tawait this._save({\n\t\t\tendpoint: `vehicles/${this.id}`,\n\t\t\tfields: fields,\n\t\t});\n\t}\n\n\tasync update({ persist = false, fields = {} }: { persist?: boolean; fields?: Object }) {\n\t\tawait this._update({\n\t\t\tendpoint: `vehicles/${this.id}`,\n\t\t\tpersist: persist,\n\t\t\tfields: fields,\n\t\t});\n\t}\n}\n","import { regions } from \"../../models/types\";\nimport { OrgSettings } from \"./org\";\nimport request from \"../helpers/request\";\nimport { APIAuthError, APIError } from \"./exceptions\";\nimport Auth from \"../auth\";\n\nexport class APIHandlerNoAuth {\n\turl?: string;\n\tregion?: string;\n\torgId: string;\n\ttelematicsUrl: string;\n\torgUrl: string;\n\torgData?: OrgSettings;\n\torgDataRefreshing: boolean;\n\n\tconstructor({ url, region, orgId }: { url?: string; region?: string; orgId: string }) {\n\t\tthis.url = url;\n\t\tthis.region = region;\n\t\tthis.orgId = orgId;\n\t\tthis.orgDataRefreshing = false;\n\n\t\tif (!this.url && !this.region) {\n\t\t\tthrow new Error(\"Must provide either a url or a region\");\n\t\t}\n\n\t\tif (this.url) {\n\t\t\t// Remove trailing slash\n\t\t\tif (this.url.endsWith(\"/\")) {\n\t\t\t\tthis.url = this.url.slice(0, -1);\n\t\t\t}\n\t\t}\n\n\t\tif (!this.url) {\n\t\t\t// Check if region is valid\n\t\t\tif (region && !Object.values(regions).includes(region as regions)) {\n\t\t\t\tthrow new Error(`Invalid region. Must be one of: ${Object.values(regions).join(\", \")}`);\n\t\t\t}\n\n\t\t\t// Set url based on region\n\t\t\tthis.url = `https://${this.region}.nsurely-motor.com/v1/api`;\n\t\t}\n\n\t\tthis.telematicsUrl = `https://${this.region}.nsurely-motor.com/v1/telematics`;\n\t\tthis.orgUrl = `${this.url}/org/${this.orgId}`;\n\t}\n\n\tasync request({\n\t\tmethod,\n\t\tendpoint,\n\t\tparams,\n\t\tdata,\n\t\theaders,\n\t\turlOverride,\n\t}: {\n\t\tmethod: string;\n\t\tendpoint?: string;\n\t\tparams?: object;\n\t\tdata?: any;\n\t\theaders?: any;\n\t\turlOverride?: string;\n\t}) {\n\t\tif (!this.orgData && !this.orgDataRefreshing) {\n\t\t\tthis.orgDataRefreshing = true;\n\t\t\tthis.refreshOrgData();\n\t\t}\n\n\t\tif (data) {\n\t\t\tdata = {\n\t\t\t\t...data,\n\t\t\t};\n\t\t\t// check if data has api, remove it\n\t\t\tif (data.api) {\n\t\t\t\tdelete data.api;\n\t\t\t}\n\t\t}\n\n\t\tlet { body, status } = await request({\n\t\t\tmethod,\n\t\t\turl: urlOverride ? urlOverride : `${this.orgUrl}/${endpoint}`,\n\t\t\tparams,\n\t\t\tdata,\n\t\t\theaders,\n\t\t});\n\n\t\tif (status < 300) {\n\t\t\treturn body;\n\t\t} else if (status === 401) {\n\t\t\tthrow new APIAuthError(\"Not authenticated\");\n\t\t} else {\n\t\t\tthrow new APIError(`Api responded with status code ${status}`);\n\t\t}\n\t}\n\n\tasync refreshOrgData() {\n\t\tthis.orgDataRefreshing = true;\n\t\tthis.orgData = await this.request({\n\t\t\turlOverride: `${this.url}/public/${this.orgId}`,\n\t\t\tmethod: \"GET\",\n\t\t});\n\n\t\tthis.orgDataRefreshing = false;\n\t}\n\n\tasync *batchFetch({\n\t\tendpoint,\n\t\tparams,\n\t\theaders,\n\t\tlimit = 50,\n\t\toffset = 0,\n\t}: {\n\t\tendpoint: string;\n\t\tparams?: object;\n\t\theaders?: any;\n\t\tlimit?: number;\n\t\toffset?: number;\n\t}): AsyncGenerator<any, void, unknown> {\n\t\tparams = {\n\t\t\t...params,\n\t\t\tlimit,\n\t\t\toffset,\n\t\t};\n\n\t\t// While true\n\t\twhile (true) {\n\t\t\t// Fetch next page\n\t\t\tlet body = await this.request({\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tendpoint,\n\t\t\t\tparams: {\n\t\t\t\t\t...params,\n\t\t\t\t\toffset,\n\t\t\t\t},\n\t\t\t\theaders,\n\t\t\t});\n\n\t\t\t// If no data, break\n\t\t\tif (!body || body.length === 0) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tfor (let item of body) {\n\t\t\t\tyield item;\n\t\t\t}\n\n\t\t\t// If there are no more results, break\n\t\t\tif (body.length < limit) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Increase offset\n\t\t\toffset += limit;\n\t\t}\n\t}\n}\n\nexport class APIHandlerAuth {\n\turl?: string;\n\tregion?: string;\n\torgId: string;\n\ttelematicsUrl: string;\n\torgUrl: string;\n\torgData?: OrgSettings;\n\torgDataRefreshing: boolean;\n\tauth: Auth;\n\n\tconstructor({ url, region, orgId, auth }: { url?: string; region?: string; orgId: string; auth: Auth }) {\n\t\tthis.url = url;\n\t\tthis.region = region;\n\t\tthis.orgId = orgId;\n\t\tthis.auth = auth;\n\t\tthis.orgDataRefreshing = false;\n\n\t\tif (!this.url && !this.region) {\n\t\t\tthrow new Error(\"Must provide either a url or a region\");\n\t\t}\n\n\t\tif (this.url) {\n\t\t\t// Remove trailing slash\n\t\t\tif (this.url.endsWith(\"/\")) {\n\t\t\t\tthis.url = this.url.slice(0, -1);\n\t\t\t}\n\t\t}\n\n\t\tif (!this.url) {\n\t\t\t// Check if region is valid\n\t\t\tif (region && !Object.values(regions).includes(region as regions)) {\n\t\t\t\tthrow new Error(`Invalid region. Must be one of: ${Object.values(regions).join(\", \")}`);\n\t\t\t}\n\n\t\t\t// Set url based on region\n\t\t\tthis.url = `https://${this.region}.nsurely-motor.com/v1/api`;\n\t\t}\n\n\t\tthis.telematicsUrl = `https://${this.region}.nsurely-motor.com/v1/telematics`;\n\t\tthis.orgUrl = `${this.url}/org/${this.orgId}`;\n\t}\n\n\tasync makeRequest({ method, params, data, headers, url }: { method: string; params?: object; data?: any; headers?: any; url: string }) {\n\t\tif (this.auth.requiresRefresh()) {\n\t\t\tawait this.auth.refresh();\n\t\t}\n\n\t\theaders = {\n\t\t\t...headers,\n\t\t\t...this.auth.getHeaders(),\n\t\t};\n\n\t\treturn await request({\n\t\t\tmethod,\n\t\t\turl: url,\n\t\t\tparams,\n\t\t\tdata,\n\t\t\theaders,\n\t\t});\n\t}\n\n\tasync refreshOrgData() {\n\t\tthis.orgDataRefreshing = true;\n\t\tthis.orgData = await this.request({\n\t\t\turlOverride: `${this.url}/public/${this.orgId}`,\n\t\t\tmethod: \"GET\",\n\t\t});\n\n\t\tthis.orgDataRefreshing = false;\n\t}\n\n\tauthOk(): boolean {\n\t\tif (!this.auth.isLoggedIn()) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.auth.requiresRefresh()) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tasync checkAuth(): Promise<void> {\n\t\tif (!this.authOk()) {\n\t\t\tif (!this.auth.isLoggedIn()) {\n\t\t\t\tawait this.auth.login();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.auth.requiresRefresh()) {\n\t\t\t\tawait this.auth.refresh();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tasync request({\n\t\tmethod,\n\t\tendpoint,\n\t\tparams,\n\t\tdata,\n\t\theaders,\n\t\turlOverride,\n\t}: {\n\t\tmethod: string;\n\t\tendpoint?: string;\n\t\tparams?: object;\n\t\tdata?: any;\n\t\theaders?: any;\n\t\turlOverride?: string;\n\t}) {\n\t\tif (!this.orgData && !this.orgDataRefreshing) {\n\t\t\tthis.orgDataRefreshing = true;\n\t\t\tawait this.refreshOrgData();\n\t\t}\n\n\t\tawait this.checkAuth();\n\n\t\tif (data) {\n\t\t\tdata = {\n\t\t\t\t...data,\n\t\t\t};\n\t\t\t// check if data has api, remove it\n\t\t\tif (data.api) {\n\t\t\t\tdelete data.api;\n\t\t\t}\n\t\t}\n\n\t\tlet response = await this.makeRequest({\n\t\t\tmethod,\n\t\t\turl: urlOverride ? urlOverride : `${this.orgUrl}/${endpoint}`,\n\t\t\tparams,\n\t\t\tdata,\n\t\t\theaders,\n\t\t});\n\n\t\tlet body = response?.body || {};\n\t\tlet status = response?.status || 0;\n\n\t\tif (status === 401) {\n\t\t\tawait this.checkAuth();\n\t\t\theaders = {\n\t\t\t\t...headers,\n\t\t\t\t...this.auth.getHeaders(),\n\t\t\t};\n\t\t\tlet response = await this.makeRequest({\n\t\t\t\tmethod,\n\t\t\t\turl: urlOverride ? urlOverride : `${this.orgUrl}/${endpoint}`,\n\t\t\t\tparams,\n\t\t\t\tdata,\n\t\t\t\theaders,\n\t\t\t});\n\n\t\t\tbody = response?.body || {};\n\t\t\tstatus = response?.status || 0;\n\t\t}\n\n\t\tif (status < 300) {\n\t\t\treturn body;\n\t\t} else if (status === 401) {\n\t\t\tthrow new APIAuthError(\"Not authenticated\");\n\t\t} else {\n\t\t\tthrow new APIError(`Api responded with status code ${status}`);\n\t\t}\n\t}\n\n\tasync telematicsRequest({ method, endpoint, params, data, headers }: { method: string; endpoint?: string; params?: object; data?: any; headers?: any }) {\n\t\tif (data) {\n\t\t\tdata = {\n\t\t\t\t...data,\n\t\t\t};\n\t\t\t// check if data has api, remove it\n\t\t\tif (data.api) {\n\t\t\t\tdelete data.api;\n\t\t\t}\n\t\t}\n\n\t\tlet url = `${this.telematicsUrl}/${endpoint}`;\n\t\tlet response = await this.makeRequest({\n\t\t\tmethod,\n\t\t\turl,\n\t\t\tparams,\n\t\t\tdata,\n\t\t\theaders,\n\t\t});\n\n\t\tlet body = response?.body || {};\n\t\tlet status = response?.status || 0;\n\n\t\tif (status === 401) {\n\t\t\tawait this.checkAuth();\n\t\t\theaders = {\n\t\t\t\t...headers,\n\t\t\t\t...this.auth.getHeaders(),\n\t\t\t};\n\t\t\tlet response = await this.makeRequest({\n\t\t\t\tmethod,\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tdata,\n\t\t\t\theaders,\n\t\t\t});\n\n\t\t\tbody = response?.body || {};\n\t\t\tstatus = response?.status || 0;\n\t\t}\n\n\t\tif (status < 300) {\n\t\t\treturn body;\n\t\t} else if (status === 401) {\n\t\t\tthrow new APIAuthError(\"Not authenticated\");\n\t\t} else {\n\t\t\tthrow new APIError(`Api responded with status code ${status}`);\n\t\t}\n\t}\n\n\tasync *batchFetch({\n\t\tendpoint,\n\t\tparams,\n\t\theaders,\n\t\tlimit = 50,\n\t\toffset = 0,\n\t}: {\n\t\tendpoint: string;\n\t\tparams?: object;\n\t\theaders?: any;\n\t\tlimit?: number;\n\t\toffset?: number;\n\t}): AsyncGenerator<any, void, unknown> {\n\t\tparams = {\n\t\t\t...params,\n\t\t\tlimit,\n\t\t\toffset,\n\t\t};\n\n\t\t// While true\n\t\twhile (true) {\n\t\t\t// Fetch next page\n\t\t\tlet body = await this.request({\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tendpoint,\n\t\t\t\tparams: {\n\t\t\t\t\t...params,\n\t\t\t\t\toffset,\n\t\t\t\t},\n\t\t\t\theaders,\n\t\t\t});\n\n\t\t\t// If no data, break\n\t\t\tif (!body || body.length === 0) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tfor (let item of body) {\n\t\t\t\tyield item;\n\t\t\t}\n\n\t\t\t// If there are no more results, break\n\t\t\tif (body.length < limit) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Increase offset\n\t\t\toffset += limit;\n\t\t}\n\t}\n}\n","export class APIError extends Error {\n    constructor(message: string) {\n        super(message);\n        this.name = \"APIError\";\n    }\n}\n\nexport class APIAuthError extends APIError {\n    constructor(message: string) {\n        super(message);\n        this.name = \"APIAuthError\";\n    }\n}","import { APIHandlerAuth, APIHandlerNoAuth } from \"./core\";\n\nexport { APIHandlerAuth, APIHandlerNoAuth };\n","import { APIKeyAuthError } from \"./exceptions\";\n\nexport class APIKeyAuth {\n\tapiKey: string;\n\tapiSecret: string;\n\theaders: object | undefined;\n\n\tconstructor(key: string, secret: string) {\n\t\tthis.apiKey = key;\n\t\tthis.apiSecret = secret;\n\t\tthis.headers = undefined;\n\n\t\tif (!this.apiKey) {\n\t\t\tthrow new APIKeyAuthError(\"API key is required.\");\n\t\t}\n\n\t\tif (!this.apiSecret) {\n\t\t\tthrow new APIKeyAuthError(\"API secret is required.\");\n\t\t}\n\n\t\t// Strip whitespace from the key and secret\n\t\tthis.apiKey = this.apiKey.trim();\n\t\tthis.apiSecret = this.apiSecret.trim();\n\t}\n\n\trequiresRefresh(): boolean {\n\t\treturn false;\n\t}\n\n\tasync refresh(): Promise<void> {\n\t\treturn;\n\t}\n\n\tgetToken(): string {\n\t\treturn `${this.apiKey}:${this.apiSecret}`;\n\t}\n\n\tgetHeaders(): object {\n\t\tif (!this.headers) {\n\t\t\tthis.headers = {\n\t\t\t\tAuthorization: `apiKey ${this.getToken()}`,\n\t\t\t};\n\t\t}\n\t\treturn this.headers;\n\t}\n\n\tisLoggedIn(): boolean {\n\t\treturn true;\n\t}\n\n    async login(): Promise<boolean> {\n\t\treturn true;\n\t}\n\n    async logout(): Promise<boolean> {\n        return true;\n    }\n}\n","import { AuthError } from \"./exceptions\";\nimport { APIKeyAuth } from \"./apiKey\";\nimport { DriverAuth } from \"./driver\";\nimport { UserAuth } from \"./user\";\nimport { regions } from \"../../models/types\";\n\nenum AuthType {\n\tAPI_KEY = 1,\n\tJWT_DRIVER = 2,\n\tJWT_USER = 3,\n}\n\nexport class Auth {\n\tapiKey?: string;\n\tapiSecret?: string;\n\temail?: string;\n\tpassword?: string;\n\taccountType?: string;\n\tauthMethod: AuthType | undefined;\n\tauthObject: APIKeyAuth | DriverAuth | UserAuth;\n\tregion?: string;\n\turl: string | undefined;\n\torgId: string;\n\tisLoggingIn: boolean;\n\n\tconstructor({\n\t\tapiKey,\n\t\tapiSecret,\n\t\temail,\n\t\tpassword,\n\t\taccountType,\n\t\torgId,\n\t\tregion,\n\t\turl,\n\t}: {\n\t\tapiKey?: string;\n\t\tapiSecret?: string;\n\t\temail?: string;\n\t\tpassword?: string;\n\t\taccountType?: string;\n\t\torgId: string;\n\t\tregion?: string;\n\t\turl?: string;\n\t}) {\n\t\tthis.apiKey = apiKey;\n\t\tthis.apiSecret = apiSecret;\n\t\tthis.email = email;\n\t\tthis.password = password;\n\t\tthis.accountType = accountType;\n\t\tthis.region = region;\n\t\tthis.url = url;\n\t\tthis.orgId = orgId;\n\t\tthis.isLoggingIn = false;\n\n\t\tif (this.url) {\n\t\t\t// Remove trailing slash\n\t\t\tif (this.url.endsWith(\"/\")) {\n\t\t\t\tthis.url = this.url.slice(0, -1);\n\t\t\t}\n\t\t}\n\n\t\tif (!this.url) {\n\t\t\t// Check if region is valid\n\t\t\tif (region && !Object.values(regions).includes(region as regions)) {\n\t\t\t\tthrow new Error(`Invalid region. Must be one of: ${Object.values(regions).join(\", \")}`);\n\t\t\t}\n\n\t\t\t// Set url based on region\n\t\t\tthis.url = `https://${this.region}.nsurely-motor.com/v1/api`;\n\t\t}\n\n\t\tif (this.apiKey) {\n\t\t\tif (!this.apiSecret) {\n\t\t\t\t// Check if apiSecret does not have ':' in it\n\t\t\t\tif (this.apiKey.indexOf(\":\") === -1) {\n\t\t\t\t\tthrow new AuthError('Invalid API key. API key must be in the format \"key:secret\".');\n\t\t\t\t}\n\t\t\t\t// Split the apiSecret into key and secret\n\t\t\t\t[this.apiKey, this.apiSecret] = this.apiKey.split(\":\");\n\t\t\t}\n\t\t\tthis.authMethod = AuthType.API_KEY;\n\t\t\tthis.authObject = new APIKeyAuth(this.apiKey, this.apiSecret);\n\t\t} else if (this.email && this.password) {\n\t\t\tif (!this.accountType) {\n\t\t\t\tthrow new AuthError(\"Account type must be specified.\");\n\t\t\t}\n\t\t\tif (this.accountType === \"driver\") {\n\t\t\t\tthis.authMethod = AuthType.JWT_DRIVER;\n\t\t\t\tthis.authObject = new DriverAuth({\n\t\t\t\t\temail: this.email,\n\t\t\t\t\tpassword: this.password,\n\t\t\t\t\turl: this.url,\n\t\t\t\t\tregion: this.region,\n\t\t\t\t\torgId: this.orgId,\n\t\t\t\t\tauthType: this.accountType,\n\t\t\t\t});\n\t\t\t} else if (this.accountType === \"user\") {\n\t\t\t\tthis.authMethod = AuthType.JWT_USER;\n\t\t\t\tthis.authObject = new UserAuth({\n\t\t\t\t\temail: this.email,\n\t\t\t\t\tpassword: this.password,\n\t\t\t\t\turl: this.url,\n\t\t\t\t\tregion: this.region,\n\t\t\t\t\torgId: this.orgId,\n\t\t\t\t\tauthType: this.accountType,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthrow new AuthError(\"Invalid account type.\");\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new AuthError(\"Auth credentials are missing.\");\n\t\t}\n\t}\n\n\trequiresRefresh() {\n\t\treturn this.authObject.requiresRefresh();\n\t}\n\n\tasync refresh() {\n\t\tawait this.authObject.refresh();\n\t}\n\n\tasync login() {\n\t\tif (this.authMethod === AuthType.API_KEY) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if login is already in progress. If so, wait for it to finish.\n\t\tif (!this.isLoggingIn) {\n\n\t\t\t// Set login flag to true\n\t\t\tthis.isLoggingIn = true;\n\t\t\t\n\t\t\tif (this.email && this.password) {\n\t\t\t\tlet response = await this.authObject.login(this.email, this.password);\n\t\t\t\tthis.isLoggingIn = false;\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tthrow new AuthError(\"Auth credentials are missing.\");\n\t\t\t}\n\t\t} else {\n\t\t\t// Wait for login to finish\n\t\t\treturn await new Promise((resolve) => {\n\n\t\t\t\t// Check if login is finished every 100ms\n\t\t\t\tconst interval = setInterval(() => {\n\n\t\t\t\t\t// If login is finished, resolve the promise\n\t\t\t\t\tif (!this.isLoggingIn) {\n\n\t\t\t\t\t\t// Clear the interval\n\t\t\t\t\t\tclearInterval(interval);\n\n\t\t\t\t\t\t// Resolve the promise\n\t\t\t\t\t\tresolve(this.authObject.getToken());\n\t\t\t\t\t}\n\t\t\t\t}, 100);\n\t\t\t});\n\t\t}\n\t}\n\n\tasync logout() {\n\t\treturn await this.authObject.logout();\n\t}\n\n\tgetToken() {\n\t\treturn this.authObject.getToken();\n\t}\n\n\tgetHeaders() {\n\t\treturn this.authObject.getHeaders();\n\t}\n\n\tisLoggedIn() {\n\t\treturn this.authObject.isLoggedIn();\n\t}\n}\n","import { JWTAuth } from \"./jwt\";\nimport request from \"../helpers/request\";\nimport { regions } from \"../../models/types\";\n\nexport class DriverAuth extends JWTAuth {\n\tconstructor({ url, region, orgId, authType, email, password }: { url?: string; region?: string; orgId: string; authType?: string; email: string; password: string }) {\n\t\tsuper({ url, region, orgId, authType, email, password });\n\t}\n\n\tasync signup({\n\t\temail,\n\t\tpassword,\n\t\tfirstName,\n\t\tlastName,\n\t\tfields,\n\t\tlogin,\n\t}: {\n\t\temail: string;\n\t\tpassword: string;\n\t\tfirstName: string;\n\t\tlastName: string;\n\t\tfields?: object;\n\t\tlogin: boolean;\n\t}): Promise<void> {\n\t\tfields = fields || {};\n\t\tconst body = {\n\t\t\temail,\n\t\t\tpassword,\n\t\t\tfirstName,\n\t\t\tlastName,\n\t\t\t...fields,\n\t\t};\n\t\tconst response = await request({\n\t\t\turl: `${this.url}/org/${this.orgId}/auth/drivers/signup`,\n\t\t\tmethod: \"POST\",\n\t\t\tdata: body,\n\t\t});\n\n\t\tif (login) {\n\t\t\tawait this.login(email, password);\n\t\t}\n\n\t\treturn response.body;\n\t}\n}\n","export class AuthError extends Error {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t\tthis.name = \"AuthError\";\n\t}\n}\n\nexport class APIKeyAuthError extends AuthError {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t\tthis.name = \"APIKeyAuthError\";\n\t}\n}\n\nexport class JWTDriverAuthError extends AuthError {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t\tthis.name = \"JWTDriverAuthError\";\n\t}\n}\n\nexport class JWTUserAuthError extends AuthError {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t\tthis.name = \"JWTUserAuthError\";\n\t}\n}","import { Auth } from \"./core\";\nexport default Auth;\n","import request from \"../helpers/request\";\nimport { regions } from \"../../models/types\";\n\nexport class JWTAuth {\n\turl?: string;\n\tregion?: string;\n\torgId: string;\n\tauthType?: string;\n\temail: string;\n\tpassword: string;\n\ttokenType?: string;\n\taccessToken?: string;\n\texpiresIn?: number;\n\trefreshToken?: string;\n\trefreshExpiresIn?: number;\n\tlastRefreshTime?: EpochTimeStamp;\n\taccountId?: string;\n\taccountType?: string;\n\torgs?: Array<{\n\t\tid: string;\n\t\tdisplay: string;\n\t}>;\n\tloginUrl: string;\n\trefreshUrl: string;\n\tlogoutUrl: string;\n\n\tconstructor({ url, region, orgId, authType, email, password }: { url?: string; region?: string; orgId: string; authType?: string; email: string; password: string }) {\n\t\tthis.url = url;\n\t\tthis.region = region;\n\t\tthis.orgId = orgId;\n\t\tthis.authType = authType;\n\t\tthis.email = email;\n\t\tthis.password = password;\n\t\tthis.tokenType = undefined;\n\t\tthis.accessToken = undefined;\n\t\tthis.expiresIn = undefined;\n\t\tthis.refreshToken = undefined;\n\t\tthis.refreshExpiresIn = undefined;\n\t\tthis.lastRefreshTime = undefined;\n\t\tthis.accountId = undefined;\n\t\tthis.accountType = undefined;\n\t\tthis.orgs = [];\n\n\t\tif (this.authType !== \"driver\" && this.authType !== \"user\") {\n\t\t\tthrow new Error(\"Invalid authType. Must be 'driver' or 'user'\");\n\t\t}\n\n\t\tif (this.url) {\n\t\t\t// Remove trailing slash\n\t\t\tif (this.url.endsWith(\"/\")) {\n\t\t\t\tthis.url = this.url.slice(0, -1);\n\t\t\t}\n\t\t}\n\n\t\tif (!this.url) {\n\t\t\t// Check if region is valid\n\t\t\tif (region && !Object.values(regions).includes(region as regions)) {\n\t\t\t\tthrow new Error(`Invalid region. Must be one of: ${Object.values(regions).join(\", \")}`);\n\t\t\t}\n\n\t\t\t// Set url based on region\n\t\t\tthis.url = `https://${this.region}.nsurely-motor.com/v1/api`;\n\t\t}\n\n\t\tif (this.authType === \"user\") {\n\t\t\tthis.loginUrl = `${this.url}/org/auth/users/login`;\n\t\t\tthis.refreshUrl = `${this.url}/org/auth/users/refresh`;\n\t\t\tthis.logoutUrl = `${this.url}/org/auth/users/logout`;\n\t\t} else if (this.authType === \"driver\") {\n\t\t\tthis.loginUrl = `${this.url}/org/${this.orgId}/auth/drivers/login`;\n\t\t\tthis.refreshUrl = `${this.url}/org/${this.orgId}/auth/drivers/refresh`;\n\t\t\tthis.logoutUrl = `${this.url}/org/${this.orgId}/auth/drivers/logout`;\n\t\t} else {\n\t\t\tthrow new Error(\"Invalid authType. Must be 'driver' or 'user'\");\n\t\t}\n\t}\n\n\trefreshExpired(): boolean {\n\t\tif (!this.lastRefreshTime) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!this.refreshExpiresIn) {\n\t\t\treturn true;\n\t\t}\n\t\t// Check if refresh token is expired\n\t\tif (this.refreshExpiresIn - (Date.now() - this.lastRefreshTime) < 0) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\trequiresRefresh(): boolean {\n\t\tif (!this.accessToken) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!this.expiresIn) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!this.lastRefreshTime) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.expiresIn - (Date.now() - this.lastRefreshTime) < 0) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tasync login(email: string, password: string): Promise<string | undefined> {\n\t\tconst response = await request({\n\t\t\tmethod: \"POST\",\n\t\t\turl: this.loginUrl,\n\t\t\tdata: {\n\t\t\t\temail: email,\n\t\t\t\tpassword: password,\n\t\t\t},\n\t\t});\n\n\t\tthis.tokenType = response.body?.tokenType;\n\t\tthis.accessToken = response.body?.accessToken;\n\t\tthis.expiresIn = response.body?.expiresIn;\n\t\tthis.refreshToken = response.body?.refreshToken;\n\t\tthis.refreshExpiresIn = response.body?.refreshExpiresIn;\n\t\tthis.accountId = response.body?.accountId;\n\t\tthis.accountType = response.body?.accountType;\n\n\t\tif (this.authType === \"user\") {\n\t\t\tthis.orgs = response.body?.orgs;\n\t\t}\n\n\t\tthis.lastRefreshTime = Date.now();\n\n\t\treturn this.accessToken;\n\t}\n\n\tasync logout() {\n\t\tif (this.isLoggedIn()) {\n\t\t\tawait request({\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: this.logoutUrl,\n\t\t\t\tdata: {\n\t\t\t\t\trefreshToken: this.refreshToken,\n\t\t\t\t},\n\t\t\t});\n\t\t\tthis.accessToken = undefined;\n\t\t\tthis.refreshToken = undefined;\n\t\t\tthis.expiresIn = undefined;\n\t\t\tthis.refreshExpiresIn = undefined;\n\t\t\tthis.lastRefreshTime = undefined;\n\t\t}\n\t}\n\n\tisLoggedIn(): boolean {\n\t\tif (!this.accessToken) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this.expiresIn) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this.lastRefreshTime) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this.refreshExpiresIn) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.refreshExpiresIn - (Date.now() - this.lastRefreshTime) < 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tasync refresh(): Promise<string | undefined> {\n\t\tif (this.refreshExpired()) {\n\t\t\tthrow new Error(\"Refresh token expired due to inactivity. Please login again.\");\n\t\t}\n\n\t\tconst response = await request({\n\t\t\tmethod: \"POST\",\n\t\t\turl: this.refreshUrl,\n\t\t\tdata: {\n\t\t\t\trefreshToken: this.refreshToken,\n\t\t\t},\n\t\t});\n\n\t\tthis.tokenType = response.body?.tokenType;\n\t\tthis.accessToken = response.body?.accessToken;\n\t\tthis.expiresIn = response.body?.expiresIn;\n\t\tthis.refreshToken = response.body?.refreshToken;\n\t\tthis.refreshExpiresIn = response.body?.refreshExpiresIn;\n\t\tthis.accountId = response.body?.accountId;\n\t\tthis.accountType = response.body?.accountType;\n\n\t\tthis.lastRefreshTime = Date.now();\n\n\t\treturn this.accessToken;\n\t}\n\n\tgetToken() {\n\t\tif (!this.accessToken) {\n\t\t\tthrow new Error(\"No access token or refresh token found. Please login first.\");\n\t\t}\n\t\treturn `Bearer ${this.accessToken}`;\n\t}\n\n\tgetHeaders() {\n\t\tif (!this.accessToken) {\n\t\t\treturn {};\n\t\t}\n\t\treturn {\n\t\t\tAuthorization: this.getToken(),\n\t\t};\n\t}\n}\n","import { JWTAuth } from \"./jwt\";\nimport request from \"../helpers/request\";\nimport { regions } from \"../../models/types\";\n\nexport class UserAuth extends JWTAuth {\n\tconstructor({ url, region, orgId, authType, email, password }: { url?: string; region?: string; orgId: string; authType?: string; email: string; password: string }) {\n\t\tsuper({ url, region, orgId, authType, email, password });\n\t}\n}\n","\n// Mixin function for multiple inheritance\n// https://www.typescriptlang.org/docs/handbook/mixins.html\nexport function applyMixins(derivedCtor: any, constructors: any) {\n\tconstructors.forEach((baseCtor: any) => {\n\t\tObject.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n\t\t\tObject.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name) || Object.create(null));\n\t\t});\n\t});\n}\n\nexport function isJsonString(str = \"\") {\n    try {\n        JSON.parse(str);\n    } catch (e) {\n        return false;\n    }\n    return true;\n}\n\nexport function deleteFromObject(keyPart: string, obj: any){\n    for (var k in obj){          // Loop through the object\n        if(~k.indexOf(keyPart)){ // If the current key contains the string we're looking for\n            delete obj[k];       // Delete obj[key];\n        }\n    }\n}","import fetch, { Headers, Request, Response, RequestInit } from \"node-fetch\";\n\nfunction isJsonString(str = \"\") {\n\ttry {\n\t\tJSON.parse(str);\n\t} catch (e) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n/**\n * Parses the JSON returned by a network request\n */\nasync function parseJSON({ response, method, url, params }: { response: Response; method: string; url?: string; params?: object }): Promise<any> {\n\tif (response.status >= 200 && response.status < 300) {\n\t\tif (response.status === 204 || response.status === 205) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet responseObject = await response.json();\n\n\t\treturn { status: response.status, body: responseObject };\n\t}\n\n\t// Get the response body as text\n\tlet responseBody = await response.text();\n\n\t// If the response body is JSON, parse it\n\tif (isJsonString(responseBody)) {\n\t\tresponseBody = JSON.parse(responseBody);\n\t}\n\n\t// Log the error\n\tswitch (response.status) {\n\t\tcase 401:\n\t\tcase 403:\n\t\tcase 404:\n\t\t\t// do nothing\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.error(\"API call failed\", {\n\t\t\t\turl: url,\n\t\t\t\tmethod: method,\n\t\t\t\tstatus: response.status,\n\t\t\t\tresponse: responseBody,\n\t\t\t\tparams: params || {},\n\t\t\t});\n\t\t\tbreak;\n\t}\n\n\tconst error = {\n\t\tstatus: response.status,\n\t\tbody: responseBody,\n\t};\n\tthrow error;\n}\n\n/**\n * Checks if a network request came back fine, and throws an error if not\n *\n * @param  {object} response   A response from a network request\n *\n * @return {object|undefined} Returns either the response, or throws an error\n */\nfunction checkStatus({ response, method }: { response: Response; method: string }) {\n\treturn response;\n}\n\nexport default function request({ method, url, data = null, headers, params }: { method: string; url?: string; data?: any; headers?: object; params?: object }): Promise<{\n\tstatus: number;\n\tbody: any;\n}> {\n\treturn new Promise((resolve, reject) => {\n\t\tlet requestOptions: RequestInit = {\n\t\t\tmethod: method,\n\t\t\tredirect: \"follow\",\n\t\t};\n\n\t\tlet requestHeaders = new Headers();\n\n\t\tif (data) {\n\t\t\trequestHeaders.append(\"Content-Type\", \"application/json\");\n\t\t\trequestOptions.body = JSON.stringify(data);\n\t\t}\n\n\t\tif (headers) {\n\t\t\tfor (const [key, value] of Object.entries(headers)) {\n\t\t\t\trequestHeaders.append(key, value);\n\t\t\t}\n\t\t}\n\n\t\trequestOptions.headers = requestHeaders;\n\n\t\tfetch(\n\t\t\t`${url}?${new URLSearchParams({\n\t\t\t\t...params,\n\t\t\t})}`,\n\t\t\trequestOptions\n\t\t)\n\t\t\t.then((response: Response) => {\n\t\t\t\treturn checkStatus({\n\t\t\t\t\tresponse: response,\n\t\t\t\t\tmethod: method,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.then((response: Response) => {\n\t\t\t\tparseJSON({\n\t\t\t\t\tresponse: response,\n\t\t\t\t\tmethod: method,\n\t\t\t\t\turl: url,\n\t\t\t\t\tparams: params,\n\t\t\t\t})\n\t\t\t\t\t.then((response: any) => {\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error: any) => {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((error: Error) => {\n\t\t\t\treject(error);\n\t\t\t});\n\t});\n}\n","let ops = [\"eq\", \"ne\", \"gt\", \"gte\", \"lt\", \"lte\", \"like\", \"ilike\"];\n\n/**\n * Advanced search\n */\nexport class Search {\n\tvalue: any;\n\toperator: string;\n\n\tconstructor({ value, operator = \"eq\" }: { value: any; operator?: string }) {\n\t\tthis.value = value;\n\t\tthis.operator = operator;\n\t}\n\n\t// Checks the type and returns the value as a string. Datetime is converted to ISO format\n\tprivate _getValueString() {\n\t\tif (this.value instanceof Date) {\n\t\t\treturn this.value.toISOString();\n\t\t}\n\t\treturn this.value.toString();\n\t}\n\n\tavailableOperators() {\n\t\treturn ops;\n\t}\n\n\ttoString() {\n\t\treturn `${this.operator}.${this._getValueString()}`;\n\t}\n}\n","import Storage from \"react-native-storage\";\n\nexport default class StorageManager {\n\tstatic myInstance: StorageManager;\n\tstorage: Storage;\n\n\tconstructor(storageBackend: any = null) {\n\t\tthis.storage = new Storage({\n\t\t\t// maximum capacity, default 1000 key-ids\n\t\t\tsize: 1000,\n\n\t\t\t// Use AsyncStorage for RN apps, or window.localStorage for web apps.\n\t\t\t// If storageBackend is not set, data will be lost after reload.\n\t\t\tstorageBackend: storageBackend, // for web: window.localStorage\n\n\t\t\t// expire time, default: 1 day (1000 * 3600 * 24 milliseconds).\n\t\t\t// can be null, which means never expire.\n\t\t\tdefaultExpires: null,\n\n\t\t\t// cache data in the memory. default is true.\n\t\t\tenableCache: true,\n\t\t});\n\t}\n\n\t/**\n     * InitialiseSets the storage type to be used by the StorageManager.\n\t * @returns {StorageManager}\n\t */\n    static createStorage(storageBackend: any = null): void {\n\t\tif (this.myInstance == null) {\n\t\t\tthis.myInstance = new StorageManager(storageBackend);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {StorageManager}\n\t */\n    static getInstance(): StorageManager {\n\t\tif (this.myInstance == null) {\n\t\t\tthrow new Error(\"StorageManager has not been initialised. Initialise with StorageManager.createStorage(storageBackend)\");\n\t\t}\n\n\t\treturn this.myInstance;\n\t}\n\n\tasync save({ key, data }: { key: string; data: any }) {\n\t\tawait this.storage.save({\n\t\t\tkey: key,\n\t\t\tdata: data,\n\t\t});\n\t}\n\n\tasync load({ key }: { key: string }) {\n\t\treturn await this.storage.load({\n\t\t\tkey: key,\n\t\t});\n\t}\n\n\tasync remove({ key }: { key: string }) {\n\t\tawait this.storage.remove({\n\t\t\tkey: key,\n\t\t});\n\t}\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(607);\n"],"names":["global","self","window","Error","getGlobal","module","exports","fetch","bind","Headers","Request","Response","e","t","n","r","i","a","s","o","c","value","done","Promise","resolve","then","TypeError","Object","defineProperty","enumerable","configurable","writable","arguments","length","keys","getOwnPropertySymbols","concat","filter","getOwnPropertyDescriptor","forEach","prototype","create","constructor","setPrototypeOf","getPrototypeOf","__proto__","Reflect","construct","sham","Proxy","Date","toString","call","push","apply","Function","u","Map","indexOf","has","get","set","this","h","ReferenceError","l","name","stack","f","_SIZE","size","sync","defaultExpires","enableCache","_s","storageBackend","_innerVersion","cache","setItem","isPromise","console","warn","_mapPromise","getItem","_m","_checkMap","JSON","parse","key","removeItem","innerVersion","index","__keys__","_initMap","id","data","_getId","split","_removeIdInKey","stringify","rawData","expires","error","now","_saveToMap","all","map","load","regeneratorRuntime","mark","wrap","prev","next","ids","syncInBackground","syncParams","autoSync","batched","sent","syncId","abrupt","shift","stop","_loadGlobalItem","ret","_noItemFound","_loadMapItem","splice","_lookupGlobalItem","_lookUpInMap","clear","remove","assign","getIdsForKey","getBatchData","runtime","undefined","Op","hasOwn","hasOwnProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","err","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","invoke","reject","record","result","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","_sent","dispatchException","methodName","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","awrap","async","iter","val","object","reverse","pop","skipTempReset","charAt","slice","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","accidentalStrictMode","globalThis","getDriver","driverId","risk","address","fleets","vehicleCount","distance","points","files","contact","occupation","params","raw","api","request","endpoint","instance","Driver","listDrivers","isActive","dob","email","firstName","lastName","externalId","maxRecords","count","String","batchFetch","createDriver","driver","password","sendInvite","sendWebhook","webhook","invite","Drivers","getFleet","fleetId","query","Fleet","listFleets","createFleet","fleet","Fleets","TripManager","sourceId","orgId","batchWindow","lastBatchTime","gps","accelerometer","gyroscope","alerts","sendCheck","getTime","body","acc","gyro","telematicsRequest","addGPS","lat","lng","gpsAccuracy","altitude","acceleration","speed","bearing","bearingAccuracy","verticalAcceleration","timestamp","alt","b","bAcc","va","ts","addAccelerometer","x","y","z","addGyroscope","addAlert","alertCode","measurement1","measurement2","measurement3","onDevice","shown","code","m1","m2","m3","getVehicle","vehicleId","includeTranslations","includeDistance","includeDrvCount","drv","trns","distance3m","totalDrvCount","Vehicle","listVehicles","isApproved","regPlate","vin","fullResponse","full","createVehicle","vehicle","rv","addDrv","addDriver","getDisplay","isOwner","isPrimaryDriver","listVehicleTypes","brand","model","vehicleName","year","internalFields","VehicleType","createVehicleType","vehicleType","getVehicleType","vehicleTypeId","Vehicles","Motor","region","url","auth","storage","createStorage","storageManager","getInstance","APIHandlerAuth","APIHandlerNoAuth","orgSettings","orgData","refreshOrgData","language","defaultLang","orgName","path","applyMixins","motorJS","Auth","Search","models","billingAccount","card","isPrimary","lastFour","billingEventStatus","billingEvent","getCurrency","currencyIsoCode","approvalAt","update","updateStatus","status","paymentId","includes","join","_update","persist","fields","exclude","_save","field","deleteFromObject","PrivateApiHandler","super","_checkId","fullName","refresh","delete","save","DriverVehicle","telematicsId","listBillingAccounts","primaryOnly","BillingAccount","getBillingAccount","listVehiclePolicies","drvIds","policy","Policy","getPrimaryBillingAccount","res","createBillingAccount","account","charge","amount","event","BillingEvent","message","listCharges","eventType","eventStatus","listPolicies","looseMatch","isActivePolicy","driverIds","driverLooseMatch","createPolicy","policyGroup","recordId","FleetDriverVehicleAssignment","assignment","registeredVehicle","telemaicsId","FleetDriver","getTranslations","lang","LANG","translations","getDescription","hasParent","parentId","getTags","tags","checkId","getParent","isVehicleManager","isDriverManager","isBillingManager","expiresAt","vehicleIds","vehicleExpiresAt","toISOString","fleetDriver","removeDriver","updateDriver","addVehicle","isOpenToAll","fleetVehicle","FleetVehicle","removeVehicle","updateVehicle","addDriverToVehicle","removeDriverFromVehicle","updateDriverVehicleAssignment","listDriverVehicleAssignments","includeUnassigned","approval","approvedAt","autoApproved","cancellation","isCancelled","cancelledAt","isAgreed","agreedAt","duration","isExpired","end","gracePeriodMins","PolicyApproval","PolicyCancellation","PolicyDriver","PolicyDuration","isDriverAgreed","isLive","ratePerKm","rates","enabled","final","ratePerMile","premiumAmount","premium","refesh","D","DRV","RV","FD","FDRV","FRV","driverApprove","internalApprove","approvedById","approvedBy","cancel","regions","registeredVehicleId","orgDataRefreshing","endsWith","telematicsUrl","orgUrl","headers","urlOverride","APIAuthError","APIError","limit","offset","item","makeRequest","requiresRefresh","getHeaders","authOk","isLoggedIn","checkAuth","login","response","secret","apiKey","apiSecret","APIKeyAuthError","trim","getToken","Authorization","logout","AuthType","accountType","isLoggingIn","AuthError","authMethod","API_KEY","authObject","APIKeyAuth","JWT_DRIVER","DriverAuth","authType","JWT_USER","UserAuth","interval","setInterval","clearInterval","JWTAuth","signup","tokenType","accessToken","expiresIn","refreshToken","refreshExpiresIn","lastRefreshTime","accountId","orgs","loginUrl","refreshUrl","logoutUrl","refreshExpired","derivedCtor","constructors","baseCtor","getOwnPropertyNames","str","keyPart","k","requestOptions","redirect","requestHeaders","append","entries","URLSearchParams","checkStatus","responseObject","json","responseBody","text","isJsonString","parseJSON","catch","ops","operator","_getValueString","availableOperators","StorageManager","static","myInstance","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","prop"],"sourceRoot":""}