(()=>{var e={300:(e,t)=>{"use strict";var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}();e.exports=t=i.fetch,i.fetch&&(t.default=i.fetch.bind(i)),t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response},797:(e,t,i)=>{"use strict";function r(e,t,i,r,n,s,o){try{var a=e[s](o),c=a.value}catch(e){return void i(e)}a.done?t(c):Promise.resolve(c).then(r,n)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),r.forEach((function(t){s(e,t,i[t])}))}return e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t,i){return(l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var r=[null];r.push.apply(r,t);var n=new(Function.bind.apply(e,r));return i&&u(n,i.prototype),n}).apply(null,arguments)}function h(e){var t="function"==typeof Map?new Map:void 0;return(h=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,c(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)})(e)}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}i.r(t),i.d(t,{default:()=>p});var v=function(e){function t(e){var i;return n(this,t),(i=d(this,c(t).call(this,"Not Found! Params: ".concat(e)))).name="NotFoundError",i.stack=(new Error).stack,i}return a(t,h(Error)),t}(),f=function(e){function t(e){var i;return n(this,t),(i=d(this,c(t).call(this,"Expired! Params: ".concat(e)))).name="ExpiredError",i.stack=(new Error).stack,i}return a(t,h(Error)),t}();const p=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n(this,e),this._SIZE=i.size||1e3,this.sync=i.sync||{},this.defaultExpires=void 0!==i.defaultExpires?i.defaultExpires:864e5,this.enableCache=!1!==i.enableCache,this._s=i.storageBackend||null,this._innerVersion=11,this.cache={},this._s&&this._s.setItem)try{var r=this._s.setItem("__react_native_storage_test","test");this.isPromise=!(!r||!r.then)}catch(t){throw console.warn(t),delete this._s,t}else console.warn("Data would be lost after reload cause there is no storageBackend specified!\n      \nEither use localStorage(for web) or AsyncStorage(for React Native) as a storageBackend.");this._mapPromise=this.getItem("map").then((function(e){t._m=t._checkMap(e&&JSON.parse(e)||{})}))}var t,i,s,a;return t=e,(i=[{key:"getItem",value:function(e){return this._s?this.isPromise?this._s.getItem(e):Promise.resolve(this._s.getItem(e)):Promise.resolve()}},{key:"setItem",value:function(e,t){return this._s?this.isPromise?this._s.setItem(e,t):Promise.resolve(this._s.setItem(e,t)):Promise.resolve()}},{key:"removeItem",value:function(e){return this._s?this.isPromise?this._s.removeItem(e):Promise.resolve(this._s.removeItem(e)):Promise.resolve()}},{key:"_initMap",value:function(){return{innerVersion:this._innerVersion,index:0,__keys__:{}}}},{key:"_checkMap",value:function(e){return e&&e.innerVersion&&e.innerVersion===this._innerVersion?e:this._initMap()}},{key:"_getId",value:function(e,t){return e+"_"+t}},{key:"_saveToMap",value:function(e){var t=e.key,i=e.id,r=e.data,n=this._getId(t,i),s=this._m;if(void 0!==s[n])return this.enableCache&&(this.cache[n]=JSON.parse(r)),this.setItem("map_"+s[n],r);if(void 0!==s[s.index]){var o=s[s.index],a=o.split("_");delete s[o],this._removeIdInKey(a[0],a[1]),this.enableCache&&delete this.cache[o]}if(s[n]=s.index,s[s.index]=n,s.__keys__[t]=s.__keys__[t]||[],s.__keys__[t].push(i),this.enableCache){var c=JSON.parse(r);this.cache[n]=c}var u=s.index;++s.index===this._SIZE&&(s.index=0),this.setItem("map_"+u,r),this.setItem("map",JSON.stringify(s))}},{key:"save",value:function(e){var t=this,i=e.key,r=e.id,n=e.data,s=e.rawData,o=e.expires,a=void 0===o?this.defaultExpires:o;-1!==i.toString().indexOf("_")&&console.error('Please do not use "_" in key!');var c={rawData:n};if(void 0===n){if(void 0===s)return void console.error('"data" is required in save()!');console.warn('"rawData" is deprecated, please use "data" instead!'),c.rawData=s}var u=Date.now();if(null!==a&&(c.expires=u+a),c=JSON.stringify(c),void 0===r){if(this.enableCache){var l=JSON.parse(c);this.cache[i]=l}return this.setItem(i,c)}return-1!==r.toString().indexOf("_")&&console.error('Please do not use "_" in id!'),this._mapPromise.then((function(){return t._saveToMap({key:i,id:r,data:c})}))}},{key:"getBatchData",value:function(e){var t=this;return Promise.all(e.map((function(e){return t.load(e)})))}},{key:"getBatchDataWithIds",value:(s=regeneratorRuntime.mark((function e(t){var i,r,n,s,o,a,c,u,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.key,r=t.ids,n=t.syncInBackground,s=t.syncParams,o=r.map((function(e){return l.load({key:i,id:e,syncInBackground:n,autoSync:!1,batched:!0})})),e.next=4,Promise.all(o);case 4:if(a=e.sent,c=[],a.forEach((function(e){void 0!==e.syncId&&c.push(e.syncId)})),!c.length){e.next=14;break}return e.next=10,this.sync[i]({id:c,syncParams:s});case 10:return u=e.sent,e.abrupt("return",a.map((function(e){return e.syncId?u.shift():e})));case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(i,n){var o=s.apply(e,t);function a(e){r(o,i,n,a,c,"next",e)}function c(e){r(o,i,n,a,c,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"_lookupGlobalItem",value:function(e){var t=this,i=e.key;return this.enableCache&&void 0!==this.cache[i]?this._loadGlobalItem(o({ret:this.cache[i]},e)):this.getItem(i).then((function(i){return t._loadGlobalItem(o({ret:i},e))}))}},{key:"_loadGlobalItem",value:function(e){var t=e.key,i=e.ret,r=e.autoSync,n=e.syncInBackground,s=e.syncParams;if(null==i){if(r&&this.sync[t])return this.sync[t]({syncParams:s});throw new v(JSON.stringify(e))}"string"==typeof i&&(i=JSON.parse(i),this.enableCache&&(this.cache[t]=i));var o=Date.now();if(i.expires<o){if(r&&this.sync[t]){if(n){try{this.sync[t]({syncParams:s,syncInBackground:n})}catch(e){}return i.rawData}return this.sync[t]({syncParams:s,syncInBackground:n})}throw new f(JSON.stringify(e))}return i.rawData}},{key:"_noItemFound",value:function(e){var t=e.key,i=e.id,r=e.autoSync,n=e.syncParams;if(this.sync[t])return r?this.sync[t]({id:i,syncParams:n}):{syncId:i};throw new v(JSON.stringify(e))}},{key:"_loadMapItem",value:function(e){var t=e.ret,i=e.key,r=e.id,n=e.autoSync,s=e.batched,o=e.syncInBackground,a=e.syncParams;if(null==t)return this._noItemFound(e);if("string"==typeof t){t=JSON.parse(t);var c=e.key,u=e.id,l=this._getId(c,u);this.enableCache&&(this.cache[l]=t)}var h=Date.now();if(t.expires<h){if(n&&this.sync[i]){if(o){try{this.sync[i]({id:r,syncParams:a,syncInBackground:o})}catch(e){}return t.rawData}return this.sync[i]({id:r,syncParams:a,syncInBackground:o})}if(s)return{syncId:r};throw new f(JSON.stringify(e))}return t.rawData}},{key:"_lookUpInMap",value:function(e){var t,i=this,r=this._m,n=e.key,s=e.id,a=this._getId(n,s);return this.enableCache&&this.cache[a]?(t=this.cache[a],this._loadMapItem(o({ret:t},e))):void 0!==r[a]?this.getItem("map_"+r[a]).then((function(t){return i._loadMapItem(o({ret:t},e))})):this._noItemFound(o({ret:t},e))}},{key:"remove",value:function(e){var t=this;return this._mapPromise.then((function(){var i=t._m,r=e.key,n=e.id;if(void 0===n)return t.enableCache&&t.cache[r]&&delete t.cache[r],t.removeItem(r);var s=t._getId(r,n);if(void 0!==i[s]){t.enableCache&&t.cache[s]&&delete t.cache[s],t._removeIdInKey(r,n);var o=i[s];return delete i[s],t.setItem("map",JSON.stringify(i)),t.removeItem("map_"+o)}}))}},{key:"_removeIdInKey",value:function(e,t){var i=(this._m.__keys__[e]||[]).indexOf(t);-1!==i&&this._m.__keys__[e].splice(i,1)}},{key:"load",value:function(e){var t=this,i=e.key,r=e.id,n=e.autoSync,s=void 0===n||n,o=e.syncInBackground,a=void 0===o||o,c=e.syncParams,u=e.batched;return this._mapPromise.then((function(){return void 0===r?t._lookupGlobalItem({key:i,autoSync:s,syncInBackground:a,syncParams:c}):t._lookUpInMap({key:i,id:r,autoSync:s,syncInBackground:a,batched:u,syncParams:c})}))}},{key:"clearAll",value:function(){this._s.clear&&this._s.clear(),this._m=this._initMap()}},{key:"clearMap",value:function(){var e=this;return this.removeItem("map").then((function(){e.cache={},e._m=e._initMap()}))}},{key:"clearMapForKey",value:function(e){var t=this;return this._mapPromise.then((function(){var i=(t._m.__keys__[e]||[]).map((function(i){return t.remove({key:e,id:i})}));return Promise.all(i)}))}},{key:"getIdsForKey",value:function(e){var t=this;return this._mapPromise.then((function(){return t._m.__keys__[e]||[]}))}},{key:"getAllDataForKey",value:function(e,t){var i=this;return t=Object.assign({syncInBackground:!0},t),this.getIdsForKey(e).then((function(r){var n=r.map((function(i){return{key:e,id:i,syncInBackground:t.syncInBackground}}));return i.getBatchData(n)}))}}])&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,i),e}()},666:e=>{var t=function(e){"use strict";var t,i=Object.prototype,r=i.hasOwnProperty,n=Object.defineProperty||function(e,t,i){e[t]=i.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function u(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,i){return e[t]=i}}function l(e,t,i,r){var s=t&&t.prototype instanceof y?t:y,o=Object.create(s.prototype),a=new k(r||[]);return n(o,"_invoke",{value:A(e,i,a)}),o}function h(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",v="executing",f="completed",p={};function y(){}function g(){}function m(){}var w={};u(w,o,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(T([])));_&&_!==i&&r.call(_,o)&&(w=_);var I=m.prototype=y.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function i(n,s,o,a){var c=h(e[n],e,s);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){i("next",e,o,a)}),(function(e){i("throw",e,o,a)})):t.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return i("throw",e,o,a)}))}a(c.arg)}var s;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return s=s?s.then(n,n):n()}})}function A(e,t,i){var r=d;return function(n,s){if(r===v)throw new Error("Generator is already running");if(r===f){if("throw"===n)throw s;return D()}for(i.method=n,i.arg=s;;){var o=i.delegate;if(o){var a=E(o,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===d)throw r=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=v;var c=h(e,t,i);if("normal"===c.type){if(r=i.done?f:"suspendedYield",c.arg===p)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=f,i.method="throw",i.arg=c.arg)}}}function E(e,i){var r=i.method,n=e.iterator[r];if(n===t)return i.delegate=null,"throw"===r&&e.iterator.return&&(i.method="return",i.arg=t,E(e,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var s=h(n,e.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,p;var o=s.arg;return o?o.done?(i[e.resultName]=o.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,p):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function i(){for(;++n<e.length;)if(r.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i};return s.next=s}}return{next:D}}function D(){return{value:t,done:!0}}return g.prototype=m,n(I,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:g,configurable:!0}),g.displayName=u(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},e.awrap=function(e){return{__await:e}},O(P.prototype),u(P.prototype,a,(function(){return this})),e.AsyncIterator=P,e.async=function(t,i,r,n,s){void 0===s&&(s=Promise);var o=new P(l(t,i,r,n),s);return e.isGeneratorFunction(i)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},O(I),u(I,c,"Generator"),u(I,o,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var r in t)i.push(r);return i.reverse(),function e(){for(;i.length;){var r=i.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function n(r,n){return a.type="throw",a.arg=e,i.next=r,n&&(i.method="next",i.arg=t),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),j(i),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var r=i.completion;if("throw"===r.type){var n=r.arg;j(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,r){return this.delegate={iterator:T(e),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},566:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){!function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)}(r,n,(t=e[i](t)).done,t.value)}))}}},s=this&&this.__await||function(e){return this instanceof s?(this.v=e,this):new s(e)},o=this&&this.__asyncGenerator||function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){n[e]&&(r[e]=function(t){return new Promise((function(i,r){o.push([e,t,i,r])>1||c(e,t)}))})}function c(e,t){try{(i=n[e](t)).value instanceof s?Promise.resolve(i.value.v).then(u,l):h(o[0][2],i)}catch(e){h(o[0][3],e)}var i}function u(e){c("next",e)}function l(e){c("throw",e)}function h(e,t){e(t),o.shift(),o.length&&c(o[0][0],o[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.Drivers=void 0;const a=i(6);t.Drivers=class{getDriver({driverId:e,risk:t=!0,address:i=!0,fleets:n=!0,vehicleCount:s=!1,distance:o=!1,points:c=!0,files:u=!0,contact:l=!0,occupation:h=!0}){return r(this,void 0,void 0,(function*(){let r={risk:t,address:i,fleets:n,vehicleCount:s,distance:o,points:c,files:u,contact:l,occupation:h},d=yield this.api.request({method:"GET",endpoint:`drivers/${e}`,params:r}),v=new a.Driver(d);return v.api=this.api,v}))}listDrivers({isActive:e,dob:t,email:i,firstName:r,lastName:c,externalId:u,maxRecords:l}){return o(this,arguments,(function*(){var o,h,d,v;let f=0,p={};t&&(p=Object.assign(Object.assign({},p),{dob:String(t)})),i&&(p=Object.assign(Object.assign({},p),{email:String(i)})),r&&(p=Object.assign(Object.assign({},p),{firstName:String(r)})),c&&(p=Object.assign(Object.assign({},p),{lastName:String(c)})),u&&(p=Object.assign(Object.assign({},p),{externalId:String(u)})),e&&(p=Object.assign(Object.assign({},p),{isActive:e}));try{for(var y,g=!0,m=n(this.api.batchFetch({endpoint:"drivers",params:p}));!(o=(y=yield s(m.next())).done);){v=y.value,g=!1;try{let e=v;if(l&&f>=l)break;let t=new a.Driver(e);t.api=this.api,yield yield s(t),f++}finally{g=!0}}}catch(e){h={error:e}}finally{try{g||o||!(d=m.return)||(yield s(d.call(m)))}finally{if(h)throw h.error}}}))}createDriver({driver:e,password:t,sendInvite:i,sendWebhook:n}){return r(this,void 0,void 0,(function*(){if(!t&&!i)throw new Error("You must provide a password if sendInvite is false");if(t&&i)throw new Error("You cannot provide a password if sendInvite is true");let r=yield this.api.request({method:"POST",endpoint:"drivers",data:Object.assign(Object.assign({},e),{password:t}),params:{webhook:n?"true":"false",invite:i?"true":"false"}}),s=new a.Driver(r);return s.api=this.api,s}))}}},706:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(566);t.default=r.Drivers},400:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){!function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)}(r,n,(t=e[i](t)).done,t.value)}))}}},s=this&&this.__await||function(e){return this instanceof s?(this.v=e,this):new s(e)},o=this&&this.__asyncGenerator||function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){n[e]&&(r[e]=function(t){return new Promise((function(i,r){o.push([e,t,i,r])>1||c(e,t)}))})}function c(e,t){try{(i=n[e](t)).value instanceof s?Promise.resolve(i.value.v).then(u,l):h(o[0][2],i)}catch(e){h(o[0][3],e)}var i}function u(e){c("next",e)}function l(e){c("throw",e)}function h(e,t){e(t),o.shift(),o.length&&c(o[0][0],o[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.Fleets=void 0;const a=i(946);t.Fleets=class{getFleet({fleetId:e,query:t}){return r(this,void 0,void 0,(function*(){let i=yield this.api.request({method:"GET",endpoint:`fleets/${e}`,params:t}),r=new a.Fleet(i);return r.api=this.api,r}))}listFleets({maxRecords:e}){return o(this,arguments,(function*(){var t,i,r,o;let c=0;try{for(var u,l=!0,h=n(this.api.batchFetch({endpoint:"fleets"}));!(t=(u=yield s(h.next())).done);){o=u.value,l=!1;try{let t=o;if(e&&c>=e)break;let i=new a.Fleet(t);i.api=this.api,yield yield s(i),c++}finally{l=!0}}}catch(e){i={error:e}}finally{try{l||t||!(r=h.return)||(yield s(r.call(h)))}finally{if(i)throw i.error}}}))}createFleet({fleet:e}){return r(this,void 0,void 0,(function*(){let t=yield this.api.request({method:"POST",endpoint:"fleets",params:e}),i=new a.Fleet(t);return i.api=this.api,i}))}}},503:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(400);t.default=r.Fleets},733:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(538);t.default=r.TripManager},538:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TripManager=void 0,t.TripManager=class{constructor({api:e,sourceId:t,orgId:i,batchWindow:r}){if(this.batchWindow=r,this.batchWindow<0)throw new Error("batchWindow must be greater than 0");if(this.batchWindow>60)throw new Error("batchWindow must be less than 60");this.api=e,this.sourceId=t,this.orgId=i,this.lastBatchTime=new Date,this.gps=[],this.accelerometer=[],this.gyroscope=[],this.alerts=[]}clear(){this.gps=[],this.accelerometer=[],this.gyroscope=[],this.alerts=[]}sendCheck(){return i(this,void 0,void 0,(function*(){if(!(this.gps.length||this.accelerometer.length||this.gyroscope.length||this.alerts.length))return;if(0!=this.batchWindow&&(new Date).getTime()-this.lastBatchTime.getTime()<this.batchWindow)return;let e={sourceId:this.sourceId,orgId:this.orgId,gps:this.gps,acc:this.accelerometer,gyro:this.gyroscope,alerts:this.alerts};yield this.api.telematicsRequest({method:"POST",endpoint:"/track",data:e}),this.clear()}))}addGPS({lat:e,lng:t,gpsAccuracy:r,altitude:n,acceleration:s,speed:o,bearing:a,bearingAccuracy:c,verticalAcceleration:u,timestamp:l}){return i(this,void 0,void 0,(function*(){if(void 0===e||void 0===t)throw new Error("lat and lng must be provided");if(e<-90||e>90)throw new Error("lat must be between -90 and 90");if(t<-180||t>180)throw new Error("lng must be between -180 and 180");l||(l=(new Date).getTime()),this.gps.push({lat:e,lng:t,a:r,alt:n,acc:s,s:o,b:a,bAcc:c,va:u,ts:l}),yield this.sendCheck()}))}addAccelerometer({x:e,y:t,z:r,timestamp:n}){return i(this,void 0,void 0,(function*(){if(void 0===e||void 0===t||void 0===r)throw new Error("x, y and z must be provided");n||(n=(new Date).getTime()),this.accelerometer.push({x:e,y:t,z:r,ts:n}),yield this.sendCheck()}))}addGyroscope({x:e,y:t,z:r,timestamp:n}){return i(this,void 0,void 0,(function*(){if(void 0===e||void 0===t||void 0===r)throw new Error("x, y and z must be provided");n||(n=(new Date).getTime()),this.gyroscope.push({x:e,y:t,z:r,ts:n}),yield this.sendCheck()}))}addAlert({alertCode:e,measurement1:t,measurement2:r,measurement3:n,onDevice:s,shown:o,timestamp:a}){return i(this,void 0,void 0,(function*(){if(void 0===e)throw new Error("alert_code must be provided");a||(a=(new Date).getTime()),this.alerts.push({code:e,m1:t,m2:r,m3:n,onDevice:s,shown:o,ts:a}),yield this.sendCheck()}))}}},929:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){!function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)}(r,n,(t=e[i](t)).done,t.value)}))}}},s=this&&this.__await||function(e){return this instanceof s?(this.v=e,this):new s(e)},o=this&&this.__asyncGenerator||function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){n[e]&&(r[e]=function(t){return new Promise((function(i,r){o.push([e,t,i,r])>1||c(e,t)}))})}function c(e,t){try{(i=n[e](t)).value instanceof s?Promise.resolve(i.value.v).then(u,l):h(o[0][2],i)}catch(e){h(o[0][3],e)}var i}function u(e){c("next",e)}function l(e){c("throw",e)}function h(e,t){e(t),o.shift(),o.length&&c(o[0][0],o[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.Vehicles=void 0;const a=i(794),c=i(455);t.Vehicles=class{getVehicle({vehicleId:e,includeTranslations:t=!0,includeDistance:i=!0,includeDrvCount:n=!0}){return r(this,void 0,void 0,(function*(){let r={drv:!0,trns:t,distance3m:i,totalDrvCount:n},s=yield this.api.request({method:"GET",endpoint:`registered-vehicles/${e}`,params:r}),o=new a.Vehicle(s);return o.api=this.api,o}))}listVehicles({isActive:e,isApproved:t,regPlate:i,vin:r,sourceId:c,externalId:u,fullResponse:l,maxRecords:h}){return o(this,arguments,(function*(){var o,d,v,f;let p=0,y={};e&&(y=Object.assign(Object.assign({},y),{isActive:e})),t&&(y=Object.assign(Object.assign({},y),{isApproved:t})),r&&(y=Object.assign(Object.assign({},y),{vin:String(r)})),i&&(y=Object.assign(Object.assign({},y),{regPlate:String(i)})),c&&(y=Object.assign(Object.assign({},y),{sourceId:String(c)})),u&&(y=Object.assign(Object.assign({},y),{externalId:String(u)})),l&&(y=Object.assign(Object.assign({},y),{full:l?"true":"false"}));try{for(var g,m=!0,w=n(this.api.batchFetch({endpoint:"registered-vehicles",params:y}));!(o=(g=yield s(w.next())).done);){f=g.value,m=!1;try{let e=f;if(h&&p>=h)break;let t=new a.Vehicle(e);t.api=this.api,yield yield s(t),p++}finally{m=!0}}}catch(e){d={error:e}}finally{try{m||o||!(v=w.return)||(yield s(v.call(w)))}finally{if(d)throw d.error}}}))}createVehicle({vehicle:e,driverId:t,drv:i,sendWebhook:n=!0}){var s;return r(this,void 0,void 0,(function*(){if(!t&&i)throw new Error("You must provide a driverId if drv is provided");if(!e.vehicle)throw new Error("You must provide a vehicleType");if(!(null===(s=e.vehicle)||void 0===s?void 0:s.id))throw new Error("Vehicle Type ID is required");let r=Object.assign(Object.assign({},e),{vehicleId:e.vehicle.id});delete r.vehicle;let o=yield this.api.request({method:"POST",endpoint:"registered-vehicles",data:r,params:{webhook:n?"true":"false"}}),c=new a.Vehicle(o);c.api=this.api;try{t&&(i?yield c.addDrv({driverId:t,drv:i}):yield c.addDriver({driverId:t,displayName:e.getDisplay(),isOwner:!0,isPrimaryDriver:!0}))}catch(e){throw console.error(e),e}return c}))}listVehicleTypes({brand:e,model:t,vehicleName:i,year:r,externalId:a,sourceId:u,isActive:l=!0,internalFields:h,maxRecords:d}){return o(this,arguments,(function*(){var o,v,f,p;let y=0,g={};e&&(g=Object.assign(Object.assign({},g),{brand:String(e)})),t&&(g=Object.assign(Object.assign({},g),{model:String(t)})),i&&(g=Object.assign(Object.assign({},g),{vehicleName:String(i)})),r&&(g=Object.assign(Object.assign({},g),{year:String(r)})),a&&(g=Object.assign(Object.assign({},g),{externalId:String(a)})),u&&(g=Object.assign(Object.assign({},g),{sourceId:String(u)})),l&&(g=Object.assign(Object.assign({},g),{isActive:l})),h&&(g=Object.assign(Object.assign({},g),{internalFields:h}));try{for(var m,w=!0,b=n(this.api.batchFetch({endpoint:"vehicles",params:g}));!(o=(m=yield s(b.next())).done);){p=m.value,w=!1;try{let e=p;if(d&&y>=d)break;let t=new c.VehicleType(e);t.api=this.api,yield yield s(t),y++}finally{w=!0}}}catch(e){v={error:e}}finally{try{w||o||!(f=b.return)||(yield s(f.call(b)))}finally{if(v)throw v.error}}}))}createVehicleType({vehicleType:e,sendWebhook:t}){return r(this,void 0,void 0,(function*(){let i=yield this.api.request({method:"POST",endpoint:"vehicles",data:e,params:{webhook:t?"true":"false"}}),r=new c.VehicleType(i);return r.api=this.api,r}))}getVehicleType({vehicleTypeId:e}){return r(this,void 0,void 0,(function*(){let t=yield this.api.request({method:"GET",endpoint:`vehicles/${e}`}),i=new c.VehicleType(t);return i.api=this.api,i}))}}},972:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(929);t.default=r.Vehicles},607:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),i(666);const s=i(267),o=n(i(133)),a=n(i(96)),c=i(465),u=n(i(706)),l=n(i(972)),h=n(i(503)),d=i(486),v=n(i(554)),f=n(i(733));class p{constructor({orgId:e,region:t,url:i,auth:r,storage:n=null}){o.default.createStorage(n),this.orgId=e,this.region=t,this.url=i,this.storageManager=o.default.getInstance(),this.auth=r,this.auth?this.api=new s.APIHandlerAuth({orgId:this.orgId,region:this.region,url:this.url,auth:this.auth}):this.api=new s.APIHandlerNoAuth({orgId:this.orgId,region:this.region,url:this.url})}orgSettings(){return r(this,void 0,void 0,(function*(){return this.api.orgData||(yield this.api.refreshOrgData()),this.api.orgData}))}language(){return r(this,void 0,void 0,(function*(){if(this.api.orgData)return this.api.orgData.defaultLang;let e=yield this.orgSettings();return null==e?void 0:e.defaultLang}))}orgName(){return r(this,void 0,void 0,(function*(){if(this.api.orgData)return this.api.orgData.displayName;let e=yield this.orgSettings();return null==e?void 0:e.displayName}))}request({method:e,path:t,params:i,data:n}){return r(this,void 0,void 0,(function*(){return yield this.api.request({method:e,endpoint:t,params:i,data:n})}))}}(0,c.applyMixins)(p,[u.default,l.default,h.default]);let y={Motor:p,Auth:a.default,TripManager:f.default,Search:d.Search,models:v.default};Function("r","motorJS = r")(y),t.default=y},479:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BillingAccount=void 0,t.BillingAccount=class{constructor(e){Object.assign(this,e)}getDisplay(){return this.card?`${this.isPrimary?"Primary ":""}${this.card.name} - ${this.card.lastFour}`:"Unknown"}}},286:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BillingEvent=void 0;const i=["pending","paid","failed","cancelled","refunded"];t.BillingEvent=class{constructor(e){Object.assign(this,e)}getCurrency(){if(this.billingAccount)return this.billingAccount.currencyIsoCode}isApproved(){return!!this.approvalAt}update(e){this.api.request({method:"PATCH",endpoint:`billing-events/${this.id}`,data:e})}updateStatus({status:e,paymentId:t}){if(!i.includes(e))throw new Error(`Invalid status: ${e} - can only be one of ${i.join(", ")}`);let r={};r={status:e},t&&(r=Object.assign(Object.assign({},r),{paymentId:t})),this.update(r),this.status=e}}},952:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateApiHandler=void 0;const n=i(465);t.PrivateApiHandler=class{_update({persist:e,endpoint:t,fields:i,exclude:n,params:s}){return r(this,void 0,void 0,(function*(){i&&(Object.assign(this,Object.assign(Object.assign({},this),i)),e&&t&&(yield this._save({endpoint:t,fields:i,exclude:n,params:s})))}))}_save({endpoint:e,fields:t,exclude:i=[],params:s}){return r(this,void 0,void 0,(function*(){if(!this.api)throw new Error("APIHandler not initialised");let r=null;if(t)r=Object.assign({},t);else{r=Object.assign({},this),i=i.concat(["api","id","createdAt"]);for(let e of i)(0,n.deleteFromObject)(e,r)}if(t)return this.api.request({method:"PATCH",endpoint:e,params:s,data:r})}))}}},6:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){!function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)}(r,n,(t=e[i](t)).done,t.value)}))}}},s=this&&this.__await||function(e){return this instanceof s?(this.v=e,this):new s(e)},o=this&&this.__asyncGenerator||function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){n[e]&&(r[e]=function(t){return new Promise((function(i,r){o.push([e,t,i,r])>1||c(e,t)}))})}function c(e,t){try{(i=n[e](t)).value instanceof s?Promise.resolve(i.value.v).then(u,l):h(o[0][2],i)}catch(e){h(o[0][3],e)}var i}function u(e){c("next",e)}function l(e){c("throw",e)}function h(e,t){e(t),o.shift(),o.length&&c(o[0][0],o[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.Driver=void 0;const a=i(952),c=i(479),u=i(324),l=i(65),h=i(286);class d extends a.PrivateApiHandler{constructor(e){super(),Object.assign(this,e)}_checkId(){if(!this.id)throw new Error("ID must be set")}fullName(){return`${this.firstName} ${this.lastName}`}refresh(){return r(this,void 0,void 0,(function*(){let e=yield this.api.request({method:"GET",endpoint:`drivers/${this.id}`,params:{risk:!0,address:!0,fleets:!0,vehicleCount:!0,distance:!0,points:!0,files:!0,contact:!0,occupation:!0}});e.api=this.api,Object.assign(this,e)}))}delete(){return r(this,void 0,void 0,(function*(){this._checkId(),yield this.api.request({method:"DELETE",endpoint:`drivers/${this.id}`})}))}save(e={}){return r(this,void 0,void 0,(function*(){this._checkId(),yield this._save({endpoint:`drivers/${this.id}`,fields:e,exclude:["fleets","createdAt"]})}))}update({persist:e=!1,fields:t={}}){return r(this,void 0,void 0,(function*(){yield this._update({endpoint:`drivers/${this.id}`,persist:e,fields:t,exclude:["fleets","createdAt"]})}))}listVehicles(){return r(this,void 0,void 0,(function*(){return(yield this.api.request({method:"GET",endpoint:`drivers/${this.id}/vehicles`})).map((e=>{let t=new u.DriverVehicle(e);return t.api=this.api,t}))}))}getDisplay(){return this.fullName()}telematicsId(){return this.sourceId}listBillingAccounts(e=!1){return r(this,void 0,void 0,(function*(){return this._checkId(),(yield this.api.request({method:"GET",endpoint:`drivers/${this.id}/billing-accounts`})).map((e=>{let t=new c.BillingAccount(e);return t.api=this.api,t}))}))}getBillingAccount({id:e}){return r(this,void 0,void 0,(function*(){if(this._checkId(),!e)throw new Error("Billing account id is required");let t=yield this.api.request({method:"GET",endpoint:`drivers/${this.id}/billing-accounts/${e}`}),i=new c.BillingAccount(t);return i.api=this.api,i}))}listVehiclePolicies({vehicleId:e}){return r(this,void 0,void 0,(function*(){return(yield this.api.request({method:"GET",endpoint:"policy",params:{drvIds:e}})).map((e=>{let t=new l.Policy(e);return t.api=this.api,t}))}))}getPrimaryBillingAccount(){return r(this,void 0,void 0,(function*(){let e=yield this.listBillingAccounts(!0);if(e.length>0&&e[0].id)return yield this.getBillingAccount({id:e[0].id})}))}createBillingAccount({account:e}){return r(this,void 0,void 0,(function*(){this._checkId();let t=yield this.api.request({method:"POST",endpoint:`drivers/${this.id}/billing-accounts`,params:e}),i=new c.BillingAccount(t);return i.api=this.api,i}))}charge({amount:e,event:t}){return r(this,void 0,void 0,(function*(){if(!e&&!t)throw new Error("Either amount or event is required");t||(t=new h.BillingEvent({amount:e,message:"Charge",type:"other"})),this._checkId();let i=yield this.api.request({method:"POST",endpoint:`drivers/${this.id}/billing-events`,params:t}),r=new h.BillingEvent(i);return r.api=this.api,r}))}listCharges({eventType:e,eventStatus:t,maxRecords:i}){return o(this,arguments,(function*(){var r,o,a,c;this._checkId();let u={};e&&(u.type=e),t&&(u.status=t);let l=0;try{for(var d,v=!0,f=n(this.api.batchFetch({endpoint:`drivers/${this.id}/billing-events`,params:u}));!(r=(d=yield s(f.next())).done);){c=d.value,v=!1;try{let e=c;if(i&&l>=i)break;let t=new h.BillingEvent(e);t.api=this.api,yield yield s(t),l+=1}finally{v=!0}}}catch(e){o={error:e}}finally{try{v||r||!(a=f.return)||(yield s(a.call(f)))}finally{if(o)throw o.error}}}))}listPolicies({looseMatch:e=!0,isActivePolicy:t}){return o(this,arguments,(function*(){var i,r,o,a;let c={};c.driverIds=this.id,c.driverLooseMatch=e,t&&(c.isActivePolicy=t);try{for(var u,h=!0,d=n(this.api.batchFetch({endpoint:"policy",params:c}));!(i=(u=yield s(d.next())).done);){a=u.value,h=!1;try{let e=a,t=new l.Policy(e);t.api=this.api,yield yield s(t)}finally{h=!0}}}catch(e){r={error:e}}finally{try{h||i||!(o=d.return)||(yield s(o.call(d)))}finally{if(r)throw r.error}}}))}createPolicy({policy:e}){return r(this,void 0,void 0,(function*(){return e||(e=new l.Policy({policyGroup:"d"})),e.api=this.api,yield e.create({api:this.api,recordId:this.id})}))}}t.Driver=d},611:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FleetDriverVehicleAssignment=void 0;const r=i(952);class n extends r.PrivateApiHandler{constructor(e){super(),Object.assign(this,e)}id(){var e,t;return[null===(e=this.driver)||void 0===e?void 0:e.id,null===(t=this.registeredVehicle)||void 0===t?void 0:t.id]}telemaicsId(){return this.sourceId}}t.FleetDriverVehicleAssignment=n},653:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FleetDriver=void 0;const n=i(946),s=i(952);class o extends s.PrivateApiHandler{constructor(e){super(),Object.assign(this,e)}id(){var e;return null===(e=this.driver)||void 0===e?void 0:e.id}fullName(){var e;return null===(e=this.driver)||void 0===e?void 0:e.fullName()}telemaicsId(){return this.sourceId}getFleet(){return r(this,void 0,void 0,(function*(){if(!this.fleetId)return null;let e=yield this.api.request({method:"GET",endpoint:`fleets/${this.fleetId}`}),t=new n.Fleet(e);return this.api&&(t.api=this.api),t}))}}t.FleetDriver=o},946:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){!function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)}(r,n,(t=e[i](t)).done,t.value)}))}}},s=this&&this.__await||function(e){return this instanceof s?(this.v=e,this):new s(e)},o=this&&this.__asyncGenerator||function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){n[e]&&(r[e]=function(t){return new Promise((function(i,r){o.push([e,t,i,r])>1||c(e,t)}))})}function c(e,t){try{(i=n[e](t)).value instanceof s?Promise.resolve(i.value.v).then(u,l):h(o[0][2],i)}catch(e){h(o[0][3],e)}var i}function u(e){c("next",e)}function l(e){c("throw",e)}function h(e,t){e(t),o.shift(),o.length&&c(o[0][0],o[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.Fleet=void 0;const a=i(952),c=i(65),u=i(259),l=i(611),h=i(653),d=i(175);class v extends a.PrivateApiHandler{constructor(e){super(),Object.assign(this,e)}getTranslations({key:e,lang:t}){var i,r;if(!t)return this[e];if(!u.LANG.includes(t))throw new Error(`${t} is not a valid language code`);return(null===(r=null===(i=this.translations)||void 0===i?void 0:i[e])||void 0===r?void 0:r[t])||this[e]}getDisplay({lang:e}){return this.getTranslations({key:"display",lang:e})}getDescription({lang:e}){return this.getTranslations({key:"description",lang:e})}hasParent(){return!!this.parentId}getTags(){var e;return(null===(e=this.tags)||void 0===e?void 0:e.split(","))||[]}checkId(){if(!this.id)throw new Error("Fleet ID is required")}refresh(){return r(this,void 0,void 0,(function*(){this.checkId();const e=yield this.api.request({method:"GET",endpoint:`/fleets/${this.id}`});Object.assign(this,e)}))}delete(){return r(this,void 0,void 0,(function*(){this.checkId(),yield this.api.request({method:"DELETE",endpoint:`/fleets/${this.id}`})}))}save(e={}){return r(this,void 0,void 0,(function*(){return this.checkId(),yield this._save({endpoint:`/fleets/${this.id}`,fields:e,exclude:["vehicleType"]})}))}update({persist:e,fields:t}){return r(this,void 0,void 0,(function*(){return e?yield this.save(t):yield this._update({fields:t})}))}getParent(){return r(this,void 0,void 0,(function*(){if(!this.hasParent())return null;let e=yield this.api.request({method:"GET",endpoint:`/fleets/${this.parentId}`}),t=new v(e);return t.api=this.api,t}))}addDriver({driverId:e,isVehicleManager:t=!1,isDriverManager:i=!1,isBillingManager:n=!1,expiresAt:s,isActive:o=!0,vehicleIds:a,vehicleExpiresAt:c}){return r(this,void 0,void 0,(function*(){a||(a=[]);let u={driverId:e,isVehicleManager:t,isDriverManager:i,isBillingManager:n,isActive:o};(null==s?void 0:s.toISOString())&&(u.expiresAt=s.toISOString());let l=yield this.api.request({method:"POST",endpoint:`/fleets/${this.id}/drivers`,data:u}),d=new h.FleetDriver(l);if(d.api=this.api,!a.length)return d;try{if(c instanceof Date||!c){for(let t of a){let i={};(null==c?void 0:c.toISOString())&&(i.expiresAt=c.toISOString()),yield this.api.request({method:"POST",endpoint:`/fleets/${this.id}/drivers/${e}/vehicles/${t}`,data:i})}return d}a.forEach(((t,i)=>r(this,void 0,void 0,(function*(){var r;let n={};(null===(r=c[i])||void 0===r?void 0:r.toISOString())&&(n.expiresAt=c[i].toISOString()),yield this.api.request({method:"POST",endpoint:`/fleets/${this.id}/drivers/${e}/vehicles/${t}`,data:n})}))))}catch(t){throw yield this.api.request({method:"DELETE",endpoint:`/fleets/${this.id}/drivers/${e}`}),t}return d}))}removeDriver({driverId:e}){return r(this,void 0,void 0,(function*(){yield this.api.request({method:"DELETE",endpoint:`/fleets/${this.id}/drivers/${e}`})}))}getDriver(){return r(this,void 0,void 0,(function*(){let e=yield this.api.request({method:"GET",endpoint:`/fleets/${this.id}/drivers`}),t=new h.FleetDriver(e);return t.api=this.api,t}))}updateDriver({driverId:e,isVehicleManager:t,isDriverManager:i,isBillingManager:n,expiresAt:s,isActive:o}){return r(this,void 0,void 0,(function*(){let r={};void 0!==t&&(r.isVehicleManager=t),void 0!==i&&(r.isDriverManager=i),void 0!==n&&(r.isBillingManager=n),(null==s?void 0:s.toISOString())&&(r.expiresAt=s.toISOString()),void 0!==o&&(r.isActive=o);let a=yield this.api.request({method:"PATCH",endpoint:`/fleets/${this.id}/drivers/${e}`,data:r}),c=new h.FleetDriver(a);return c.api=this.api,c}))}listDrivers(){return o(this,arguments,(function*(){var e,t,i,r;try{for(var o,a=!0,c=n(this.api.batchFetch({endpoint:`/fleets/${this.id}/drivers`}));!(e=(o=yield s(c.next())).done);){r=o.value,a=!1;try{let e=r,t=new h.FleetDriver(e);t.api=this.api,yield yield s(t)}finally{a=!0}}}catch(e){t={error:e}}finally{try{a||e||!(i=c.return)||(yield s(i.call(c)))}finally{if(t)throw t.error}}}))}addVehicle({vehicleId:e,isActive:t=!0,isOpenToAll:i=!1}){return r(this,void 0,void 0,(function*(){let r={vehicleId:e,isActive:t,isOpenToAll:i},n=yield this.api.request({method:"POST",endpoint:`/fleets/${this.id}/vehicles`,data:r}),s=new d.FleetVehicle(n);return s.api=this.api,s}))}removeVehicle({vehicleId:e}){return r(this,void 0,void 0,(function*(){yield this.api.request({method:"DELETE",endpoint:`/fleets/${this.id}/vehicles/${e}`})}))}updateVehicle({vehicleId:e,isActive:t,isOpenToAll:i}){return r(this,void 0,void 0,(function*(){let r={};void 0!==t&&(r.isActive=t),void 0!==i&&(r.isOpenToAll=i);let n=yield this.api.request({method:"PATCH",endpoint:`/fleets/${this.id}/vehicles/${e}`,data:r}),s=new d.FleetVehicle(n);return s.api=this.api,s}))}listVehicles(){return o(this,arguments,(function*(){var e,t,i,r;try{for(var o,a=!0,c=n(this.api.batchFetch({endpoint:`/fleets/${this.id}/vehicles`}));!(e=(o=yield s(c.next())).done);){r=o.value,a=!1;try{let e=r,t=new d.FleetVehicle(e);t.api=this.api,yield yield s(t)}finally{a=!0}}}catch(e){t={error:e}}finally{try{a||e||!(i=c.return)||(yield s(i.call(c)))}finally{if(t)throw t.error}}}))}addDriverToVehicle({driverId:e,vehicleId:t,expiresAt:i,isActive:n=!0}){return r(this,void 0,void 0,(function*(){let r={driverId:e,vehicleId:t,isActive:n};(null==i?void 0:i.toISOString())&&(r.expiresAt=i.toISOString());let s=yield this.api.request({method:"POST",endpoint:`/fleets/${this.id}/drivers/${e}/vehicles`,data:r}),o=new l.FleetDriverVehicleAssignment(s);return o.api=this.api,o}))}removeDriverFromVehicle({driverId:e,vehicleId:t}){return r(this,void 0,void 0,(function*(){yield this.api.request({method:"DELETE",endpoint:`/fleets/${this.id}/drivers/${e}/vehicles/${t}`})}))}updateDriverVehicleAssignment({driverId:e,vehicleId:t,expiresAt:i,isActive:n}){return r(this,void 0,void 0,(function*(){let r={};(null==i?void 0:i.toISOString())&&(r.expiresAt=i.toISOString()),void 0!==n&&(r.isActive=n),yield this.api.request({method:"PATCH",endpoint:`/fleets/${this.id}/drivers/${e}/vehicles/${t}`,data:r})}))}listDriverVehicleAssignments({driverId:e,includeUnassigned:t=!0}){return o(this,arguments,(function*(){var i,r,o,a;try{for(var c,u=!0,h=n(this.api.batchFetch({endpoint:`/fleets/${this.id}/drivers/${e}/vehicles`,params:{includeUnassigned:t}}));!(i=(c=yield s(h.next())).done);){a=c.value,u=!1;try{let e=a,t=new l.FleetDriverVehicleAssignment(e);t.api=this.api,yield yield s(t)}finally{u=!0}}}catch(e){r={error:e}}finally{try{u||i||!(o=h.return)||(yield s(o.call(h)))}finally{if(r)throw r.error}}}))}listPolicies(){return o(this,arguments,(function*(){var e,t,i,r;try{for(var o,a=!0,u=n(this.api.batchFetch({endpoint:"/policy",params:{fleetId:this.id}}));!(e=(o=yield s(u.next())).done);){r=o.value,a=!1;try{let e=r,t=new c.Policy(e);t.api=this.api,yield yield s(t)}finally{a=!0}}}catch(e){t={error:e}}finally{try{a||e||!(i=u.return)||(yield s(i.call(u)))}finally{if(t)throw t.error}}}))}}t.Fleet=v},175:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FleetVehicle=void 0;const r=i(952);class n extends r.PrivateApiHandler{constructor(e){super(),Object.assign(this,e)}id(){var e;return null===(e=this.registeredVehicle)||void 0===e?void 0:e.id}}t.FleetVehicle=n},554:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(6),n=i(479),s=i(286),o=i(65),a=i(324),c=i(794),u=i(455),l=i(946);let h={Driver:r.Driver,BillingAccount:n.BillingAccount,BillingEvent:s.BillingEvent,Policy:o.Policy,DriverVehicle:a.DriverVehicle,Vehicle:c.Vehicle,VehicleType:u.VehicleType,Fleet:l.Fleet};t.default=h},568:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyApproval=void 0,t.PolicyApproval=class{constructor(e){Object.assign(this,e)}isApproved(){return!!this.approvedAt||!0===this.autoApproved}}},464:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyCancellation=void 0,t.PolicyCancellation=class{constructor(e){Object.assign(this,e)}isCancelled(){return!!this.cancelledAt}}},659:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDriver=void 0,t.PolicyDriver=class{constructor(e){Object.assign(this,e)}isAgreed(){return!!this.agreedAt}}},618:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyDuration=void 0,t.PolicyDuration=class{constructor(e){Object.assign(this,e)}isExpired(){return!!this.end&&this.end.getTime()+60*(this.gracePeriodMins||0)*1e3<Date.now()}}},0:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.policyGroup=void 0,(i=t.policyGroup||(t.policyGroup={})).D="d",i.DRV="drv",i.RV="rv",i.FD="fd",i.FDRV="fdrv",i.FRV="frv"},65:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Policy=void 0;const n=i(568),s=i(464),o=i(659),a=i(618),c=i(952),u=i(0);class l extends c.PrivateApiHandler{constructor(e){super(),e.approval=e.approval?new n.PolicyApproval(e.approval):void 0,e.cancellation=e.cancellation?new s.PolicyCancellation(e.cancellation):void 0,e.driver=e.driver?new o.PolicyDriver(e.driver):void 0,e.duration=e.duration?new a.PolicyDuration(e.duration):void 0,Object.assign(this,e)}isCancelled(){var e;return null===(e=this.cancellation)||void 0===e?void 0:e.isCancelled()}isApproved(){var e;return null===(e=this.approval)||void 0===e?void 0:e.isApproved()}isExpired(){var e;return null===(e=this.duration)||void 0===e?void 0:e.isExpired()}isDriverAgreed(){var e;return null===(e=this.driver)||void 0===e?void 0:e.isAgreed()}isLive(){return this.isActivePolicy&&this.isApproved()&&!this.isCancelled()&&!this.isExpired()&&this.isDriverAgreed()}ratePerKm(){var e,t,i;if(null===(e=this.rates)||void 0===e?void 0:e.enabled)return null===(i=null===(t=this.final)||void 0===t?void 0:t.rates)||void 0===i?void 0:i.value}ratePerMile(){var e,t,i,r,n;if(null===(e=this.rates)||void 0===e?void 0:e.enabled)return(null===(i=null===(t=this.final)||void 0===t?void 0:t.rates)||void 0===i?void 0:i.value)?1.60934*(null===(n=null===(r=this.final)||void 0===r?void 0:r.rates)||void 0===n?void 0:n.value):void 0}premiumAmount(){var e,t;return null===(t=null===(e=this.final)||void 0===e?void 0:e.premium)||void 0===t?void 0:t.value}_checkId(){if(!this.id)throw new Error("ID must be set")}refesh(){return r(this,void 0,void 0,(function*(){this._checkId();const e=yield this.api.request({method:"GET",endpoint:`policy/${this.id}`});e.approval=e.approval?new n.PolicyApproval(e.approval):void 0,e.cancellation=e.cancellation?new s.PolicyCancellation(e.cancellation):void 0,e.driver=e.driver?new o.PolicyDriver(e.driver):void 0,e.duration=e.duration?new a.PolicyDuration(e.duration):void 0,Object.assign(this,e)}))}delete(){return r(this,void 0,void 0,(function*(){this._checkId(),yield this.api.request({method:"DELETE",endpoint:`policy/${this.id}`})}))}save(e){return r(this,void 0,void 0,(function*(){return this._checkId(),yield this._save({endpoint:`policy/${this.id}`,fields:e})}))}update(e=!1,t){return r(this,void 0,void 0,(function*(){this._update({endpoint:`policy/${this.id}`,fields:t,persist:e})}))}create({api:e,recordId:t,driverId:i,vehicleId:c}){return r(this,void 0,void 0,(function*(){let r={};if(this.policyGroup===u.policyGroup.D)i&&t!==i&&(t=i);else if(this.policyGroup===u.policyGroup.DRV);else if(this.policyGroup===u.policyGroup.RV);else if(this.policyGroup===u.policyGroup.FD){if(!i)throw new Error("Driver ID must be supplied for FD policy");if(t==i)throw new Error("RecordId (fleet id) must not be the same as driverId for FD policy");r={driverId:i}}else if(this.policyGroup===u.policyGroup.FDRV){if(!i)throw new Error("Driver ID must be supplied for FDRV policy");if(!c)throw new Error("Vehicle ID must be supplied for FDRV policy");if(r={driverId:i,vehicleId:c},t==i||t==c)throw new Error("RecordId (fleet id) must not be the same as driverId or vehicleId for FDRV policy")}else if(this.policyGroup===u.policyGroup.FRV){if(!c)throw new Error("Vehicle ID must be supplied for FRV policy");if(t==c)throw new Error("RecordId (fleet id) must not be the same as vehicleId for FRV policy");r={vehicleId:c}}const l=yield e.request({method:"POST",endpoint:`policy/${t}`,params:r,data:this});return l.approval=l.approval?new n.PolicyApproval(l.approval):void 0,l.cancellation=l.cancellation?new s.PolicyCancellation(l.cancellation):void 0,l.driver=l.driver?new o.PolicyDriver(l.driver):void 0,l.duration=l.duration?new a.PolicyDuration(l.duration):void 0,l.api=e,Object.assign(this,l),this}))}driverApprove({refresh:e=!0}){return r(this,void 0,void 0,(function*(){this._checkId();let t={driver:{agreedAt:(new Date).toISOString()}};yield this.api.request({method:"PATCH",endpoint:`policies/${this.id}`,data:t}),e&&(yield this.refesh())}))}internalApprove({refresh:e=!0,approvedById:t}){return r(this,void 0,void 0,(function*(){this._checkId();let i={approval:{approvedAt:(new Date).toISOString()}};t&&(i.approval.approvedBy=t),yield this.api.request({method:"PATCH",endpoint:`policies/${this.id}`,data:i}),e&&(yield this.refesh())}))}cancel({refresh:e=!0,message:t}){return r(this,void 0,void 0,(function*(){this._checkId();let i={cancellation:{cancelledAt:(new Date).toISOString()}};t&&(i.cancellation.message=t),yield this.api.request({method:"PATCH",endpoint:`policies/${this.id}`,data:i}),e&&(yield this.refesh())}))}}t.Policy=l},259:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.LANG=t.regions=void 0,(i=t.regions||(t.regions={})).eu1="eu-1",i.dev_eu1="dev-eu-1",i.me1="me-1",i.us1="us-1",t.LANG=["en","ar","fr","es"]},324:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DriverVehicle=void 0;const n=i(794),s=i(952);class o extends s.PrivateApiHandler{constructor(e){super(),e.registeredVehicle=e.registeredVehicle?new n.Vehicle(e.registeredVehicle):void 0,Object.assign(this,e)}_checkId(){if(!this.id)throw new Error("ID must be set")}getDisplay(){var e;return this.registeredVehicle?`${this.displayName} ${null===(e=this.registeredVehicle)||void 0===e?void 0:e.getDisplay()}`:this.displayName||"Unknown"}telematicsId(){return this.sourceId}create({driverId:e,registeredVehicleId:t}){var i,n,s;return r(this,void 0,void 0,(function*(){if(!(t||(null===(i=this.registeredVehicle)||void 0===i?void 0:i.regPlate)&&(null===(s=null===(n=this.registeredVehicle)||void 0===n?void 0:n.vehicle)||void 0===s?void 0:s.id)))throw new Error("To created a DRV either registeredVehicleId should be provided or driverVehicle.registeredVehicle must have regPlate and registeredVehicle.vehicle (vehicle type) must have an ID");let r=Object.assign({},this);return t&&(r=Object.assign(Object.assign({},r),{registeredVehicleId:t}),delete r.registeredVehicle),yield this.api.request({method:"POST",endpoint:`drivers/${e}/vehicles`,data:Object.assign(Object.assign({},this),{registeredVehicleId:t})})}))}refresh(){return r(this,void 0,void 0,(function*(){this._checkId();let e=yield this.api.request({method:"GET",endpoint:`drivers/${this.driverId}/vehicles/${this.id}`});e.registeredVehicle=e.registeredVehicle?new n.Vehicle(e.registeredVehicle):void 0,e.api=this.api,Object.assign(this,e)}))}delete(){return r(this,void 0,void 0,(function*(){this._checkId(),yield this.api.request({method:"DELETE",endpoint:`drivers/${this.driverId}/vehicles/${this.id}`})}))}save(e={}){return r(this,void 0,void 0,(function*(){this._checkId(),yield this._save({endpoint:`drivers/${this.driverId}/vehicles/${this.id}`,fields:e,exclude:["driverId","vehicle"]})}))}update({persist:e=!1,fields:t={}}){return r(this,void 0,void 0,(function*(){yield this._update({endpoint:`drivers/${this.driverId}/vehicles/${this.id}`,persist:e,fields:t,exclude:["driverId","vehicle"]})}))}}t.DriverVehicle=o},794:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Vehicle=void 0;const n=i(952),s=i(455),o=i(324),a=i(65);class c extends n.PrivateApiHandler{constructor(e){super(),e.vehicle=e.vehicle?new s.VehicleType(e.vehicle):void 0,Object.assign(this,e)}_checkId(){if(!this.id)throw new Error("ID must be set")}getDisplay(){var e;return this.vehicle?`${null===(e=this.vehicle)||void 0===e?void 0:e.getDisplay()} - ${this.regPlate}`:this.regPlate||"Unknown"}addDrv({driverId:e,drv:t}){return r(this,void 0,void 0,(function*(){return this._checkId(),(null==t?void 0:t.api)||(t.api=this.api),yield t.create({driverId:e,registeredVehicleId:this.id})}))}addDriver({driverId:e,displayName:t,isOwner:i,isPrimaryDriver:n}){return r(this,void 0,void 0,(function*(){let r=new o.DriverVehicle({displayName:t,isOwner:i,isPrimaryDriver:n});return r.api=this.api,yield this.addDrv({driverId:e,drv:r})}))}createPolicy({policy:e}){return r(this,void 0,void 0,(function*(){return e||(e=new a.Policy({policyGroup:"rv"})),e.api=this.api,yield e.create({api:this.api,recordId:this.id})}))}refresh(){return r(this,void 0,void 0,(function*(){this._checkId();let e=yield this.api.request({method:"GET",endpoint:`registered-vehicles/${this.id}`});e.api=this.api,Object.assign(this,e)}))}delete(){return r(this,void 0,void 0,(function*(){this._checkId(),yield this.api.request({method:"DELETE",endpoint:`registered-vehicles/${this.id}`})}))}save(e={}){return r(this,void 0,void 0,(function*(){this._checkId(),yield this._save({endpoint:`registered-vehicles/${this.id}`,fields:e,exclude:["vehicleType"]})}))}update({persist:e=!1,fields:t={}}){return r(this,void 0,void 0,(function*(){yield this._update({endpoint:`vehicles/${this.id}`,persist:e,fields:t,exclude:["vehicleType"]})}))}}t.Vehicle=c},455:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.VehicleType=void 0;const n=i(952);class s extends n.PrivateApiHandler{constructor(e){super(),Object.assign(this,e)}_checkId(){if(!this.id)throw new Error("ID must be set")}getDisplay(){return`${this.brand} (${this.model})`}refresh(){return r(this,void 0,void 0,(function*(){this._checkId();let e=yield this.api.request({method:"GET",endpoint:`vehicles/${this.id}`});e.api=this.api,Object.assign(this,e)}))}delete(){return r(this,void 0,void 0,(function*(){this._checkId(),yield this.api.request({method:"DELETE",endpoint:`vehicles/${this.id}`})}))}save(e={}){return r(this,void 0,void 0,(function*(){this._checkId(),yield this._save({endpoint:`vehicles/${this.id}`,fields:e})}))}update({persist:e=!1,fields:t={}}){return r(this,void 0,void 0,(function*(){yield this._update({endpoint:`vehicles/${this.id}`,persist:e,fields:t})}))}}t.VehicleType=s},941:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},n=this&&this.__await||function(e){return this instanceof n?(this.v=e,this):new n(e)},s=this&&this.__asyncGenerator||function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=i.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){s[e]&&(r[e]=function(t){return new Promise((function(i,r){o.push([e,t,i,r])>1||c(e,t)}))})}function c(e,t){try{(i=s[e](t)).value instanceof n?Promise.resolve(i.value.v).then(u,l):h(o[0][2],i)}catch(e){h(o[0][3],e)}var i}function u(e){c("next",e)}function l(e){c("throw",e)}function h(e,t){e(t),o.shift(),o.length&&c(o[0][0],o[0][1])}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.APIHandlerAuth=t.APIHandlerNoAuth=void 0;const a=i(259),c=o(i(890)),u=i(974);t.APIHandlerNoAuth=class{constructor({url:e,region:t,orgId:i}){if(this.url=e,this.region=t,this.orgId=i,this.orgDataRefreshing=!1,!this.url&&!this.region)throw new Error("Must provide either a url or a region");if(this.url&&this.url.endsWith("/")&&(this.url=this.url.slice(0,-1)),!this.url){if(t&&!Object.values(a.regions).includes(t))throw new Error(`Invalid region. Must be one of: ${Object.values(a.regions).join(", ")}`);this.url=`https://${this.region}.nsurely-motor.com/v1/api`}this.telematicsUrl=`https://${this.region}.nsurely-motor.com/v1/telematics`,this.orgUrl=`${this.url}/org/${this.orgId}`}request({method:e,endpoint:t,params:i,data:n,headers:s,urlOverride:o}){return r(this,void 0,void 0,(function*(){this.orgData||this.orgDataRefreshing||(this.orgDataRefreshing=!0,this.refreshOrgData()),n&&(n=Object.assign({},n)).api&&delete n.api;let{body:r,status:a}=yield(0,c.default)({method:e,url:o||`${this.orgUrl}/${t}`,params:i,data:n,headers:s});if(a<300)return r;throw 401===a?new u.APIAuthError("Not authenticated"):new u.APIError(`Api responded with status code ${a}`)}))}refreshOrgData(){return r(this,void 0,void 0,(function*(){this.orgDataRefreshing=!0,this.orgData=yield this.request({urlOverride:`${this.url}/public/${this.orgId}`,method:"GET"}),this.orgDataRefreshing=!1}))}batchFetch({endpoint:e,params:t,headers:i,limit:r=50,offset:o=0}){return s(this,arguments,(function*(){for(t=Object.assign(Object.assign({},t),{limit:r,offset:o});;){let s=yield n(this.request({method:"GET",endpoint:e,params:Object.assign(Object.assign({},t),{offset:o}),headers:i}));if(!s||0===s.length)break;for(let e of s)yield yield n(e);if(s.length<r)break;o+=r}}))}},t.APIHandlerAuth=class{constructor({url:e,region:t,orgId:i,auth:r}){if(this.url=e,this.region=t,this.orgId=i,this.auth=r,this.orgDataRefreshing=!1,!this.url&&!this.region)throw new Error("Must provide either a url or a region");if(this.url&&this.url.endsWith("/")&&(this.url=this.url.slice(0,-1)),!this.url){if(t&&!Object.values(a.regions).includes(t))throw new Error(`Invalid region. Must be one of: ${Object.values(a.regions).join(", ")}`);this.url=`https://${this.region}.nsurely-motor.com/v1/api`}this.telematicsUrl=`https://${this.region}.nsurely-motor.com/v1/telematics`,this.orgUrl=`${this.url}/org/${this.orgId}`}makeRequest({method:e,params:t,data:i,headers:n,url:s}){return r(this,void 0,void 0,(function*(){return this.auth.requiresRefresh()&&(yield this.auth.refresh()),n=Object.assign(Object.assign({},n),this.auth.getHeaders()),yield(0,c.default)({method:e,url:s,params:t,data:i,headers:n})}))}refreshOrgData(){return r(this,void 0,void 0,(function*(){this.orgDataRefreshing=!0,this.orgData=yield this.request({urlOverride:`${this.url}/public/${this.orgId}`,method:"GET"}),this.orgDataRefreshing=!1}))}authOk(){return!!this.auth.isLoggedIn()&&!this.auth.requiresRefresh()}checkAuth(){return r(this,void 0,void 0,(function*(){if(!this.authOk()){if(!this.auth.isLoggedIn())return void(yield this.auth.login());if(this.auth.requiresRefresh())return void(yield this.auth.refresh())}}))}request({method:e,endpoint:t,params:i,data:n,headers:s,urlOverride:o}){return r(this,void 0,void 0,(function*(){this.orgData||this.orgDataRefreshing||(this.orgDataRefreshing=!0,yield this.refreshOrgData()),yield this.checkAuth(),n&&(n=Object.assign({},n)).api&&delete n.api;let r=yield this.makeRequest({method:e,url:o||`${this.orgUrl}/${t}`,params:i,data:n,headers:s}),a=(null==r?void 0:r.body)||{},c=(null==r?void 0:r.status)||0;if(401===c){yield this.checkAuth(),s=Object.assign(Object.assign({},s),this.auth.getHeaders());let r=yield this.makeRequest({method:e,url:o||`${this.orgUrl}/${t}`,params:i,data:n,headers:s});a=(null==r?void 0:r.body)||{},c=(null==r?void 0:r.status)||0}if(c<300)return a;throw 401===c?new u.APIAuthError("Not authenticated"):new u.APIError(`Api responded with status code ${c}`)}))}telematicsRequest({method:e,endpoint:t,params:i,data:n,headers:s}){return r(this,void 0,void 0,(function*(){n&&(n=Object.assign({},n)).api&&delete n.api;let r=`${this.telematicsUrl}/${t}`,o=yield this.makeRequest({method:e,url:r,params:i,data:n,headers:s}),a=(null==o?void 0:o.body)||{},c=(null==o?void 0:o.status)||0;if(401===c){yield this.checkAuth(),s=Object.assign(Object.assign({},s),this.auth.getHeaders());let t=yield this.makeRequest({method:e,url:r,params:i,data:n,headers:s});a=(null==t?void 0:t.body)||{},c=(null==t?void 0:t.status)||0}if(c<300)return a;throw 401===c?new u.APIAuthError("Not authenticated"):new u.APIError(`Api responded with status code ${c}`)}))}batchFetch({endpoint:e,params:t,headers:i,limit:r=50,offset:o=0}){return s(this,arguments,(function*(){for(t=Object.assign(Object.assign({},t),{limit:r,offset:o});;){let s=yield n(this.request({method:"GET",endpoint:e,params:Object.assign(Object.assign({},t),{offset:o}),headers:i}));if(!s||0===s.length)break;for(let e of s)yield yield n(e);if(s.length<r)break;o+=r}}))}}},974:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APIAuthError=t.APIError=void 0;class i extends Error{constructor(e){super(e),this.name="APIError"}}t.APIError=i,t.APIAuthError=class extends i{constructor(e){super(e),this.name="APIAuthError"}}},267:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APIHandlerNoAuth=t.APIHandlerAuth=void 0;const r=i(941);Object.defineProperty(t,"APIHandlerAuth",{enumerable:!0,get:function(){return r.APIHandlerAuth}}),Object.defineProperty(t,"APIHandlerNoAuth",{enumerable:!0,get:function(){return r.APIHandlerNoAuth}})},734:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.APIKeyAuth=void 0;const n=i(66);t.APIKeyAuth=class{constructor(e,t){if(this.apiKey=e,this.apiSecret=t,this.headers=void 0,!this.apiKey)throw new n.APIKeyAuthError("API key is required.");if(!this.apiSecret)throw new n.APIKeyAuthError("API secret is required.");this.apiKey=this.apiKey.trim(),this.apiSecret=this.apiSecret.trim()}requiresRefresh(){return!1}refresh(){return r(this,void 0,void 0,(function*(){}))}getToken(){return`${this.apiKey}:${this.apiSecret}`}getHeaders(){return this.headers||(this.headers={Authorization:`apiKey ${this.getToken()}`}),this.headers}isLoggedIn(){return!0}login(){return r(this,void 0,void 0,(function*(){return!0}))}logout(){return r(this,void 0,void 0,(function*(){return!0}))}}},808:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Auth=void 0;const n=i(66),s=i(734),o=i(506),a=i(537),c=i(259);var u;!function(e){e[e.API_KEY=1]="API_KEY",e[e.JWT_DRIVER=2]="JWT_DRIVER",e[e.JWT_USER=3]="JWT_USER"}(u||(u={})),t.Auth=class{constructor({apiKey:e,apiSecret:t,email:i,password:r,accountType:l,orgId:h,region:d,url:v}){if(this.apiKey=e,this.apiSecret=t,this.email=i,this.password=r,this.accountType=l,this.region=d,this.url=v,this.orgId=h,this.isLoggingIn=!1,this.url&&this.url.endsWith("/")&&(this.url=this.url.slice(0,-1)),!this.url){if(d&&!Object.values(c.regions).includes(d))throw new Error(`Invalid region. Must be one of: ${Object.values(c.regions).join(", ")}`);this.url=`https://${this.region}.nsurely-motor.com/v1/api`}if(this.apiKey){if(!this.apiSecret){if(-1===this.apiKey.indexOf(":"))throw new n.AuthError('Invalid API key. API key must be in the format "key:secret".');[this.apiKey,this.apiSecret]=this.apiKey.split(":")}this.authMethod=u.API_KEY,this.authObject=new s.APIKeyAuth(this.apiKey,this.apiSecret)}else{if(!this.email||!this.password)throw new n.AuthError("Auth credentials are missing.");if(!this.accountType)throw new n.AuthError("Account type must be specified.");if("driver"===this.accountType)this.authMethod=u.JWT_DRIVER,this.authObject=new o.DriverAuth({email:this.email,password:this.password,url:this.url,region:this.region,orgId:this.orgId,authType:this.accountType});else{if("user"!==this.accountType)throw new n.AuthError("Invalid account type.");this.authMethod=u.JWT_USER,this.authObject=new a.UserAuth({email:this.email,password:this.password,url:this.url,region:this.region,orgId:this.orgId,authType:this.accountType})}}}requiresRefresh(){return this.authObject.requiresRefresh()}refresh(){return r(this,void 0,void 0,(function*(){yield this.authObject.refresh()}))}login(){return r(this,void 0,void 0,(function*(){if(this.authMethod===u.API_KEY)return!0;if(this.isLoggingIn)return yield new Promise((e=>{const t=setInterval((()=>{this.isLoggingIn||(clearInterval(t),e(this.authObject.getToken()))}),100)}));if(this.isLoggingIn=!0,this.email&&this.password){let e=yield this.authObject.login(this.email,this.password);return this.isLoggingIn=!1,e}throw new n.AuthError("Auth credentials are missing.")}))}logout(){return r(this,void 0,void 0,(function*(){return yield this.authObject.logout()}))}getToken(){return this.authObject.getToken()}getHeaders(){return this.authObject.getHeaders()}isLoggedIn(){return this.authObject.isLoggedIn()}}},506:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DriverAuth=void 0;const s=i(88),o=n(i(890));class a extends s.JWTAuth{constructor({url:e,region:t,orgId:i,authType:r,email:n,password:s}){super({url:e,region:t,orgId:i,authType:r,email:n,password:s})}signup({email:e,password:t,firstName:i,lastName:n,fields:s,login:a}){return r(this,void 0,void 0,(function*(){s=s||{};const r=Object.assign({email:e,password:t,firstName:i,lastName:n},s),c=yield(0,o.default)({url:`${this.url}/org/${this.orgId}/auth/drivers/signup`,method:"POST",data:r});return a&&(yield this.login(e,t)),c.body}))}}t.DriverAuth=a},66:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JWTUserAuthError=t.JWTDriverAuthError=t.APIKeyAuthError=t.AuthError=void 0;class i extends Error{constructor(e){super(e),this.name="AuthError"}}t.AuthError=i,t.APIKeyAuthError=class extends i{constructor(e){super(e),this.name="APIKeyAuthError"}},t.JWTDriverAuthError=class extends i{constructor(e){super(e),this.name="JWTDriverAuthError"}},t.JWTUserAuthError=class extends i{constructor(e){super(e),this.name="JWTUserAuthError"}}},96:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(808);t.default=r.Auth},88:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JWTAuth=void 0;const s=n(i(890)),o=i(259);t.JWTAuth=class{constructor({url:e,region:t,orgId:i,authType:r,email:n,password:s}){if(this.url=e,this.region=t,this.orgId=i,this.authType=r,this.email=n,this.password=s,this.tokenType=void 0,this.accessToken=void 0,this.expiresIn=void 0,this.refreshToken=void 0,this.refreshExpiresIn=void 0,this.lastRefreshTime=void 0,this.accountId=void 0,this.accountType=void 0,this.orgs=[],"driver"!==this.authType&&"user"!==this.authType)throw new Error("Invalid authType. Must be 'driver' or 'user'");if(this.url&&this.url.endsWith("/")&&(this.url=this.url.slice(0,-1)),!this.url){if(t&&!Object.values(o.regions).includes(t))throw new Error(`Invalid region. Must be one of: ${Object.values(o.regions).join(", ")}`);this.url=`https://${this.region}.nsurely-motor.com/v1/api`}if("user"===this.authType)this.loginUrl=`${this.url}/org/auth/users/login`,this.refreshUrl=`${this.url}/org/auth/users/refresh`,this.logoutUrl=`${this.url}/org/auth/users/logout`;else{if("driver"!==this.authType)throw new Error("Invalid authType. Must be 'driver' or 'user'");this.loginUrl=`${this.url}/org/${this.orgId}/auth/drivers/login`,this.refreshUrl=`${this.url}/org/${this.orgId}/auth/drivers/refresh`,this.logoutUrl=`${this.url}/org/${this.orgId}/auth/drivers/logout`}}refreshExpired(){return!this.lastRefreshTime||!this.refreshExpiresIn||this.refreshExpiresIn-(Date.now()-this.lastRefreshTime)<0}requiresRefresh(){return!this.accessToken||!this.expiresIn||!this.lastRefreshTime||this.expiresIn-(Date.now()-this.lastRefreshTime)<0}login(e,t){var i,n,o,a,c,u,l,h;return r(this,void 0,void 0,(function*(){const r=yield(0,s.default)({method:"POST",url:this.loginUrl,data:{email:e,password:t}});return this.tokenType=null===(i=r.body)||void 0===i?void 0:i.tokenType,this.accessToken=null===(n=r.body)||void 0===n?void 0:n.accessToken,this.expiresIn=null===(o=r.body)||void 0===o?void 0:o.expiresIn,this.refreshToken=null===(a=r.body)||void 0===a?void 0:a.refreshToken,this.refreshExpiresIn=null===(c=r.body)||void 0===c?void 0:c.refreshExpiresIn,this.accountId=null===(u=r.body)||void 0===u?void 0:u.accountId,this.accountType=null===(l=r.body)||void 0===l?void 0:l.accountType,"user"===this.authType&&(this.orgs=null===(h=r.body)||void 0===h?void 0:h.orgs),this.lastRefreshTime=Date.now(),this.accessToken}))}logout(){return r(this,void 0,void 0,(function*(){this.isLoggedIn()&&(yield(0,s.default)({method:"POST",url:this.logoutUrl,data:{refreshToken:this.refreshToken}}),this.accessToken=void 0,this.refreshToken=void 0,this.expiresIn=void 0,this.refreshExpiresIn=void 0,this.lastRefreshTime=void 0)}))}isLoggedIn(){return!(!this.accessToken||!this.expiresIn||!this.lastRefreshTime||!this.refreshExpiresIn||(this.refreshExpiresIn,Date.now(),this.lastRefreshTime,0))}refresh(){var e,t,i,n,o,a,c;return r(this,void 0,void 0,(function*(){if(this.refreshExpired())throw new Error("Refresh token expired due to inactivity. Please login again.");const r=yield(0,s.default)({method:"POST",url:this.refreshUrl,data:{refreshToken:this.refreshToken}});return this.tokenType=null===(e=r.body)||void 0===e?void 0:e.tokenType,this.accessToken=null===(t=r.body)||void 0===t?void 0:t.accessToken,this.expiresIn=null===(i=r.body)||void 0===i?void 0:i.expiresIn,this.refreshToken=null===(n=r.body)||void 0===n?void 0:n.refreshToken,this.refreshExpiresIn=null===(o=r.body)||void 0===o?void 0:o.refreshExpiresIn,this.accountId=null===(a=r.body)||void 0===a?void 0:a.accountId,this.accountType=null===(c=r.body)||void 0===c?void 0:c.accountType,this.lastRefreshTime=Date.now(),this.accessToken}))}getToken(){if(!this.accessToken)throw new Error("No access token or refresh token found. Please login first.");return`Bearer ${this.accessToken}`}getHeaders(){return this.accessToken?{Authorization:this.getToken()}:{}}}},537:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserAuth=void 0;const r=i(88);class n extends r.JWTAuth{constructor({url:e,region:t,orgId:i,authType:r,email:n,password:s}){super({url:e,region:t,orgId:i,authType:r,email:n,password:s})}}t.UserAuth=n},465:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFromObject=t.isJsonString=t.applyMixins=void 0,t.applyMixins=function(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((i=>{Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t.prototype,i)||Object.create(null))}))}))},t.isJsonString=function(e=""){try{JSON.parse(e)}catch(e){return!1}return!0},t.deleteFromObject=function(e,t){for(var i in t)~i.indexOf(e)&&delete t[i]}},890:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},o=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=s(i(300));t.default=function({method:e,url:t,data:i=null,headers:r,params:n}){return new Promise(((s,c)=>{let u={method:e,redirect:"follow"},l=new a.Headers;if(i&&(l.append("Content-Type","application/json"),u.body=JSON.stringify(i)),r)for(const[e,t]of Object.entries(r))l.append(e,t);u.headers=l,(0,a.default)(`${t}?${new URLSearchParams(Object.assign({},n))}`,u).then((t=>function({response:e,method:t}){return e}({response:t,method:e}))).then((i=>{(function({response:e,method:t,url:i,params:r}){return o(this,void 0,void 0,(function*(){if(e.status>=200&&e.status<300){if(204===e.status||205===e.status)return null;let t=yield e.json();return{status:e.status,body:t}}let n=yield e.text();switch(function(e=""){try{JSON.parse(e)}catch(e){return!1}return!0}(n)&&(n=JSON.parse(n)),e.status){case 401:case 403:case 404:break;default:console.error("API call failed",{url:i,method:t,status:e.status,response:n,params:r||{}})}throw{status:e.status,body:n}}))})({response:i,method:e,url:t,params:n}).then((e=>{s(e)})).catch((e=>{c(e)}))})).catch((e=>{c(e)}))}))}},486:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0;let i=["eq","ne","gt","gte","lt","lte","like","ilike"];t.Search=class{constructor({value:e,operator:t="eq"}){this.value=e,this.operator=t}_getValueString(){return this.value instanceof Date?this.value.toISOString():this.value.toString()}availableOperators(){return i}toString(){return`${this.operator}.${this._getValueString()}`}}},133:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(i(797));class o{constructor(e=null){this.storage=new s.default({size:1e3,storageBackend:e,defaultExpires:null,enableCache:!0})}static createStorage(e=null){null==this.myInstance&&(this.myInstance=new o(e))}static getInstance(){if(null==this.myInstance)throw new Error("StorageManager has not been initialised. Initialise with StorageManager.createStorage(storageBackend)");return this.myInstance}save({key:e,data:t}){return r(this,void 0,void 0,(function*(){yield this.storage.save({key:e,data:t})}))}load({key:e}){return r(this,void 0,void 0,(function*(){return yield this.storage.load({key:e})}))}remove({key:e}){return r(this,void 0,void 0,(function*(){yield this.storage.remove({key:e})}))}}t.default=o}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,i),s.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(607)})();
//# sourceMappingURL=motorjs.min.js.map